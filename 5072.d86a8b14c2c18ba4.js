"use strict";(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[5072],{5072:(K,C,e)=>{e.r(C),e.d(C,{default:()=>V});var t=e(15861),D=e(17626),R=e(73281),S=e(48701),n=e(27e3),w=(e(63290),e(90912),e(85931),e(8314),e(82255),e(76898)),M=e(40342),I=e(33474),l=e(17253),m=e(37384),s=e(36275),d=e(97291),p=e(45611);let U=class extends((0,m.y)(p.Z)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(a,P){var _=this;return(0,t.Z)(function*(){if(!_.graphicsViews.length)return null;const T=_.graphicsViews.reverse().map(o=>o.hitTest(a));return(yield Promise.all(T)).flat().filter((o,j)=>(o&&(o.popupTemplate=_._popupTemplates.get(_.graphicsViews[j]),o.layer=_.layer,o.sourceLayer=_.layer),!!o))})()}update(a){if(this.graphicsViews)for(const P of this.graphicsViews)P.processUpdate(a)}attach(){this.handles.add([(0,n.S1)(this.layer,"featureCollections",a=>{this._clear();for(const{popupInfo:P,featureSet:_,layerDefinition:T}of a){const o=l.default.fromJSON(_),j=new S.Z(o.features),O=T.drawingInfo,B=P?R.Z.fromJSON(P):null,v=(0,I.i)(O.renderer),f=new d.Z({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:j,renderer:v,container:new s.Z(this.view.featuresTilingScheme)});this._graphicsViewMap[o.geometryType]=f,this._popupTemplates.set(f,B),"polygon"!==o.geometryType||this.layer.polygonSymbol?"polyline"!==o.geometryType||this.layer.lineSymbol?"point"!==o.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=v.symbol):this.layer.lineSymbol=v.symbol:this.layer.polygonSymbol=v.symbol,this.graphicsViews.push(f),this.container.addChild(f.container)}}),(0,n.S1)(this.layer,"polygonSymbol",a=>{this._graphicsViewMap.polygon.renderer=new M.Z({symbol:a})}),(0,n.S1)(this.layer,"lineSymbol",a=>{this._graphicsViewMap.polyline.renderer=new M.Z({symbol:a})}),(0,n.S1)(this.layer,"pointSymbol",a=>{this._graphicsViewMap.point.renderer=new M.Z({symbol:a})})],"georsslayerview")}detach(){this.handles.remove("georsslayerview"),this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const a of this.graphicsViews)a.viewChange()}_clear(){this.container.removeAllChildren();for(const a of this.graphicsViews)a.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};U=(0,D._)([(0,w.j)("esri.views.2d.layers.GeoRSSLayerView2D")],U);const V=U},37384:(K,C,e)=>{e.d(C,{y:()=>N});var t=e(17626),D=e(48701),R=e(89726),S=e(26584),n=e(32917),r=e(77712),E=(e(85931),e(8314),e(90912),e(76898)),w=e(1011),M=e(86810);e(63290),e(82255);let m=class extends M.wq{};m=(0,t._)([(0,E.j)("esri.views.layers.support.ClipArea")],m);const s=m;var d;let p=d=class extends s{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new d({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};(0,t._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"left",void 0),(0,t._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"right",void 0),(0,t._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"top",void 0),(0,t._)([(0,r.Cb)({type:[Number,String],json:{write:!0}})],p.prototype,"bottom",void 0),(0,t._)([(0,r.Cb)({readOnly:!0})],p.prototype,"version",null),p=d=(0,t._)([(0,E.j)("esri.views.layers.support.ClipRect")],p);const U=p;e(29132);var o,a=e(21674),P=e(91179),_=e(2004),T=e(37118);const j={base:a.Z,key:"type",typeMap:{extent:_.Z,polygon:T.Z}};let O=o=class extends s{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new o({geometry:this.geometry.clone()})}};(0,t._)([(0,r.Cb)({types:j,json:{read:P.im,write:!0}})],O.prototype,"geometry",void 0),(0,t._)([(0,r.Cb)({readOnly:!0})],O.prototype,"version",null),O=o=(0,t._)([(0,E.j)("esri.views.layers.support.Geometry")],O);const B=O;let v=class extends s{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};(0,t._)([(0,r.Cb)({type:[[[Number]]],json:{write:!0}})],v.prototype,"path",void 0),(0,t._)([(0,r.Cb)({readOnly:!0})],v.prototype,"version",null),v=(0,t._)([(0,E.j)("esri.views.layers.support.Path")],v);const W=D.Z.ofType({key:"type",base:s,typeMap:{rect:U,path:v,geometry:B}}),N=x=>{let y=class extends x{constructor(){super(...arguments),this.attached=!1,this.clips=new W,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1}initialize(){var i,h,g,b;const G=null==(i=null==(h=this.view)?void 0:h.spatialReferenceLocked)||i;(null==(g=this.view)?void 0:g.spatialReference)&&G&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new S.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new w.W),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([(0,n.YP)(()=>this.suspended,c=>{this.container&&(this.container.visible=!c),this.view&&!c&&this.updateRequested&&this.view.requestUpdate()},n.tX),(0,n.YP)(()=>{var c,Z;return null!=(c=null==(Z=this.layer)?void 0:Z.opacity)?c:1},c=>{this.container&&(this.container.opacity=c)},n.tX),(0,n.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",c=>{this.container&&(this.container.blendMode=c)},n.tX),(0,n.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,c=>{this.container&&(this.container.effect=c)},n.tX),(0,n.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)})]),null!=(b=this.view)&&b.whenLayerView?this.view.whenLayerView(this.layer).then(c=>{c===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var i;const h=null==(i=this.view)?void 0:i.spatialReference;return null==h||this.supportsSpatialReference(h)}get updating(){var i;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null==(i=this.updatingHandles)||!i.updating))}get visibleAtCurrentScale(){return this.isVisibleAtScale(this.view.scale)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}isVisibleAtScale(i){const h=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!h)return!0;const{minScale:g,maxScale:b}=h;return(0===g||i<=g)&&(0===b||i>=b)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(i){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",i),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(i))):this.updateRequested=!1}hitTest(i,h){return Promise.resolve(null)}supportsSpatialReference(i){return!0}isUpdating(){return!1}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const i=super.getSuspendInfo(),h=!this.spatialReferenceSupported,g=this.visibleAtCurrentScale;return h&&(i.spatialReferenceNotSupported=h),g&&(i.outsideScaleRange=g),i}};return(0,t._)([(0,r.Cb)()],y.prototype,"attached",void 0),(0,t._)([(0,r.Cb)({type:W,set(i){const h=(0,R.Z)(i,this._get("clips"),W);this._set("clips",h)}})],y.prototype,"clips",void 0),(0,t._)([(0,r.Cb)()],y.prototype,"container",void 0),(0,t._)([(0,r.Cb)()],y.prototype,"moving",void 0),(0,t._)([(0,r.Cb)({readOnly:!0})],y.prototype,"spatialReferenceSupported",null),(0,t._)([(0,r.Cb)({readOnly:!0})],y.prototype,"updateParameters",void 0),(0,t._)([(0,r.Cb)()],y.prototype,"updateRequested",void 0),(0,t._)([(0,r.Cb)()],y.prototype,"updating",null),(0,t._)([(0,r.Cb)()],y.prototype,"view",void 0),(0,t._)([(0,r.Cb)({readOnly:!0})],y.prototype,"visibleAtCurrentScale",null),y=(0,t._)([(0,E.j)("esri.views.2d.layers.LayerView2D")],y),y}},45611:(K,C,e)=>{e.d(C,{Z:()=>m});var t=e(17626),D=e(14517),R=e(61885),S=e(80542),n=e(61996),r=e(63290),L=e(62208),A=e(60330),u=e(77712),I=(e(85931),e(8314),e(90912),e(76898));let l=class extends((0,S.p)((0,n.I)((0,A.v)(R.Z.EventedMixin(D.Z))))){constructor(s){super(s),this.layer=null,this.parent=null}initialize(){this.when().catch(s=>{if("layerview:create-error"!==s.name){const d=this.layer&&this.layer.id||"no id",p=this.layer&&this.layer.title||"no title";throw r.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${p}', id: '${d}')`,s),s}})}get fullOpacity(){return(0,L.Pt)(this.get("layer.opacity"),1)*(0,L.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){var s;return!!(null!=(s=this.updatingHandles)&&s.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var s;return!0===(null==(s=this.layer)?void 0:s.visible)}set visible(s){void 0!==s?this._override("visible",s):this._clearOverride("visible")}canResume(){var s,d,p;return this.visible&&(null==(s=this.layer)?void 0:s.loaded)&&!(null!=(d=this.parent)&&d.suspended)&&(null==(p=this.view)?void 0:p.ready)||!1}getSuspendInfo(){const s=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(s.viewNotReady=!0),this.layer&&this.layer.loaded||(s.layerNotLoaded=!0),this.visible||(s.layerInvisible=!0),s}isUpdating(){return!1}};(0,t._)([(0,u.Cb)()],l.prototype,"fullOpacity",null),(0,t._)([(0,u.Cb)()],l.prototype,"layer",void 0),(0,t._)([(0,u.Cb)()],l.prototype,"parent",void 0),(0,t._)([(0,u.Cb)({readOnly:!0})],l.prototype,"suspended",null),(0,t._)([(0,u.Cb)({readOnly:!0})],l.prototype,"suspendInfo",null),(0,t._)([(0,u.Cb)({readOnly:!0})],l.prototype,"legendEnabled",null),(0,t._)([(0,u.Cb)({type:Boolean,readOnly:!0})],l.prototype,"updating",null),(0,t._)([(0,u.Cb)({readOnly:!0})],l.prototype,"updatingProgress",null),(0,t._)([(0,u.Cb)()],l.prototype,"visible",null),(0,t._)([(0,u.Cb)()],l.prototype,"view",void 0),l=(0,t._)([(0,I.j)("esri.views.layers.LayerView")],l);const m=l}}]);