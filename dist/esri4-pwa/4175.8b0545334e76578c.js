"use strict";var Gt=Object.defineProperty,Zt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,Ht=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,$t=(ot,W,N)=>W in ot?Gt(ot,W,{enumerable:!0,configurable:!0,writable:!0,value:N}):ot[W]=N,It=(ot,W)=>{for(var N in W||(W={}))Qt.call(W,N)&&$t(ot,N,W[N]);if(Ht)for(var N of Ht(W))qt.call(W,N)&&$t(ot,N,W[N]);return ot},Rt=(ot,W)=>Zt(ot,Vt(W));(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[4175],{47139:(ot,W,N)=>{N.d(W,{RL:()=>U,bk:()=>v,Fp:()=>ft,UV:()=>k});var nt=N(36161),ct=N(91179),Q=N(31375);function ft(u){if(!u)return null;switch(u.type){case"CIMPointSymbol":{const O=u.symbolLayers;return O&&1===O.length?ft(O[0]):null}case"CIMVectorMarker":{var d;const O=u.markerGraphics;if(!O||1!==O.length)return null;const _=O[0];if(!_)return null;const I=_.geometry;if(!I)return null;const S=_.symbol;return!S||"CIMPolygonSymbol"!==S.type&&"CIMLineSymbol"!==S.type||null!=(d=S.symbolLayers)&&d.some(E=>!!E.effects)?null:{geom:I,asFill:"CIMPolygonSymbol"===S.type}}case"sdf":return{geom:u.geom,asFill:u.asFill}}return null}function P(u){let d=1/0,O=-1/0,_=1/0,I=-1/0;for(const S of u)for(const E of S)E[0]<d&&(d=E[0]),E[0]>O&&(O=E[0]),E[1]<_&&(_=E[1]),E[1]>I&&(I=E[1]);return[d,_,O,I]}function v(u){return u?u.rings?P(u.rings):u.paths?P(u.paths):(0,ct.YX)(u)?[u.xmin,u.ymin,u.xmax,u.ymax]:null:null}function k(u,d,O,_,I){const[S,E,w,B]=u;if(w<S||B<E)return[0,0,0];const z=w-S,D=B-E,J=Math.floor(31.5),H=(128-2*(J+1))/Math.max(z,D),K=Math.round(z*H)+2*J,st=Math.round(D*H)+2*J;let lt=1;d&&(lt=st/H/(d.ymax-d.ymin));let $=0,Y=0;return _&&(I?d&&O&&d.ymax-d.ymin>0&&($=_.x/(O*((d.xmax-d.xmin)/(d.ymax-d.ymin))),Y=_.y/O):($=_.x,Y=_.y)),$=.5*(d.xmax+d.xmin)+$*(d.xmax-d.xmin),Y=.5*(d.ymax+d.ymin)+Y*(d.ymax-d.ymin),$-=S,Y-=E,$*=H,Y*=H,$+=J,Y+=J,[lt,$/K-.5,-(Y/st-.5)]}function U(u){const d=function ht(u){return u?u.rings?u.rings:u.paths?u.paths:void 0!==u.xmin&&void 0!==u.ymin&&void 0!==u.xmax&&void 0!==u.ymax?[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]:null:null}(u.geom),O=function x(u){let d=1/0,O=-1/0,_=1/0,I=-1/0;for(const S of u)for(const E of S)E[0]<d&&(d=E[0]),E[0]>O&&(O=E[0]),E[1]<_&&(_=E[1]),E[1]>I&&(I=E[1]);return new Q.Z(d,_,O-d,I-_)}(d),S=Math.floor(31.5),E=(128-2*(S+1))/Math.max(O.width,O.height),w=Math.round(O.width*E)+2*S,B=Math.round(O.height*E)+2*S,z=[];for(const R of d)if(R&&R.length>1){const T=[];for(const J of R){let[H,K]=J;H-=O.x,K-=O.y,H*=E,K*=E,H+=S-.5,K+=S-.5,T.push(u.asFill?[H,K]:[Math.round(H),Math.round(K)])}if(u.asFill){const J=T.length-1;T[0][0]===T[J][0]&&T[0][1]===T[J][1]||T.push(T[0])}z.push(T)}const D=function f(u,d,O,_){const I=d*O,S=new Array(I),E=_*_+1;for(let w=0;w<I;++w)S[w]=E;for(const w of u){const B=w.length;for(let z=1;z<B;++z){const D=w[z-1],R=w[z];let T,J,H,K;D[0]<R[0]?(T=D[0],J=R[0]):(T=R[0],J=D[0]),D[1]<R[1]?(H=D[1],K=R[1]):(H=R[1],K=D[1]);let st=Math.floor(T)-_,lt=Math.floor(J)+_,$=Math.floor(H)-_,Y=Math.floor(K)+_;st<0&&(st=0),lt>d&&(lt=d),$<0&&($=0),Y>O&&(Y=O);const j=R[0]-D[0],Et=R[1]-D[1],Ut=j*j+Et*Et;for(let gt=st;gt<lt;gt++)for(let dt=$;dt<Y;dt++){let Nt,_t,Ot=(gt-D[0])*j+(dt-D[1])*Et;Ot<0?(Nt=D[0],_t=D[1]):Ot>Ut?(Nt=R[0],_t=R[1]):(Ot/=Ut,Nt=D[0]+Ot*j,_t=D[1]+Ot*Et);const Lt=(gt-Nt)*(gt-Nt)+(dt-_t)*(dt-_t),at=(O-dt-1)*d+gt;Lt<S[at]&&(S[at]=Lt)}}}for(let w=0;w<I;++w)S[w]=Math.sqrt(S[w]);return S}(z,w,B,S);return u.asFill&&function A(u,d,O,_,I){for(const S of u){const E=S.length;for(let w=1;w<E;++w){const B=S[w-1],z=S[w];let D,R,T,J;B[0]<z[0]?(D=B[0],R=z[0]):(D=z[0],R=B[0]),B[1]<z[1]?(T=B[1],J=z[1]):(T=z[1],J=B[1]);let H=Math.floor(D),K=Math.floor(R)+1,st=Math.floor(T),lt=Math.floor(J)+1;H<_&&(H=_),K>d-_&&(K=d-_),st<_&&(st=_),lt>O-_&&(lt=O-_);for(let $=st;$<lt;++$){if(B[1]>$==z[1]>$)continue;const Y=(O-$-1)*d;for(let j=H;j<K;++j)j<(z[0]-B[0])*($-B[1])/(z[1]-B[1])+B[0]&&(I[Y+j]=-I[Y+j]);for(let j=_;j<H;++j)I[Y+j]=-I[Y+j]}}}}(z,w,B,S,D),[Z(D,S),w,B]}function Z(u,d){const O=2*d,_=u.length,I=new Uint8Array(4*_);for(let S=0;S<_;++S)(0,nt.I)(.5-u[S]/O,I,4*S);return I}},84175:(ot,W,N)=>{N.d(W,{S:()=>Jt,c:()=>D});var nt=N(15861),ct=N(91558),Q=N(58817),ft=N(63290),q=N(62208),ht=N(23841),x=N(77275),P=N(46679),v=N(35909),k=N(7547),U=N(47139),f=N(80991),A=N(73608),Z=N(39236),u=N(21411);const d=ft.Z.getLogger("esri.symbols.cim.cimAnalyzer");function O(t){switch(t){case"Butt":return k.RL.BUTT;case"Square":return k.RL.SQUARE;default:return k.RL.ROUND}}function _(t){switch(t){case"Bevel":return k.AH.BEVEL;case"Miter":return k.AH.MITER;default:return k.AH.ROUND}}function I(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function S(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function B(t,i,o,n){let e;t[i]?e=t[i]:(e={},t[i]=e),e[o]=n}function z(t){const i=t.markerPlacement;return i&&i.angleToLine?k.v2.MAP:k.v2.SCREEN}function D(t,i,o,n,e){return R.apply(this,arguments)}function R(){return(R=(0,nt.Z)(function*(t,i,o,n,e){const l=null!=n?n:[];if(!t)return l;let r,s;const c={};if("CIMSymbolReference"!==t.type)return d.error("Expect cim type to be 'CIMSymbolReference'"),l;if(r=t.symbol,s=t.primitiveOverrides,s){const p=[];for(const g of s){const m=g.valueExpressionInfo;if(m&&i){const M=(0,P.Yi)(m.expression,i.spatialReference,i.fields).then(L=>{L&&B(c,g.primitiveName,g.propertyName,L)});p.push(M)}else null!=g.value&&B(c,g.primitiveName,g.propertyName,g.value)}p.length>0&&(yield Promise.all(p))}const h=[];switch(Wt(r,o,h),h.length>0&&(yield Promise.all(h)),r.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":T(r,s,c,i,l,o,e)}return l})).apply(this,arguments)}function T(t,i,o,n,e,l,r){if(!t)return;const s=t.symbolLayers;if(!s)return;const c=t.effects;let h;const p=v.B$.getSize(t);"CIMPointSymbol"===t.type&&"Map"===t.angleAlignment&&(h=k.v2.MAP);let g=s.length;for(;g--;){const m=s[g];if(!m||!1===m.enable)continue;let a;c&&c.length&&(a=[...c]);const M=m.effects;M&&M.length&&(c?a.push(...M):a=[...M]);const L=[];let b;v.E0.findEffectOverrides(a,i,L),b=L.length>0?jt(a,L,o,n):a;const C=[];switch(v.E0.findApplicableOverrides(m,i,C),m.type){case"CIMSolidFill":J(m,b,o,C,n,e);break;case"CIMPictureFill":H(m,b,o,C,n,l,e);break;case"CIMHatchFill":K(m,b,o,C,n,e);break;case"CIMGradientFill":st(m,b,o,C,n,e);break;case"CIMSolidStroke":lt(m,b,o,C,n,e,"CIMPolygonSymbol"===t.type,p);break;case"CIMPictureStroke":$(m,b,o,C,n,e,"CIMPolygonSymbol"===t.type,p);break;case"CIMGradientStroke":Y(m,b,o,C,n,e,"CIMPolygonSymbol"===t.type,p);break;case"CIMCharacterMarker":if(j(m,b,o,C,n,e))break;break;case"CIMPictureMarker":if(j(m,b,o,C,n,e))break;"CIMLineSymbol"===t.type&&(h=z(m)),Et(m,b,o,C,n,l,e,h,p);break;case"CIMVectorMarker":if(j(m,b,o,C,n,e))break;"CIMLineSymbol"===t.type&&(h=z(m)),Ut(m,b,o,C,n,e,l,h,p,r);break;default:d.error("Cannot analyze CIM layer",m.type)}}}function J(t,i,o,n,e,l){const r=t.primitiveName,s=(0,f.NO)(t.color),[c,h]=ut(n,r,i,null),p=(0,x.hP)(JSON.stringify(t)+h).toString();l.push({type:"fill",templateHash:p,materialHash:c?()=>p:p,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:y(r,o,"Color",e,s,at),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:i})}function H(t,i,o,n,e,l,r){const s=t.primitiveName,c=t.tintColor?(0,f.NO)(t.tintColor):{r:255,g:255,b:255,a:1},[h,p]=ut(n,s,i,null),g=(0,x.hP)(JSON.stringify(t)+p).toString(),m=(0,x.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();let a=(0,f.NA)(t.scaleX);if("width"in t){const M=t.width;let L=1;const b=l.getResource(t.url);(0,q.pC)(b)&&(L=b.width/b.height),a/=L*(t.height/M)}r.push({type:"fill",templateHash:g,materialHash:h?()=>m:m,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,color:y(s,o,"TintColor",e,c,at),height:y(s,o,"Height",e,t.height),scaleX:y(s,o,"ScaleX",e,a),angle:y(s,o,"Rotation",e,(0,f.NA)(t.rotation)),offsetX:y(s,o,"OffsetX",e,(0,f.NA)(t.offsetX)),offsetY:y(s,o,"OffsetY",e,(0,f.NA)(t.offsetY)),url:t.url})}function K(t,i,o,n,e,l){const r=["Rotation","OffsetX","OffsetY"],s=n.filter(a=>a.primitiveName!==t.primitiveName&&-1===r.indexOf(a.propertyName)),c=t.primitiveName,[h,p]=ut(n,c,i,null),g=(0,x.hP)(JSON.stringify(t)+p).toString(),m=(0,x.hP)(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();l.push({type:"fill",templateHash:g,materialHash:h?xt(m,o,s,e):m,cim:t,materialOverrides:s,colorLocked:t.colorLocked,effects:i,color:{r:255,g:255,b:255,a:1},height:y(c,o,"Separation",e,t.separation),scaleX:1,angle:y(c,o,"Rotation",e,(0,f.NA)(t.rotation)),offsetX:y(c,o,"OffsetX",e,(0,f.NA)(t.offsetX)),offsetY:y(c,o,"OffsetY",e,(0,f.NA)(t.offsetY))})}function st(t,i,o,n,e,l){const r=t.primitiveName,[s,c]=ut(n,r,i,null),h=(0,x.hP)(JSON.stringify(t)+c).toString();l.push({type:"fill",templateHash:h,materialHash:s?xt(h,o,n,e):h,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function lt(t,i,o,n,e,l,r,s){const c=t.primitiveName,h=(0,f.NO)(t.color),p=void 0!==t.width?t.width:4,g=O(t.capStyle),m=_(t.joinStyle),a=t.miterLimit,[M,L]=ut(n,c,i,null),b=(0,x.hP)(JSON.stringify(t)+L).toString();let C,X;if(i&&i instanceof Array&&i.length>0){const G=i[i.length-1];if("CIMGeometricEffectDashes"===G.type&&"NoConstraint"===G.lineDashEnding&&null===G.offsetAlongLine){const V=(i=[...i]).pop();C=V.dashTemplate,X=V.scaleDash}}l.push({type:"line",templateHash:b,materialHash:M?()=>b:b,cim:t,materialOverrides:null,isOutline:r,colorLocked:t.colorLocked,effects:i,color:y(c,o,"Color",e,h,at),width:y(c,o,"Width",e,p),cap:y(c,o,"CapStyle",e,g),join:y(c,o,"JoinStyle",e,m),miterLimit:y(c,o,"MiterLimit",e,a),referenceWidth:s,zOrder:Lt(t.name),dashTemplate:C,scaleDash:X})}function $(t,i,o,n,e,l,r,s){const c=(0,x.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),h=t.primitiveName,p=(0,f.NO)(t.tintColor),g=void 0!==t.width?t.width:4,m=O(t.capStyle),a=_(t.joinStyle),M=t.miterLimit,[L,b]=ut(n,h,i,null),C=(0,x.hP)(JSON.stringify(t)+b).toString();l.push({type:"line",templateHash:C,materialHash:L?()=>c:c,cim:t,materialOverrides:null,isOutline:r,colorLocked:t.colorLocked,effects:i,color:y(h,o,"TintColor",e,p,at),width:y(h,o,"Width",e,g),cap:y(h,o,"CapStyle",e,m),join:y(h,o,"JoinStyle",e,a),miterLimit:y(h,o,"MiterLimit",e,M),referenceWidth:s,zOrder:Lt(t.name),dashTemplate:null,scaleDash:!1,url:t.url})}function Y(t,i,o,n,e,l,r,s){const c=t.primitiveName,h=void 0!==t.width?t.width:4,p=O(t.capStyle),g=_(t.joinStyle),m=t.miterLimit,[a,M]=ut(n,c,i,null),L=(0,x.hP)(JSON.stringify(t)+M).toString();l.push({type:"line",templateHash:L,materialHash:a?xt(L,o,n,e):L,cim:t,materialOverrides:null,isOutline:r,colorLocked:t.colorLocked,effects:i,color:{r:128,g:128,b:128,a:1},width:y(c,o,"Width",e,h),cap:y(c,o,"CapStyle",e,p),join:y(c,o,"JoinStyle",e,g),miterLimit:y(c,o,"MiterLimit",e,m),referenceWidth:s,zOrder:Lt(t.name),dashTemplate:null,scaleDash:!1})}function j(t,i,o,n,e,l){const r=t.markerPlacement;if(!r||"CIMMarkerPlacementInsidePolygon"!==r.type)return!1;const s=r,c=["Rotation","OffsetX","OffsetY"],h=n.filter(C=>C.primitiveName!==t.primitiveName&&-1===c.indexOf(C.propertyName)),p="url"in t?t.url:null,[g,m]=ut(n,s.primitiveName,i,null),a=(0,x.hP)(JSON.stringify(t)+m).toString();let M=s.stepY,L=null,b=1;return r.shiftOddRows&&(M*=2,L=function(C){return C?2*C:0},b=.5),l.push({type:"fill",templateHash:a,materialHash:g?xt(a,o,h,e):a,cim:t,materialOverrides:h,colorLocked:t.colorLocked,effects:i,color:{r:255,g:255,b:255,a:1},height:y(s.primitiveName,o,"StepY",e,M,L),scaleX:b,angle:y(s.primitiveName,o,"GridAngle",e,s.gridAngle),offsetX:y(s.primitiveName,o,"OffsetX",e,(0,f.NA)(s.offsetX)),offsetY:y(s.primitiveName,o,"OffsetY",e,(0,f.NA)(s.offsetY)),url:p}),!0}function Et(t,i,o,n,e,l,r,s,c){var h;const p=t.primitiveName,g=(0,f.NA)(t.size);let m=(0,f.NA)(t.scaleX);const a=(0,f.NA)(t.rotation),M=(0,f.NA)(t.offsetX),L=(0,f.NA)(t.offsetY),b=t.tintColor?(0,f.NO)(t.tintColor):{r:255,g:255,b:255,a:1},C=(0,x.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),X=Xt(t.markerPlacement,n,o,e),[G,V]=ut(n,p,i,X),tt=(0,x.hP)(JSON.stringify(t)+V).toString(),pt=null!=(h=t.anchorPoint)?h:{x:0,y:0};if("width"in t){const mt=t.width;let rt=1;const F=l.getResource(t.url);(0,q.pC)(F)&&(rt=F.width/F.height),m/=rt*(g/mt)}r.push({type:"marker",templateHash:tt,materialHash:G?()=>C:C,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:!1,alignment:s,size:y(p,o,"Size",e,g),scaleX:y(p,o,"ScaleX",e,m),rotation:y(p,o,"Rotation",e,a),offsetX:y(p,o,"OffsetX",e,M),offsetY:y(p,o,"OffsetY",e,L),color:y(p,o,"TintColor",e,b,at),anchorPoint:{x:pt.x,y:-pt.y},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:t.markerPlacement,url:t.url})}function Ut(t,i,o,n,e,l,r,s,c,h){const p=t.markerGraphics;if(!p)return;let g=0;if(t.scaleSymbolsProportionally){const a=t.frame;a&&(g=a.ymax-a.ymin)}const m=Xt(t.markerPlacement,n,o,e);for(const a of p)if(a){const M=a.symbol;if(!M)continue;switch(M.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":dt(t,i,m,a,n,o,e,l,r,s,c,g,h);break;case"CIMTextSymbol":gt(t,i,m,a,o,n,e,l,s,c,g)}}}function gt(t,i,o,n,e,l,r,s,c,h,p){v.E0.findApplicableOverrides(n,l,[]);const m=n.geometry;if(!("x"in m)||!("y"in m))return;const a=n.symbol,M=function w(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}(a),L=function E(t){let i="",o="";if(t){const n=t.toLowerCase();-1!==n.indexOf("italic")?i="italic":-1!==n.indexOf("oblique")&&(i="oblique"),-1!==n.indexOf("bold")?o="bold":-1!==n.indexOf("light")&&(o="lighter")}return{style:i,weight:o}}(a.fontStyleName),b=(0,u.BN)(a.fontFamilyName);a.font=It({family:b,decoration:M},L);const C=t.frame,X=m.x-.5*(C.xmin+C.xmax),G=m.y-.5*(C.ymin+C.ymax),V=t.size/p,tt=t.primitiveName,pt=(0,f.NA)(a.height)*V,mt=(0,f.NA)(a.angle),rt=(0,f.NA)(t.offsetX)+((0,f.NA)(a.offsetX)+X)*V,F=(0,f.NA)(t.offsetY)+((0,f.NA)(a.offsetY)+G)*V,kt=(0,f.NO)(v.B$.getFillColor(a));let vt=(0,f.NO)(v.B$.getStrokeColor(a)),Mt=v.B$.getStrokeWidth(a);Mt||(vt=(0,f.NO)(v.B$.getFillColor(a.haloSymbol)),Mt=a.haloSize*V);const[wt,Dt]=ut(l,tt,i,o),St=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),yt=(0,x.hP)(JSON.stringify(n)+St+Dt).toString();let it=y(n.primitiveName,e,"TextString",r,n.textString,f.X3,a.textCase);if(null==it)return;const{fontStyleName:Pt}=a,Ct=b+(Pt?"-"+Pt.toLowerCase():"-regular"),et=Ct;"string"==typeof it&&it.indexOf("[")>-1&&a.fieldMap&&(it=(0,f.Qs)(a.fieldMap,it,a.textCase)),s.push({type:"text",templateHash:yt,materialHash:wt||"function"==typeof it||it.match(/\[(.*?)\]/)?(zt,Tt,Bt)=>et+"-"+(0,f.hf)(it,zt,Tt,Bt):et+"-"+(0,x.hP)(it),cim:a,materialOverrides:null,colorLocked:t.colorLocked,effects:i,alignment:c,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,fontName:Ct,decoration:M,weight:y(tt,e,"Weight",r,L.weight),style:y(tt,e,"Size",r,L.style),size:y(tt,e,"Size",r,pt),angle:y(tt,e,"Rotation",r,mt),offsetX:y(tt,e,"OffsetX",r,rt),offsetY:y(tt,e,"OffsetY",r,F),horizontalAlignment:I(a.horizontalAlignment),verticalAlignment:S(a.verticalAlignment),text:it,color:kt,outlineColor:vt,outlineSize:Mt,referenceSize:h,sizeRatio:1,markerPlacement:o})}function dt(t,i,o,n,e,l,r,s,c,h,p,g,m){const a=n.symbol,M=a.symbolLayers;if(!M)return;if(m)return void _t(t,i,o,n,l,e,r,s,c,h,p,g);let L=M.length;if(Yt(M))return void function Nt(t,i,o,n,e,l,r,s,c,h,p,g){const m=n.geometry,a=e[0],M=e[1],L=(0,U.bk)(m);if(!L)return;const[b,C,X]=(0,U.UV)(L,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),G={type:"sdf",geom:m,asFill:!0},V=t.primitiveName,tt=(0,f.NA)(t.size),pt=(0,f.NA)(t.rotation),mt=(0,f.NA)(t.offsetX),rt=(0,f.NA)(t.offsetY),F=M.path,kt=M.primitiveName,vt=a.primitiveName,Mt=(0,f.NO)(v.B$.getFillColor(M)),wt=(0,f.NO)(v.B$.getStrokeColor(a)),Dt=v.B$.getStrokeWidth(a);let St=!1,yt="";for(const et of l)et.primitiveName!==kt&&et.primitiveName!==vt&&et.primitiveName!==V||(void 0!==et.value?yt+=`-${et.primitiveName}-${et.propertyName}-${JSON.stringify(et.value)}`:et.valueExpressionInfo&&(St=!0));const it=JSON.stringify(Rt(It({},t),{markerGraphics:null})),Pt=(0,x.hP)(JSON.stringify(G)+F).toString(),Ct={type:"marker",templateHash:(0,x.hP)(JSON.stringify(n)+JSON.stringify(M)+JSON.stringify(a)+it+yt).toString(),materialHash:St?()=>Pt:Pt,cim:G,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:C,y:X},isAbsoluteAnchorPoint:!1,size:y(t.primitiveName,r,"Size",s,tt),rotation:y(t.primitiveName,r,"Rotation",s,pt),offsetX:y(t.primitiveName,r,"OffsetX",s,mt),offsetY:y(t.primitiveName,r,"OffsetY",s,rt),scaleX:1,frameHeight:g,rotateClockwise:t.rotateClockwise,referenceSize:p,sizeRatio:b,color:y(kt,r,"Color",s,Mt,at),outlineColor:y(vt,r,"Color",s,wt,at),outlineWidth:y(vt,r,"Width",s,Dt),markerPlacement:o,path:F};c.push(Ct)}(t,i,o,n,M,e,l,r,s,h,p,g);const b=A.j.applyEffects(a.effects,n.geometry,c.geometryEngine);if(b)for(;L--;){const X=M[L];if(X&&!1!==X.enable)switch(X.type){case"CIMSolidFill":case"CIMSolidStroke":{var C;const G=A.j.applyEffects(X.effects,b,c.geometryEngine),V=(0,U.bk)(G);if(!V)continue;const[tt,pt,mt]=(0,U.UV)(V,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),rt="CIMSolidFill"===X.type,F={type:"sdf",geom:G,asFill:rt},kt=t.primitiveName,vt=null!=(C=(0,f.NA)(t.size))?C:10,Mt=(0,f.NA)(t.rotation),wt=(0,f.NA)(t.offsetX),Dt=(0,f.NA)(t.offsetY),St=X.path,yt=X.primitiveName,it=(0,f.NO)(rt?v.B$.getFillColor(X):v.B$.getStrokeColor(X)),Pt=rt?{r:0,g:0,b:0,a:0}:(0,f.NO)(v.B$.getStrokeColor(X)),Ct=v.B$.getStrokeWidth(X);if(!rt&&!Ct)break;let et=!1,zt="";for(const bt of e)bt.primitiveName!==yt&&bt.primitiveName!==kt||(void 0!==bt.value?zt+=`-${bt.primitiveName}-${bt.propertyName}-${JSON.stringify(bt.value)}`:bt.valueExpressionInfo&&(et=!0));(0,q.pC)(i)&&"function"==typeof i&&(et=!0);const Tt=JSON.stringify(Rt(It({},t),{markerGraphics:null})),Bt=(0,x.hP)(JSON.stringify(F)+St).toString(),Kt={type:"marker",templateHash:(0,x.hP)(JSON.stringify(n)+JSON.stringify(X)+Tt+zt).toString(),materialHash:et?()=>Bt:Bt,cim:F,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:pt,y:mt},isAbsoluteAnchorPoint:!1,size:y(t.primitiveName,l,"Size",r,vt),rotation:y(t.primitiveName,l,"Rotation",r,Mt),offsetX:y(t.primitiveName,l,"OffsetX",r,wt),offsetY:y(t.primitiveName,l,"OffsetY",r,Dt),scaleX:1,frameHeight:g,rotateClockwise:t.rotateClockwise,referenceSize:p,sizeRatio:tt,color:y(yt,l,"Color",r,it,at),outlineColor:y(yt,l,"Color",r,Pt,at),outlineWidth:y(yt,l,"Width",r,Ct),markerPlacement:o,path:St};s.push(Kt);break}default:_t(t,i,o,n,l,e,r,s,c,h,p,g)}}}function _t(t,i,o,n,e,l,r,s,c,h,p,g){const m=function Ot(t,i){return{type:t.type,enable:!0,name:t.name,colorLocked:t.colorLocked,primitiveName:t.primitiveName,anchorPoint:t.anchorPoint,anchorPointUnits:t.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:t.rotateClockwise,rotation:0,size:t.size,billboardMode3D:t.billboardMode3D,depth3D:t.depth3D,frame:t.frame,markerGraphics:[i],scaleSymbolsProportionally:t.scaleSymbolsProportionally,respectFrame:t.respectFrame,clippingPath:t.clippingPath}}(t,n);let a=[];const M=["Rotation","OffsetX","OffsetY"];a=l.filter(F=>F.primitiveName!==t.primitiveName||-1===M.indexOf(F.propertyName));let L="";for(const F of l)void 0!==F.value&&(L+=`-${F.primitiveName}-${F.propertyName}-${JSON.stringify(F.value)}`);const[b,C,X]=v.B$.getTextureAnchor(m,c),G=t.primitiveName,V=(0,f.NA)(t.rotation),tt=(0,f.NA)(t.offsetX),pt=(0,f.NA)(t.offsetY),mt=(0,x.hP)(JSON.stringify(m)+L).toString(),rt={type:"marker",templateHash:mt,materialHash:a.length>0||(0,q.pC)(i)&&"function"==typeof i?xt(mt,e,a,r):mt,cim:m,materialOverrides:a,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:b,y:C},isAbsoluteAnchorPoint:!1,size:t.size,rotation:y(G,e,"Rotation",r,V),offsetX:y(G,e,"OffsetX",r,tt),offsetY:y(G,e,"OffsetY",r,pt),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:g,rotateClockwise:t.rotateClockwise,referenceSize:p,sizeRatio:X/(0,ht.F2)(t.size),markerPlacement:o};s.push(rt)}function Lt(t){if(t&&0===t.indexOf("Level_")){const i=parseInt(t.substr(6),10);if(!isNaN(i))return i}return 0}function at(t){if(!t||0===t.length)return null;const i=new ct.Z(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function y(t,i,o,n,e,l,r){const s=i[t];if(s){const c=s[o];if("string"==typeof c||"number"==typeof c||c instanceof Array)return l?l.call(null,c,r):c;if(null!=c&&c instanceof P.mz)return(h,p,g)=>{let m=(0,Z.Z)(c,h,{$view:g},n.geometryType,p);return null!==m&&l&&(m=l.call(null,m,r)),null!==m?m:e}}return e}function jt(t,i,o,n){for(const l of i)if(l.valueExpressionInfo){const r=o[l.primitiveName]&&o[l.primitiveName][l.propertyName];r instanceof P.mz&&(l.fn=(s,c,h)=>(0,Z.Z)(r,s,{$view:h},n.geometryType,c))}const e=l=>l&&l.charAt(0).toLowerCase()+l.substr(1);return(l,r,s)=>{for(const p of i)p.fn&&(p.value=p.fn(l,r,s));const c=[];for(let p of t){var h;const g=null==(h=p)?void 0:h.primitiveName;if(g){let m=!1;for(const a of i)if(a.primitiveName===g){const M=e(a.propertyName);null!=a.value&&a.value!==p[M]&&(m||(p=(0,Q.d9)(p),m=!0),p[M]=a.value)}}c.push(p)}return c}}function Xt(t,i,o,n){const e=[];if(v.E0.findApplicableOverrides(t,i,e),0===e.length)return t;for(const r of e)if(r.valueExpressionInfo){const s=o[r.primitiveName]&&o[r.primitiveName][r.propertyName];s instanceof P.mz&&(r.fn=(c,h,p)=>(0,Z.Z)(s,c,{$view:p},n.geometryType,h))}const l=r=>r&&r.charAt(0).toLowerCase()+r.substr(1);return(r,s,c)=>{for(const g of e)g.fn&&(g.value=g.fn(r,s,c));const h=(0,Q.d9)(t),p=t.primitiveName;for(const g of e)if(g.primitiveName===p){const m=l(g.propertyName);null!=g.value&&g.value!==h[m]&&(h[m]=g.value)}return h}}function xt(t,i,o,n){for(const e of o)if(e.valueExpressionInfo){const l=i[e.primitiveName]&&i[e.primitiveName][e.propertyName];l instanceof P.mz&&(e.fn=(r,s,c)=>(0,Z.Z)(l,r,{$view:c},n.geometryType,s))}return(e,l,r)=>{for(const s of o)s.fn&&(s.value=s.fn(e,l,r));return(0,x.hP)(t+v.E0.buildOverrideKey(o)).toString()}}function Jt(t,i){if(!i||0===i.length)return t;const o=JSON.parse(JSON.stringify(t));return v.E0.applyOverrides(o,i),o}function ut(t,i,o,n){let e=!1,l="";for(const r of t)r.primitiveName===i&&(void 0!==r.value?l+=`-${r.primitiveName}-${r.propertyName}-${JSON.stringify(r.value)}`:r.valueExpressionInfo&&(e=!0));return(0,q.pC)(o)&&"function"==typeof o&&(e=!0),(0,q.pC)(n)&&"function"==typeof n&&(e=!0),[e,l]}function Wt(t,i,o){if(t&&i)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const n=t.symbolLayers;if(!n)return;for(const e of n)switch(Ft(e,i,o),e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&o.push(i.fetchResource(e.url,null));break;case"CIMVectorMarker":{const l=e.markerGraphics;if(!l)continue;for(const r of l)if(r){const s=r.symbol;s&&Wt(s,i,o)}}}}}}const Yt=t=>t&&2===t.length&&t[0].enable&&t[1].enable&&"CIMSolidStroke"===t[0].type&&"CIMSolidFill"===t[1].type&&!t[0].effects&&!t[1].effects;let At;function Ft(t,i,o){if(t.effects&&!(0,q.pC)(i.geometryEngine)){if(At)return void o.push(At);(0,f.Cc)(t.effects)&&(At=(0,f.RI)(),o.push(At),At.then(n=>i.geometryEngine=n))}}},73608:(ot,W,N)=>{N.d(W,{j:()=>ht});var nt=N(91179),ct=N(72283),Q=N(29214),ft=N(11004);class ht{static executeEffects(P,v,k){const U=(0,ct.GP)(v);let A=new Q.M(U);for(const Z of P){const u=(0,ft.h)(Z);u&&(A=u.execute(A,Z,1.3333333333333333,k))}return A}static next(P){const v=P.next();return(0,ct.wp)(v),v}static applyEffects(P,v,k){if(!P)return v;let U=new Q.M(v);for(const Z of P){const u=(0,ft.h)(Z);u&&(U=u.execute(U,Z,1,k))}let f,A=null;for(;f=U.next();)A?(0,nt.l9)(A)?(0,nt.l9)(f)&&A.paths.push(...f.paths):(0,nt.oU)(A)&&(0,nt.oU)(f)&&A.rings.push(...f.rings):A=f;return A}}},39236:(ot,W,N)=>{N.d(W,{Z:()=>ft});var nt=N(26584),ct=N(63290),Q=N(7848);function ft(P,v,k,U,f){const A=P.referencesGeometry()&&f?function ht(P,v,k){const{transform:U,hasZ:f,hasM:A}=k;q.has(v)||q.set(v,function x(P){const v={};switch(P){case"esriGeometryPoint":return(k,U,f,A)=>(0,Q.U1)(U,v,k,f,A);case"esriGeometryPolygon":return(k,U,f,A)=>(0,Q.Ie)(U,v,k,f,A);case"esriGeometryPolyline":return(k,U,f,A)=>(0,Q.G6)(U,v,k,f,A);case"esriGeometryMultipoint":return(k,U,f,A)=>(0,Q.J9)(U,v,k,f,A);default:return ct.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new nt.Z("mapview-arcade",`Unable to handle geometryType: ${P}`)),k=>k}}(v));const Z=q.get(v)(P.geometry,U,f,A);return Rt(It({},P),{geometry:Z})}(v,U,f):v,Z=P.repurposeFeature(A);try{return P.evaluate(Rt(It({},k),{$feature:Z}))}catch(u){return ct.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",u),null}}const q=new Map},21411:(ot,W,N)=>{function Q(P){const v=P.toLowerCase().split(" ").join("-");switch(v){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return v}}function ft(P){const v=function ht(P){if(!P.weight)return"";switch(P.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(P)+function x(P){if(!P.style)return"";switch(P.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(P);return Q(P.family)+(v.length>0?v:"-regular")}N.d(W,{BN:()=>Q,Yc:()=>ft})}}]);