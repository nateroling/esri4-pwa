"use strict";var ce=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,_e=(V,x,e)=>x in V?ce(V,x,{enumerable:!0,configurable:!0,writable:!0,value:e}):V[x]=e,X=(V,x)=>{for(var e in x||(x={}))he.call(x,e)&&_e(V,e,x[e]);if(ue)for(var e of ue(x))fe.call(x,e)&&_e(V,e,x[e]);return V},re=(V,x)=>de(V,pe(x));(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[8592],{7006:(V,x,e)=>{e.d(x,{A:()=>U,B:()=>R,C:()=>S,D:()=>W,E:()=>G,F:()=>K,G:()=>z,H:()=>F,I:()=>w,J:()=>Q,K:()=>H,a:()=>A,b:()=>g,c:()=>O,d:()=>_,e:()=>h,f:()=>a,g:()=>se,h:()=>M,i:()=>d,j:()=>E,k:()=>v,l:()=>m,m:()=>l,n:()=>p,o:()=>c,p:()=>P,q:()=>D,r:()=>s,s:()=>I,t:()=>o,u:()=>L,v:()=>b,w:()=>y,x:()=>N,y:()=>j,z:()=>C});var r=e(4918),i=e(15994);function h(f){return r.G.extendedSpatialReferenceInfo(f)}function O(f,T,B){return r.G.clip(i.N,f,T,B)}function A(f,T,B){return r.G.cut(i.N,f,T,B)}function g(f,T,B){return r.G.contains(i.N,f,T,B)}function _(f,T,B){return r.G.crosses(i.N,f,T,B)}function a(f,T,B,Z){return r.G.distance(i.N,f,T,B,Z)}function M(f,T,B){return r.G.equals(i.N,f,T,B)}function d(f,T,B){return r.G.intersects(i.N,f,T,B)}function o(f,T,B){return r.G.touches(i.N,f,T,B)}function y(f,T,B){return r.G.within(i.N,f,T,B)}function E(f,T,B){return r.G.disjoint(i.N,f,T,B)}function c(f,T,B){return r.G.overlaps(i.N,f,T,B)}function s(f,T,B,Z){return r.G.relate(i.N,f,T,B,Z)}function v(f,T){return r.G.isSimple(i.N,f,T)}function I(f,T){return r.G.simplify(i.N,f,T)}function m(f,T,B=!1){return r.G.convexHull(i.N,f,T,B)}function l(f,T,B){return r.G.difference(i.N,f,T,B)}function p(f,T,B){return r.G.symmetricDifference(i.N,f,T,B)}function P(f,T,B){return r.G.intersect(i.N,f,T,B)}function L(f,T,B=null){return r.G.union(i.N,f,T,B)}function D(f,T,B,Z,$,q,k){return r.G.offset(i.N,f,T,B,Z,$,q,k)}function b(f,T,B,Z,$=!1){return r.G.buffer(i.N,f,T,B,Z,$)}function N(f,T,B,Z,$,q,k){return r.G.geodesicBuffer(i.N,f,T,B,Z,$,q,k)}function j(f,T,B,Z=!0){return r.G.nearestCoordinate(i.N,f,T,B,Z)}function C(f,T,B){return r.G.nearestVertex(i.N,f,T,B)}function U(f,T,B,Z,$){return r.G.nearestVertices(i.N,f,T,B,Z,$)}function R(f,T,B,Z){if(null==T||null==Z)throw new Error("Illegal Argument Exception");const $=r.G.rotate(T,B,Z);return $.spatialReference=f,$}function S(f,T,B){if(null==T||null==B)throw new Error("Illegal Argument Exception");const Z=r.G.flipHorizontal(T,B);return Z.spatialReference=f,Z}function W(f,T,B){if(null==T||null==B)throw new Error("Illegal Argument Exception");const Z=r.G.flipVertical(T,B);return Z.spatialReference=f,Z}function G(f,T,B,Z,$){return r.G.generalize(i.N,f,T,B,Z,$)}function K(f,T,B,Z){return r.G.densify(i.N,f,T,B,Z)}function z(f,T,B,Z,$=0){return r.G.geodesicDensify(i.N,f,T,B,Z,$)}function F(f,T,B){return r.G.planarArea(i.N,f,T,B)}function w(f,T,B){return r.G.planarLength(i.N,f,T,B)}function Q(f,T,B,Z){return r.G.geodesicArea(i.N,f,T,B,Z)}function H(f,T,B,Z){return r.G.geodesicLength(i.N,f,T,B,Z)}const se=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:h,clip:O,cut:A,contains:g,crosses:_,distance:a,equals:M,intersects:d,touches:o,within:y,disjoint:E,overlaps:c,relate:s,isSimple:v,simplify:I,convexHull:m,difference:l,symmetricDifference:p,intersect:P,union:L,offset:D,buffer:b,geodesicBuffer:N,nearestCoordinate:j,nearestVertex:C,nearestVertices:U,rotate:R,flipHorizontal:S,flipVertical:W,generalize:G,densify:K,geodesicDensify:z,planarArea:F,planarLength:w,geodesicArea:Q,geodesicLength:H})},65389:(V,x,e)=>{e.d(x,{Z:()=>i});var r=e(62208);class i{constructor(O){this.size=0,this._start=0,this.maxSize=O,this._buffer=new Array(O)}get entries(){return this._buffer}enqueue(O){if(this.size===this.maxSize){const A=this._buffer[this._start];return this._buffer[this._start]=O,this._start=(this._start+1)%this.maxSize,A}return this._buffer[(this._start+this.size++)%this.maxSize]=O,null}dequeue(){if(0===this.size)return null;const O=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,O}peek(){return 0===this.size?null:this._buffer[this._start]}find(O){if(0===this.size)return null;for(const A of this._buffer)if((0,r.pC)(A)&&O(A))return A;return null}clear(O){let A=this.dequeue();for(;(0,r.pC)(A);)O&&O(A),A=this.dequeue()}}},77777:(V,x,e)=>{e.r(x),e.d(x,{hydratedAdapter:()=>g});var r=e(2004),i=e(72854),h=e(49672),O=e(37118),A=e(55214);const g={convertToGEGeometry:function _(E,c){if(null==c)return null;let s="cache"in c?c.cache._geVersion:void 0;return null==s&&(s=E.convertJSONToGeometry(c),"cache"in c&&(c.cache._geVersion=s)),s},exportPoint:function a(E,c,s){const v=E.hasZ(c),I=E.hasM(c),m=new h.Z({x:E.getPointX(c),y:E.getPointY(c),spatialReference:s});return v&&(m.z=E.getPointZ(c)),I&&(m.m=E.getPointM(c)),m.cache._geVersion=c,m},exportPolygon:function M(E,c,s){const v=new O.Z({rings:E.exportPaths(c),hasZ:E.hasZ(c),hasM:E.hasM(c),spatialReference:s});return v.cache._geVersion=c,v},exportPolyline:function d(E,c,s){const v=new A.Z({paths:E.exportPaths(c),hasZ:E.hasZ(c),hasM:E.hasM(c),spatialReference:s});return v.cache._geVersion=c,v},exportMultipoint:function o(E,c,s){const v=new i.Z({hasZ:E.hasZ(c),hasM:E.hasM(c),points:E.exportPoints(c),spatialReference:s});return v.cache._geVersion=c,v},exportExtent:function y(E,c,s){const v=E.hasZ(c),I=E.hasM(c),m=new r.Z({xmin:E.getXMin(c),ymin:E.getYMin(c),xmax:E.getXMax(c),ymax:E.getYMax(c),spatialReference:s});if(v){const l=E.getZExtent(c);m.zmin=l.vmin,m.zmax=l.vmax}if(I){const l=E.getMExtent(c);m.mmin=l.vmin,m.mmax=l.vmax}return m.cache._geVersion=c,m}}},32825:(V,x,e)=>{e.r(x),e.d(x,{buffer:()=>h.v,clip:()=>h.c,contains:()=>h.b,convexHull:()=>h.l,crosses:()=>h.d,cut:()=>h.a,densify:()=>h.F,difference:()=>h.m,disjoint:()=>h.j,distance:()=>h.f,equals:()=>h.h,extendedSpatialReferenceInfo:()=>h.e,flipHorizontal:()=>h.C,flipVertical:()=>h.D,generalize:()=>h.E,geodesicArea:()=>h.J,geodesicBuffer:()=>h.x,geodesicDensify:()=>h.G,geodesicLength:()=>h.K,intersect:()=>h.p,intersects:()=>h.i,isSimple:()=>h.k,nearestCoordinate:()=>h.y,nearestVertex:()=>h.z,nearestVertices:()=>h.A,offset:()=>h.q,overlaps:()=>h.o,planarArea:()=>h.H,planarLength:()=>h.I,relate:()=>h.r,rotate:()=>h.B,simplify:()=>h.s,symmetricDifference:()=>h.n,touches:()=>h.t,union:()=>h.u,within:()=>h.w}),e(4918),e(15994);var h=e(7006)},13757:(V,x,e)=>{e.d(x,{d:()=>i});var r=e(21286);function i(_,a,M){var d;const o=_.byteLength/(4*a),y=new Uint32Array(_,0,o*a);let E=new Uint32Array(o);const c=null!=(d=null==M?void 0:M.minReduction)?d:0,s=(null==M?void 0:M.originalIndices)||null,v=s?s.length:0,I=(null==M?void 0:M.componentOffsets)||null;let m=0;if(I)for(let R=0;R<I.length-1;R++){const S=I[R+1]-I[R];S>m&&(m=S)}else m=o;const l=Math.floor(1.1*m)+1;(null==g||g.length<2*l)&&(g=new Uint32Array((0,r.Sf)(2*l)));for(let R=0;R<2*l;R++)g[R]=0;let p=0;const P=!!I&&!!s,L=P?v:o,D=P?new Uint32Array(v):null,b=1.96;let N=0!==c?Math.ceil(4*b*b/(c*c)*c*(1-c)):L,j=1,C=I?I[1]:L;for(let R=0;R<L;R++){if(R===N){const F=1-p/R;if(F+b*Math.sqrt(F*(1-F)/R)<c)return null;N*=2}if(R===C){for(let F=0;F<2*l;F++)g[F]=0;if(s)for(let F=I[j-1];F<I[j];F++)D[F]=E[s[F]];C=I[++j]}const S=P?s[R]:R,W=S*a,G=A(y,W,a);let K=G%l,z=p;for(;0!==g[2*K+1];){if(g[2*K]===G){const F=g[2*K+1]-1;if(h(y,W,F*a,a)){z=E[F];break}}K++,K>=l&&(K-=l)}z===p&&(g[2*K]=G,g[2*K+1]=S+1,p++),E[S]=z}if(0!==c&&1-p/o<c)return null;if(P){for(let R=I[j-1];R<D.length;R++)D[R]=E[s[R]];E=D}const U=new Uint32Array(a*p);p=0;for(let R=0;R<L;R++)E[R]===p&&(O(y,(P?s[R]:R)*a,U,p*a,a),p++);if(s&&!P){const R=new Uint32Array(v);for(let S=0;S<R.length;S++)R[S]=E[s[S]];E=R}return{buffer:U.buffer,indices:E,uniqueCount:p}}function h(_,a,M,d){for(let o=0;o<d;o++)if(_[a+o]!==_[M+o])return!1;return!0}function O(_,a,M,d,o){for(let y=0;y<o;y++)M[d+y]=_[a+y]}function A(_,a,M){let d=0;for(let o=0;o<M;o++)d=_[a+o]+d|0,d=d+(d<<11)+(d>>>2)|0;return d>>>0}let g=null},48887:(V,x,e)=>{e.r(x),e.d(x,{default:()=>se});var r=e(15861),i=e(17626),h=e(84792),O=e(97478),A=e(26584),g=e(80542),_=e(47877),a=e(62208),M=e(99959),d=e(10699),o=e(77712),c=(e(85931),e(8314),e(90912)),s=e(68653),v=e(76898),I=e(99433),m=e(31283),l=e(2004),p=e(83137),P=e(63602),L=e(50085),D=e(19027),b=e(65088),N=e(552),j=e(50107),C=e(49286),U=e(6647),R=e(30346),S=e(99555),W=e(66120),G=e(97941),K=e(13812),z=e(14772),F=e(39058),w=e(13410),Q=e(5676);let H=class extends((0,N.h)((0,G.n)((0,S.M)((0,W.x)((0,D.O)((0,b.Y)((0,C.q)((0,U.I)((0,M.R)((0,R.Q)((0,L.V)((0,j.N)((0,g.p)(P.Z)))))))))))))){constructor(...f){super(...f),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(f,T){return"string"==typeof f?X({url:f},T):f}load(f){const T=(0,a.pC)(f)?f.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},f).catch(d.r9).then(()=>this._fetchService(T))),Promise.resolve(this)}readImageFormat(f,T){const B=T.supportedImageFormatTypes;return B&&B.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(f,T,B,Z){if(!this.loaded||!f)return;const $=f.slice().reverse().flatten(({sublayers:J})=>J&&J.toArray().reverse()).toArray();let q=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const J=(0,m.M9)(Z.origin);if(J===m.s3.PORTAL_ITEM){const Y=this.createSublayersForOrigin("service").sublayers;q=(0,w.QV)($,Y,m.s3.SERVICE)}else if(J>m.s3.PORTAL_ITEM){const Y=this.createSublayersForOrigin("portal-item");q=(0,w.QV)($,Y.sublayers,(0,m.M9)(Y.origin))}}const k=[],ne=X({writeSublayerStructure:q},Z);let oe=q;$.forEach(J=>{const Y=J.write({},ne);k.push(Y),oe=oe||"user"===J.originOf("visible")}),k.some(J=>Object.keys(J).length>1)&&(T.layers=k),oe&&(T.visibleLayers=$.filter(J=>J.visible).map(J=>J.id))}createExportImageParameters(f,T,B,Z){const $=Z&&Z.pixelRatio||1;f&&this.version>=10&&(f=f.clone().shiftCentralMeridian());const q=new z.R({layer:this,floors:null==Z?void 0:Z.floors,scale:(0,p.yZ)({extent:f,width:T})*$}),k=q.toJSON();q.destroy();const ne=!Z||!Z.rotation||this.version<10.3?{}:{rotation:-Z.rotation},oe=f&&f.spatialReference,J=oe.wkid||JSON.stringify(oe.toJSON());k.dpi*=$;const Y={};if(null!=Z&&Z.timeExtent){const{start:te,end:ee}=Z.timeExtent.toJSON();Y.time=te&&ee&&te===ee?""+te:`${null==te?"null":te},${null==ee?"null":ee}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(Y.time="null,null");return X(X(X({bbox:f&&f.xmin+","+f.ymin+","+f.xmax+","+f.ymax,bboxSR:J,imageSR:J,size:T+","+B},k),ne),Y)}fetchImage(f,T,B,Z){var $=this;return(0,r.Z)(function*(){var q;const k={responseType:"image",signal:null!=(q=null==Z?void 0:Z.signal)?q:null,query:re(X(X(re(X(X({},$.parsedUrl.query),$.createExportImageParameters(f,T,B,Z)),{f:"image"}),$.refreshParameters),$.customParameters),{token:$.apiKey})},ne=$.parsedUrl.path+"/export";return null==k.query.dynamicLayers||$.capabilities.exportMap.supportsDynamicLayers?(0,h.default)(ne,k).then(oe=>oe.data).catch(oe=>{throw(0,d.D_)(oe)?oe:new A.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${ne}`,{error:oe})}):Promise.reject(new A.Z("mapimagelayer:dynamiclayer-not-supported",`service ${$.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:k.query}))})()}fetchRecomputedExtents(f={}){var T=this;return(0,r.Z)(function*(){const B=re(X({},f),{query:re(X({returnUpdates:!0,f:"json"},T.customParameters),{token:T.apiKey})}),{data:Z}=yield(0,h.default)(T.url,B),{extent:$,fullExtent:q,timeExtent:k}=Z,ne=$||q;return{fullExtent:ne&&l.Z.fromJSON(ne),timeExtent:k&&O.Z.fromJSON({start:k[0],end:k[1]})}})()}loadAll(){return(0,_.G)(this,f=>{f(this.allSublayers)})}serviceSupportsSpatialReference(f){return(0,Q.D)(this,f)}_fetchService(f){var T=this;return(0,r.Z)(function*(){if(T.sourceJSON)return void T.read(T.sourceJSON,{origin:"service",url:T.parsedUrl});const{data:B,ssl:Z}=yield(0,h.default)(T.parsedUrl.path,{query:re(X(X({f:"json"},T.parsedUrl.query),T.customParameters),{token:T.apiKey}),signal:f});Z&&(T.url=T.url.replace(/^http:/i,"https:")),T.sourceJSON=B,T.read(B,{origin:"service",url:T.parsedUrl})})()}};(0,i._)([(0,o.Cb)({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"dpi",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"gdbVersion",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"imageFormat",void 0),(0,i._)([(0,s.r)("imageFormat",["supportedImageFormatTypes"])],H.prototype,"readImageFormat",null),(0,i._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],H.prototype,"imageMaxHeight",void 0),(0,i._)([(0,o.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],H.prototype,"imageMaxWidth",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"imageTransparency",void 0),(0,i._)([(0,o.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],H.prototype,"isReference",void 0),(0,i._)([(0,o.Cb)({json:{read:!1,write:!1}})],H.prototype,"labelsVisible",void 0),(0,i._)([(0,o.Cb)({type:["ArcGISMapServiceLayer"]})],H.prototype,"operationalLayerType",void 0),(0,i._)([(0,o.Cb)({json:{read:!1,write:!1}})],H.prototype,"popupEnabled",void 0),(0,i._)([(0,o.Cb)()],H.prototype,"sourceJSON",void 0),(0,i._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,i._)([(0,I.c)("sublayers",{layers:{type:[F.Z]},visibleLayers:{type:[c.z8]}})],H.prototype,"writeSublayers",null),(0,i._)([(0,o.Cb)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,i._)([(0,o.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],H.prototype,"type",void 0),(0,i._)([(0,o.Cb)(K.HQ)],H.prototype,"url",void 0),H=(0,i._)([(0,v.j)("esri.layers.MapImageLayer")],H);const se=H},28678:(V,x,e)=>{e.r(x),e.d(x,{default:()=>U});var r=e(17626),h=(e(29132),e(84792)),O=e(26584),A=e(99959),g=e(77275),_=e(21726),a=e(77712),y=(e(85931),e(8314),e(90912),e(68653)),E=e(76898),c=e(99433),s=e(63602),v=e(552),I=e(49286),m=e(6647),l=e(30346),p=e(99555),P=e(72258),L=e(2584),D=e(91309),b=e(2004),N=e(65234),j=e(49672);let C=class extends((0,v.h)((0,l.Q)((0,p.M)((0,I.q)((0,m.I)((0,A.R)(s.Z))))))){constructor(...R){super(...R),this.copyright="",this.fullExtent=new b.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,N.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=N.Z.WebMercator,this.subDomains=null,this.tileInfo=new L.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new j.Z({x:-20037508.342787,y:20037508.342787,spatialReference:N.Z.WebMercator}),spatialReference:N.Z.WebMercator,lods:[new P.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new P.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new P.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new P.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new P.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new P.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new P.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new P.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new P.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new P.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new P.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new P.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new P.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new P.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new P.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new P.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new P.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new P.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new P.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new P.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new P.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new P.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new P.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new P.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(R,S){return"string"==typeof R?X({urlTemplate:R},S):R}load(R){const S=this.loadFromPortal({supportedTypes:["WMTS"]},R).then(()=>{let W="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const G=new _.R9(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===G.authority.indexOf("{subDomain}")||(W="is missing 'subDomains' property")}else W="spatialReference must match tileInfo.spatialReference";else W="is missing the required 'urlTemplate' property value";if(W)throw new O.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${W}`)});return this.addResolvingPromise(S),Promise.resolve(this)}get levelValues(){const R=[];if(!this.tileInfo)return null;for(const S of this.tileInfo.lods)R[S.level]=S.levelValue||S.level;return R}readSpatialReference(R,S){return R||S.fullExtent&&S.fullExtent.spatialReference&&N.Z.fromJSON(S.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const R=[],{urlTemplate:S,subDomains:W}=this,G=new _.R9(S),K=G.scheme?G.scheme+"://":"//",z=K+G.authority+"/";if(-1===G.authority.indexOf("{subDomain}"))R.push(z);else if(W&&W.length>0&&G.authority.split(".").length>1)for(const F of W)R.push(K+G.authority.replace(/\{subDomain\}/gi,F)+"/");return R.map(F=>("/"!==F.charAt(F.length-1)&&(F+="/"),F))}get urlPath(){if(!this.urlTemplate)return null;const R=this.urlTemplate,S=new _.R9(R);return R.substring(((S.scheme?S.scheme+"://":"//")+S.authority+"/").length)}readUrlTemplate(R,S){return R||S.templateUrl}writeUrlTemplate(R,S){R&&(0,_.oC)(R)&&(R="https:"+R),R&&(R=R.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),R=(0,_.Fv)(R)),S.templateUrl=R}fetchTile(R,S,W,G={}){const{signal:K}=G,z=this.getTileUrl(R,S,W),F={responseType:"image",signal:K,query:X({},this.refreshParameters)};return(0,h.default)(z,F).then(w=>w.data)}getTileUrl(R,S,W){const G=this.levelValues[R];return this.tileServers[S%this.tileServers.length]+(0,g.gx)(this.urlPath,{level:G,z:G,col:W,x:W,row:S,y:S})}};(0,r._)([(0,a.Cb)({type:String,value:"",json:{write:!0}})],C.prototype,"copyright",void 0),(0,r._)([(0,a.Cb)({type:b.Z,json:{write:!0},nonNullable:!0})],C.prototype,"fullExtent",void 0),(0,r._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"legendEnabled",void 0),(0,r._)([(0,a.Cb)({type:["show","hide"]})],C.prototype,"listMode",void 0),(0,r._)([(0,a.Cb)()],C.prototype,"levelValues",null),(0,r._)([(0,a.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,"isReference",void 0),(0,r._)([(0,a.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],C.prototype,"operationalLayerType",void 0),(0,r._)([(0,a.Cb)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"popupEnabled",void 0),(0,r._)([(0,a.Cb)({type:N.Z})],C.prototype,"spatialReference",void 0),(0,r._)([(0,y.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],C.prototype,"readSpatialReference",null),(0,r._)([(0,a.Cb)({type:[String],json:{write:!0}})],C.prototype,"subDomains",void 0),(0,r._)([(0,a.Cb)({type:L.Z,json:{write:!0}})],C.prototype,"tileInfo",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],C.prototype,"tileServers",null),(0,r._)([(0,a.Cb)({json:{read:!1}})],C.prototype,"type",void 0),(0,r._)([(0,a.Cb)()],C.prototype,"urlPath",null),(0,r._)([(0,a.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],C.prototype,"urlTemplate",void 0),(0,r._)([(0,y.r)("urlTemplate",["urlTemplate","templateUrl"])],C.prototype,"readUrlTemplate",null),(0,r._)([(0,c.c)("urlTemplate",{templateUrl:{type:String}})],C.prototype,"writeUrlTemplate",null),(0,r._)([(0,a.Cb)({type:D.Z,json:{write:!0}})],C.prototype,"wmtsInfo",void 0),C=(0,r._)([(0,E.j)("esri.layers.WebTileLayer")],C);const U=C},1476:(V,x,e)=>{e.d(x,{S:()=>i,X:()=>r});const r=1;function i(h,O){let A=0;for(const _ of O){var g;const a=null==(g=_.attributes)?void 0:g[h];"number"==typeof a&&isFinite(a)&&(A=Math.max(A,a))}return A}},35775:(V,x,e)=>{e.d(x,{av:()=>g,d1:()=>a,b:()=>v,O0:()=>d,og:()=>E});var r=e(15861),i=e(37053),h=e(36630);class O{constructor(){this.code=null,this.description=null}}class A{constructor(l){this.error=new O,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=l}}function g(m){return new A(m)}class _{constructor(l){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=l}}function a(m){return new _(m)}const M=new Set;function d(m,l,p,P=!1,L){M.clear();for(const D in p){const b=m.get(D);if(!b)continue;const N=p[D],j=o(b,N);if(j!==N&&L&&L.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:b,originalValue:N,sanitizedValue:j}}),M.add(b.name),b&&(P||b.editable)){const C=(0,h.Qc)(b,j);if(C)return g((0,h.vP)(C,b,j));l[b.name]=j}}for(const D of m.requiredFields)if(!M.has(D.name))return g(`missing required field "${D.name}"`);return null}function o(m,l){let p=l;return"string"==typeof l&&(0,h.H7)(m)?p=parseFloat(l):null!=l&&(0,h.qN)(m)&&"string"!=typeof l&&(p=String(l)),(0,h.Pz)(p)}let y;function E(m,l){if(!m||!(0,i.JY)(l))return m;if("rings"in m||"paths"in m){if(!y)throw new TypeError("geometry engine not loaded");return y.simplify(l,m)}return m}function c(){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(function*(){return y||(y=yield Promise.all([e.e(4918),e.e(8592)]).then(e.bind(e,32825)),y)})).apply(this,arguments)}function v(m,l){return I.apply(this,arguments)}function I(){return(I=(0,r.Z)(function*(m,l){!(0,i.JY)(m)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||(yield c())})).apply(this,arguments)}},5143:(V,x,e)=>{e.d(x,{Z:()=>y});var r=e(17626),h=(e(29132),e(77712)),_=(e(85931),e(8314),e(90912),e(68653)),a=e(76898),M=e(51026),d=e(28930),o=e(65234);const y=E=>{let c=class extends E{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(s,v){return null!=v.minLOD&&null!=v.maxLOD?s:0}readMaxScale(s,v){return null!=v.minLOD&&null!=v.maxLOD?s:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(s,v){return v.capabilities&&v.capabilities.indexOf("Tilemap")>-1?new d.y({layer:this}):null}};return(0,r._)([(0,h.Cb)({json:{read:{source:"copyrightText"}}})],c.prototype,"copyright",void 0),(0,r._)([(0,h.Cb)()],c.prototype,"minScale",void 0),(0,r._)([(0,_.r)("service","minScale")],c.prototype,"readMinScale",null),(0,r._)([(0,h.Cb)()],c.prototype,"maxScale",void 0),(0,r._)([(0,_.r)("service","maxScale")],c.prototype,"readMaxScale",null),(0,r._)([(0,h.Cb)({type:o.Z})],c.prototype,"spatialReference",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],c.prototype,"supportsBlankTile",null),(0,r._)([(0,h.Cb)(M.h)],c.prototype,"tileInfo",void 0),(0,r._)([(0,h.Cb)()],c.prototype,"tilemapCache",void 0),(0,r._)([(0,_.r)("service","tilemapCache",["capabilities"])],c.prototype,"readTilemapCache",null),(0,r._)([(0,h.Cb)()],c.prototype,"version",void 0),c=(0,r._)([(0,a.j)("esri.layers.mixins.ArcGISCachedService")],c),c}},22825:(V,x,e)=>{e.d(x,{A:()=>i});const r=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function i(h){return r.some(([O,A])=>h>=O&&h<=A)}},14772:(V,x,e)=>{e.d(x,{R:()=>c});var r=e(17626),i=e(14517),h=e(80542),O=e(62208),A=e(77712),M=(e(85931),e(8314),e(90912),e(76898)),d=e(13812),o=e(13410),y=e(79530);const E={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let c=class extends((0,h.p)(i.Z)){constructor(s){super(s),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const s=this.visibleSublayers.map(v=>{const I=(0,y.ff)(this.floors,v);return v.toExportImageJSON(I)});return s.length?JSON.stringify(s):null}get hasDynamicLayers(){return this.layer&&(0,o.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(s){this._get("layer")!==s&&(this._set("layer",s),this.handles.remove("layer"),s&&this.handles.add([s.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),s.on("sublayer-update",v=>this.notifyChange(E[v.propertyName]))],"layer"))}get layers(){const s=this.visibleSublayers;return s?s.length?"show:"+s.map(v=>v.id).join(","):"show:-1":null}get layerDefs(){var s;const v=!(null==(s=this.floors)||!s.length),I=this.visibleSublayers.filter(m=>null!=m.definitionExpression||v&&null!=m.floorInfo);return I.length?JSON.stringify(I.reduce((m,l)=>{const p=(0,y.ff)(this.floors,l),P=(0,O.pC)(p)?(0,y.Hp)(p,l):l.definitionExpression;return m[l.id]=P,m},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const s=this.layer;return s&&(s.commitProperty("dpi"),s.commitProperty("imageFormat"),s.commitProperty("imageTransparency"),s.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const s=[];if(!this.layer)return s;const v=this.layer.sublayers,I=l=>{const p=this.scale;l.visible&&(0===p||(0===l.minScale||p<=l.minScale)&&(0===l.maxScale||p>=l.maxScale))&&(l.sublayers?l.sublayers.forEach(I):s.unshift(l))};v&&v.forEach(I);const m=this._get("visibleSublayers");return!m||m.length!==s.length||m.some((l,p)=>s[p]!==l)?s:m}toJSON(){const s=this.layer;let v={dpi:s.dpi,format:s.imageFormat,transparent:s.imageTransparency,gdbVersion:s.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?v.dynamicLayers=this.dynamicLayers:v=re(X({},v),{layers:this.layers,layerDefs:this.layerDefs}),v}};(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"dynamicLayers",null),(0,r._)([(0,A.Cb)()],c.prototype,"floors",void 0),(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"hasDynamicLayers",null),(0,r._)([(0,A.Cb)()],c.prototype,"layer",null),(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"layers",null),(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"layerDefs",null),(0,r._)([(0,A.Cb)({type:Number})],c.prototype,"scale",void 0),(0,r._)([(0,A.Cb)(d.qG)],c.prototype,"timeExtent",void 0),(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"version",null),(0,r._)([(0,A.Cb)({readOnly:!0})],c.prototype,"visibleSublayers",null),c=(0,r._)([(0,M.j)("esri.layers.mixins.ExportImageParameters")],c)},51920:(V,x,e)=>{e.d(x,{j:()=>d});var r=e(17626),i=e(14517),h=e(80542),O=e(77712),a=(e(85931),e(8314),e(90912),e(76898));const M={visible:"visibleSublayers"};let d=class extends((0,h.p)(i.Z)){constructor(o){super(o),this.scale=0}set layer(o){this._get("layer")!==o&&(this._set("layer",o),this.handles.remove("layer"),o&&this.handles.add([o.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),o.on("wms-sublayer-update",y=>this.notifyChange(M[y.propertyName]))],"layer"))}get layers(){const{visibleSublayers:o}=this;return o.filter(y=>y.name).map(y=>y.name).join(",")}get version(){this.commitProperty("layers");const o=this.layer;return o&&o.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:o,scale:y}=this,E=null==o?void 0:o.sublayers,c=[],s=v=>{const{minScale:I,maxScale:m,sublayers:l,visible:p}=v;p&&(0===y||(0===I||y<=I)&&(0===m||y>=m))&&(l?l.forEach(s):c.unshift(v))};return null==E||E.forEach(s),c}toJSON(){const{layer:o,layers:y}=this,{imageFormat:E,imageTransparency:c,version:s}=o;return{format:E,request:"GetMap",service:"WMS",styles:"",transparent:c?"TRUE":"FALSE",version:s,layers:y}}};(0,r._)([(0,O.Cb)()],d.prototype,"layer",null),(0,r._)([(0,O.Cb)({readOnly:!0})],d.prototype,"layers",null),(0,r._)([(0,O.Cb)({type:Number})],d.prototype,"scale",void 0),(0,r._)([(0,O.Cb)({readOnly:!0})],d.prototype,"version",null),(0,r._)([(0,O.Cb)({readOnly:!0})],d.prototype,"visibleSublayers",null),d=(0,r._)([(0,a.j)("esri.layers.support.ExportWMSImageParameters")],d)},74711:(V,x,e)=>{e.d(x,{W:()=>M});var r=e(15861),i=e(24263),h=e(84792),O=e(62208),A=e(10699),g=e(15382),_=e(84687),a=e(55463);class M{constructor(o,y,E,c){this.parsedUrl=o,this.portalItem=y,this.apiKey=E,this.signal=c,this.rootDocument=null;const s=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);s&&(this.urlParts={root:s[1],layerId:parseInt(s[2],10)})}fetch(){var o=this;return(0,r.Z)(function*(){var y;if(!o.urlParts)return null;const E=null!=(y=o.portalItem)?y:yield o._portalItemFromServiceItemId();if((0,O.Wi)(E))return o._loadFromUrl();const c=yield o._findAndLoadRelatedPortalItem(E);return(0,O.Wi)(c)?null:o._loadFeatureLayerFromPortalItem(c)})()}fetchPortalItem(){var o=this;return(0,r.Z)(function*(){var y;if(!o.urlParts)return null;const E=null!=(y=o.portalItem)?y:yield o._portalItemFromServiceItemId();return(0,O.Wi)(E)?null:o._findAndLoadRelatedPortalItem(E)})()}_fetchRootDocument(){var o=this;return(0,r.Z)(function*(){if((0,O.pC)(o.rootDocument))return o.rootDocument;if((0,O.Wi)(o.urlParts))return o.rootDocument={},{};const y={query:{f:"json",token:o.apiKey},responseType:"json",signal:o.signal},E=`${o.urlParts.root}/SceneServer`;try{const c=yield(0,h.default)(E,y);o.rootDocument=c.data}catch(c){o.rootDocument={}}return o.rootDocument})()}_fetchServiceOwningPortalUrl(){var o=this;return(0,r.Z)(function*(){var y;const E=null==(y=i.id)?void 0:y.findServerInfo(o.parsedUrl.path);if(null!=E&&E.owningSystemUrl)return E.owningSystemUrl;const c=o.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const s=(yield(0,h.default)(c,{query:{f:"json"},responseType:"json",signal:o.signal})).data.owningSystemUrl;if(s)return s}catch(s){(0,A.r9)(s)}return null})()}_findAndLoadRelatedPortalItem(o){var y=this;return(0,r.Z)(function*(){try{return(yield o.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:y.signal})).find(E=>"Feature Service"===E.type)||null}catch(E){return(0,A.r9)(E),null}})()}_loadFeatureLayerFromPortalItem(o){var y=this;return(0,r.Z)(function*(){yield o.load({signal:y.signal});const E=yield y._findMatchingAssociatedSublayerUrl(o.url);return new g.default({url:E,portalItem:o}).load({signal:y.signal})})()}_loadFromUrl(){var o=this;return(0,r.Z)(function*(){const y=yield o._findMatchingAssociatedSublayerUrl(`${o.urlParts.root}/FeatureServer`);return new g.default({url:y}).load({signal:o.signal})})()}_findMatchingAssociatedSublayerUrl(o){var y=this;return(0,r.Z)(function*(){const E=o.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),c={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:y.signal},s=y.urlParts.layerId,v=y._fetchRootDocument(),I=(0,h.default)(E,c),[m,l]=yield Promise.all([I,v]),p=l&&l.layers,P=m.data&&m.data.layers;if(!Array.isArray(P))throw new Error("expected layers array");if(Array.isArray(p)){for(let L=0;L<Math.min(p.length,P.length);L++)if(p[L].id===s)return`${E}/${P[L].id}`}else if(s<P.length)return`${E}/${P[s].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var o=this;return(0,r.Z)(function*(){const y=(yield o._fetchRootDocument()).serviceItemId;if(!y)return null;const E=new a.default({id:y,apiKey:o.apiKey}),c=yield o._fetchServiceOwningPortalUrl();(0,O.pC)(c)&&(E.portal=new _.Z({url:c}));try{return E.load({signal:o.signal})}catch(s){return(0,A.r9)(s),null}})()}}},35031:(V,x,e)=>{e.d(x,{H3:()=>m,QI:()=>y,U4:()=>M,Yh:()=>c});var r=e(17626),i=e(86810),h=e(77712),_=(e(85931),e(8314),e(90912),e(55342)),a=e(76898);let M=class extends i.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,r._)([(0,h.Cb)({type:Number})],M.prototype,"nodesPerPage",void 0),(0,r._)([(0,h.Cb)({type:Number})],M.prototype,"rootIndex",void 0),(0,r._)([(0,h.Cb)({type:String})],M.prototype,"lodSelectionMetricType",void 0),M=(0,r._)([(0,a.j)("esri.layer.support.I3SNodePageDefinition")],M);let d=class extends i.wq{constructor(){super(...arguments),this.factor=1}};(0,r._)([(0,h.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],d.prototype,"id",void 0),(0,r._)([(0,h.Cb)({type:Number})],d.prototype,"factor",void 0),d=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialTexture")],d);let o=class extends i.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,r._)([(0,h.Cb)({type:[Number]})],o.prototype,"baseColorFactor",void 0),(0,r._)([(0,h.Cb)({type:d})],o.prototype,"baseColorTexture",void 0),(0,r._)([(0,h.Cb)({type:d})],o.prototype,"metallicRoughnessTexture",void 0),(0,r._)([(0,h.Cb)({type:Number})],o.prototype,"metallicFactor",void 0),(0,r._)([(0,h.Cb)({type:Number})],o.prototype,"roughnessFactor",void 0),o=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],o);let y=class extends i.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,r._)([(0,_.J)({opaque:"opaque",mask:"mask",blend:"blend"})],y.prototype,"alphaMode",void 0),(0,r._)([(0,h.Cb)({type:Number})],y.prototype,"alphaCutoff",void 0),(0,r._)([(0,h.Cb)({type:Boolean})],y.prototype,"doubleSided",void 0),(0,r._)([(0,_.J)({none:"none",back:"back",front:"front"})],y.prototype,"cullFace",void 0),(0,r._)([(0,h.Cb)({type:d})],y.prototype,"normalTexture",void 0),(0,r._)([(0,h.Cb)({type:d})],y.prototype,"occlusionTexture",void 0),(0,r._)([(0,h.Cb)({type:d})],y.prototype,"emissiveTexture",void 0),(0,r._)([(0,h.Cb)({type:[Number]})],y.prototype,"emissiveFactor",void 0),(0,r._)([(0,h.Cb)({type:o})],y.prototype,"pbrMetallicRoughness",void 0),y=(0,r._)([(0,a.j)("esri.layer.support.I3SMaterialDefinition")],y);let E=class extends i.wq{};(0,r._)([(0,h.Cb)({type:String,json:{read:{source:["name","index"],reader:(l,p)=>null!=l?l:`${p.index}`}}})],E.prototype,"name",void 0),(0,r._)([(0,_.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],E.prototype,"format",void 0),E=(0,r._)([(0,a.j)("esri.layer.support.I3STextureFormat")],E);let c=class extends i.wq{constructor(){super(...arguments),this.atlas=!1}};(0,r._)([(0,h.Cb)({type:[E]})],c.prototype,"formats",void 0),(0,r._)([(0,h.Cb)({type:Boolean})],c.prototype,"atlas",void 0),c=(0,r._)([(0,a.j)("esri.layer.support.I3STextureSetDefinition")],c);let s=class extends i.wq{};(0,r._)([(0,_.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],s.prototype,"type",void 0),(0,r._)([(0,h.Cb)({type:Number})],s.prototype,"component",void 0),s=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryAttribute")],s);let v=class extends i.wq{};(0,r._)([(0,_.J)({draco:"draco"})],v.prototype,"encoding",void 0),(0,r._)([(0,h.Cb)({type:[String]})],v.prototype,"attributes",void 0),v=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryCompressedAttributes")],v);let I=class extends i.wq{constructor(){super(...arguments),this.offset=0}};(0,r._)([(0,h.Cb)({type:Number})],I.prototype,"offset",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"position",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"normal",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"uv0",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"color",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"uvRegion",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"featureId",void 0),(0,r._)([(0,h.Cb)({type:s})],I.prototype,"faceRange",void 0),(0,r._)([(0,h.Cb)({type:v})],I.prototype,"compressedAttributes",void 0),I=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryBuffer")],I);let m=class extends i.wq{};(0,r._)([(0,_.J)({triangle:"triangle"})],m.prototype,"topology",void 0),(0,r._)([(0,h.Cb)()],m.prototype,"geometryBuffers",void 0),m=(0,r._)([(0,a.j)("esri.layer.support.I3SGeometryDefinition")],m)},28930:(V,x,e)=>{e.d(x,{y:()=>j});var b,r=e(15861),i=e(17626),h=e(84792),O=e(14517),A=e(27306),g=e(26584),_=e(80542),a=e(63290),M=e(93961),d=e(77029),o=e(10699),y=e(32917),E=e(50618),c=e(21726),s=e(77712),v=e(85931),m=(e(8314),e(66656)),l=e(76898),p=e(58817);class P{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(U,R){if("unknown"!==this._allAvailability)return this._allAvailability;const S=(U-this.location.top)*this.location.width+(R-this.location.left),G=S>>3,K=this._tileAvailabilityBitSet;return G<0||G>K.length?"unknown":K[G]&1<<S%8?"available":"unavailable"}_updateFromData(U){let W=!0,G=!0;const K=Math.ceil(this.location.width*this.location.height/8),z=new Uint8Array(K);let F=0;for(let w=0;w<U.length;w++){const Q=w%8;U[w]?(G=!1,z[F]|=1<<Q):W=!1,7===Q&&++F}G?this._allAvailability="unavailable":W?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=z,this.byteSize+=z.length)}static fromDefinition(U,R){const S=U.service.request||h.default,{row:W,col:G,width:K,height:z}=U,F={query:{f:"json"}};return R=R?X(X({},F),R):F,S(function D(C){let U;if("vector-tile"===C.service.type)U=`${C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`;else{const S=C.service.tileServers;U=`${S&&S.length?S[C.row%S.length]:C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}const R=C.service.query;return R&&(U=`${U}?${R}`),U}(U),R).then(w=>w.data).catch(w=>{if(w&&w.details&&422===w.details.httpStatus)return{location:{top:W,left:G,width:K,height:z},valid:!0,data:(0,v.a9)(K*z,0)};throw w}).then(w=>{if(w.location&&(w.location.top!==W||w.location.left!==G||w.location.width!==K||w.location.height!==z))throw new g.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:w,definition:{top:W,left:G,width:K,height:z}});return P.fromJSON(w)})}static fromJSON(U){P._validateJSON(U);const R=new P;return R.location=Object.freeze((0,p.d9)(U.location)),R._updateFromData(U.data),Object.freeze(R)}static _validateJSON(U){if(!U||!U.location)throw new g.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===U.valid)throw new g.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!U.data)throw new g.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(U.data))throw new g.Z("tilemap:data-mismatch","Data must be an array of numbers");if(U.data.length!==U.location.width*U.location.height)throw new g.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function L(C){return`${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}const N=a.Z.getLogger("esri.layers.support.TilemapCache");let j=b=class extends((0,_.p)(O.Z)){constructor(C){super(C),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*A.Y8.MEGABYTES,this.request=h.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new M.Z(this.cacheByteSize),this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?","layer.customParameters?"],()=>this._initializeTilemapDefinition()),(0,y.YP)(()=>{var C,U;return null==(C=this.layer)||null==(U=C.tileInfo)?void 0:U.lods},C=>this._initializeAvailableLevels(C),y.tX)]),this._initializeTilemapDefinition()}castLevels(C){return C<=2?(N.error("Minimum levels for Tilemap is 3, but got ",C),3):C}get size(){return 1<<this.levels}fetchTilemap(C,U,R,S){if(!this._availableLevels[C])return Promise.reject(new g.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`));const W=this._tmpTilemapDefinition,G=this._tilemapFromCache(C,U,R,W);if(G)return Promise.resolve(G);const K=S&&S.signal;return S=re(X({},S),{signal:null}),new Promise((z,F)=>{(0,o.fu)(K,()=>F((0,o.zE)()));const w=L(W);let Q=this._pendingTilemapRequests[w];if(!Q){Q=P.fromDefinition(W,S).then(se=>(this._tilemapCache.put(w,se,se.byteSize),se));const H=()=>delete this._pendingTilemapRequests[w];this._pendingTilemapRequests[w]=Q,Q.then(H,H)}Q.then(z,F)})}getAvailability(C,U,R){if(!this._availableLevels[C])return"unavailable";const S=this._tilemapFromCache(C,U,R,this._tmpTilemapDefinition);return S?S.getAvailability(U,R):"unknown"}fetchAvailability(C,U,R,S){return this._availableLevels[C]?this.fetchTilemap(C,U,R,S).catch(W=>W).then(W=>{if(W instanceof P){const G=W.getAvailability(U,R);return"unavailable"===G?Promise.reject(new g.Z("tile-map:tile-unavailable","Tile is not available",{level:C,row:U,col:R})):G}if((0,o.D_)(W))throw W;return"unknown"}):Promise.reject(new g.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`))}fetchAvailabilityUpsample(C,U,R,S,W){S.level=C,S.row=U,S.col=R;const G=this.layer.tileInfo;G.updateTileInfo(S);const K=this.fetchAvailability(C,U,R,W).catch(z=>{if((0,o.D_)(z))throw z;if(G.upsampleTile(S))return this.fetchAvailabilityUpsample(S.level,S.row,S.col,S);throw z});return this._fetchAvailabilityUpsamplePrefetch(S.id,C,U,R,W,K),K}_fetchAvailabilityUpsamplePrefetch(C,U,R,S,W,G){var K=this;return(0,r.Z)(function*(){if(!K._prefetchingEnabled)return;const z=`prefetch-${C}`;if(K.handles.has(z))return;const F=new AbortController;G.then(()=>F.abort(),()=>F.abort());let w=!1;if(K.handles.add({remove(){w||(w=!0,F.abort())}},z),yield(0,E.MU)(10,F.signal).catch(()=>{}),w||(w=!0,K.handles.remove(z)),(0,o.Hc)(F))return;const H={id:C,level:U,row:R,col:S},se=re(X({},W),{signal:F.signal}),f=K.layer.tileInfo;for(let T=0;b._prefetches.length<b._maxPrefetch&&f.upsampleTile(H);++T){const B=K.fetchAvailability(H.level,H.row,H.col,se);b._prefetches.push(B);const Z=()=>{b._prefetches.removeUnordered(B)};B.then(Z,Z)}})()}_initializeTilemapDefinition(){var C;if(!this.layer.parsedUrl)return;const{parsedUrl:U,apiKey:R,customParameters:S}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:U.path,query:(0,c.B7)(re(X(X({},U.query),S),{token:null!=R?R:null==(C=U.query)?void 0:C.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(C,U,R,S){S.level=C,S.row=U-U%this.size,S.col=R-R%this.size;const W=L(S);return this._tilemapCache.get(W)}_initializeAvailableLevels(C){this._availableLevels={},C&&C.forEach(U=>this._availableLevels[U.level]=!0)}get test(){const C=this;return{get prefetchingEnabled(){return C._prefetchingEnabled},set prefetchingEnabled(U){C._prefetchingEnabled=U},hasTilemap:(U,R,S)=>!!C._tilemapFromCache(U,R,S,C._tmpTilemapDefinition)}}};j._maxPrefetch=4,j._prefetches=new d.Z({initialSize:b._maxPrefetch}),(0,i._)([(0,s.Cb)({constructOnly:!0,type:Number})],j.prototype,"levels",void 0),(0,i._)([(0,m.p)("levels")],j.prototype,"castLevels",null),(0,i._)([(0,s.Cb)({readOnly:!0,type:Number})],j.prototype,"size",null),(0,i._)([(0,s.Cb)({constructOnly:!0,type:Number})],j.prototype,"cacheByteSize",void 0),(0,i._)([(0,s.Cb)({constructOnly:!0})],j.prototype,"layer",void 0),(0,i._)([(0,s.Cb)({constructOnly:!0})],j.prototype,"request",void 0),j=b=(0,i._)([(0,l.j)("esri.layers.support.TilemapCache")],j)},91309:(V,x,e)=>{e.d(x,{Z:()=>M});var _,r=e(17626),i=e(86810),h=e(58817),O=e(77712),g=(e(90912),e(76898));let a=_=class extends i.wq{constructor(d){super(d)}clone(){return new _({customLayerParameters:(0,h.d9)(this.customLayerParameters),customParameters:(0,h.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,r._)([(0,O.Cb)({json:{type:Object,write:!0}})],a.prototype,"customLayerParameters",void 0),(0,r._)([(0,O.Cb)({json:{type:Object,write:!0}})],a.prototype,"customParameters",void 0),(0,r._)([(0,O.Cb)({type:String,json:{write:!0}})],a.prototype,"layerIdentifier",void 0),(0,r._)([(0,O.Cb)({type:String,json:{write:!0}})],a.prototype,"tileMatrixSet",void 0),(0,r._)([(0,O.Cb)({type:String,json:{write:!0}})],a.prototype,"url",void 0),a=_=(0,r._)([(0,g.j)("esri.layer.support.WMTSLayerInfo")],a);const M=a},59787:(V,x,e)=>{e.d(x,{C:()=>r});const r={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},98686:(V,x,e)=>{e.d(x,{lm:()=>L,CS:()=>s,Yu:()=>p,Cw:()=>c,j5:()=>v});var r=e(15861),i=e(59318),h=e(24263),O=e(73281),A=e(84792),g=e(58817),_=e(21726),a=e(65234),M=e(5548),d=e(32442),o=e(33474),y=e(17253);const E={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function c(D){const b=D.folders||[],N=b.slice(),j=new Map,C=new Map,U=new Map,R=new Map,S=new Map,W={esriGeometryPoint:C,esriGeometryPolyline:U,esriGeometryPolygon:R};(D.featureCollection&&D.featureCollection.layers||[]).forEach(K=>{const z=(0,g.d9)(K);z.featureSet.features=[];const F=K.featureSet.geometryType;j.set(F,z);const w=K.layerDefinition.objectIdField;"esriGeometryPoint"===F?I(C,w,K.featureSet.features):"esriGeometryPolyline"===F?I(U,w,K.featureSet.features):"esriGeometryPolygon"===F&&I(R,w,K.featureSet.features)}),D.groundOverlays&&D.groundOverlays.forEach(K=>{S.set(K.id,K)}),b.forEach(K=>{K.networkLinkIds.forEach(z=>{const F=function l(D,b,N){const j=function m(D,b){let N;return b.some(j=>j.id===D&&(N=j,!0)),N}(D,N);return j&&(j.parentFolderId=b,j.networkLink=j),j}(z,K.id,D.networkLinks);F&&N.push(F)})}),N.forEach(K=>{if(K.featureInfos){K.points=(0,g.d9)(j.get("esriGeometryPoint")),K.polylines=(0,g.d9)(j.get("esriGeometryPolyline")),K.polygons=(0,g.d9)(j.get("esriGeometryPolygon")),K.mapImages=[];for(const z of K.featureInfos)switch(z.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const F=W[z.type].get(z.id);F&&K[E[z.type]].featureSet.features.push(F);break}case"GroundOverlay":{const F=S.get(z.id);F&&K.mapImages.push(F);break}}K.fullExtent=L([K])}});const G=L(N);return{folders:b,sublayers:N,extent:G}}function s(D,b,N,j){const C=h.id&&h.id.findCredential(D);return D=(0,_.fl)(D,{token:C&&C.token}),(0,A.default)(i.Z.kmlServiceUrl,{query:{url:D,model:"simple",folders:"",refresh:0!==N||void 0,outSR:JSON.stringify(b)},responseType:"json",signal:j})}function v(D,b,N=null,j=[]){const C=[],U={},R=b.sublayers,S=b.folders.map(W=>W.id);return R.forEach(W=>{const G=new D;if(N?G.read(W,N):G.read(W),j.length&&S.indexOf(G.id)>-1&&(G.visible=-1!==j.indexOf(G.id)),U[W.id]=G,null!=W.parentFolderId&&-1!==W.parentFolderId){const K=U[W.parentFolderId];K.sublayers||(K.sublayers=[]),K.sublayers.unshift(G)}else C.unshift(G)}),C}function I(D,b,N){N.forEach(j=>{D.set(j.attributes[b],j)})}function p(D){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(D){const b=y.default.fromJSON(D.featureSet).features,j=(0,o.i)(D.layerDefinition.drawingInfo.renderer),C=O.Z.fromJSON(D.popupInfo),U=[];for(const R of b){const S=yield j.getSymbolAsync(R);R.symbol=S,R.popupTemplate=C,R.visible=!0,U.push(R)}return U})).apply(this,arguments)}function L(D){const b=(0,M.Ue)(M.Gv),N=(0,M.Ue)(M.Gv);for(const j of D){if(j.polygons&&j.polygons.featureSet&&j.polygons.featureSet.features)for(const C of j.polygons.featureSet.features)(0,d.Yg)(b,C.geometry),(0,M.TC)(N,b);if(j.polylines&&j.polylines.featureSet&&j.polylines.featureSet.features)for(const C of j.polylines.featureSet.features)(0,d.Yg)(b,C.geometry),(0,M.TC)(N,b);if(j.points&&j.points.featureSet&&j.points.featureSet.features)for(const C of j.points.featureSet.features)(0,d.Yg)(b,C.geometry),(0,M.TC)(N,b);if(j.mapImages)for(const C of j.mapImages)(0,d.Yg)(b,C.extent),(0,M.TC)(N,b)}return(0,M.fS)(N,M.Gv)?null:{xmin:N[0],ymin:N[1],zmin:N[2],xmax:N[3],ymax:N[4],zmax:N[5],spatialReference:a.Z.WGS84}}},61068:(V,x,e)=>{e.d(x,{OE:()=>y,Gc:()=>s,Qg:()=>E,Rq:()=>a,gX:()=>c,z2:()=>M,ET:()=>d,Vx:()=>I}),e(29132);var i=e(62208),O=e(28594),A=e(49672);const g=new Map,_=new class h{constructor(l=15e3,p=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=l,this._interval=Math.min(l,p)}decreaseRefCount(l,p){const P=l+"/"+p,L=this._cachedBlocks;if(L.has(P)){const D=L.get(P);return D.refCount--,D.refCount<=0&&(L.delete(P),D.controller&&D.controller.abort()),D.refCount}return 0}getBlock(l,p){const P=l+"/"+p,L=this._cachedBlocks;if(L.has(P)){const D=L.get(P);return D.ts=Date.now(),D.refCount++,L.delete(P),L.set(P,D),D.block}return null}putBlock(l,p,P,L=null){const D=this._cachedBlocks,b=l+"/"+p;if(D.has(b)){const N=D.get(b);N.ts=Date.now(),N.refCount++}else D.set(b,{block:P,ts:Date.now(),refCount:1,controller:L});this._trim(),this._updateTimer()}deleteBlock(l,p){const P=this._cachedBlocks,L=l+"/"+p;P.has(L)&&P.delete(L)}updateMaxSize(l){this._size=l,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const l=this._cachedBlocks;this._timer=setInterval(()=>{const p=Array.from(l),P=Date.now();for(let L=0;L<p.length&&p[L][1].ts<=P-this._duration;L++)l.delete(p[L][0]);0===l.size&&this._clearTimer()},this._interval)}_trim(){const l=this._cachedBlocks;if(-1===this._size||this._size>=l.size)return;const p=Array.from(l);for(let P=0;P<p.length-this._size;P++)l.delete(p[P][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function a(m,l){return null==l?m:`${m}?sliceId=${l}`}function M(m,l){const p={extent:null,rasterInfo:l,cache:new Map};if(g.has(m)){const P=g.get(m);return P.push(p),P.length-1}return g.set(m,[p]),0}function d(m,l){if(g.has(m)){const p=g.get(m);p[l]=null,p.some(P=>null!=P)||g.delete(m)}}function y(m,l,p){if(!g.has(m))return null==l?_.decreaseRefCount(m,p):0;const P=g.get(m);if(null==P[l])return _.decreaseRefCount(m,p);const L=P[l].cache;if(L.has(p)){const D=L.get(p);if(D.refCount--,0===D.refCount){L.delete(p);for(let b=0;b<P.length;b++)P[b]&&P[b].cache.has(p)&&P[b].cache.delete(p);D.controller&&D.controller.abort()}return D.refCount}return 0}function E(m,l,p){if(!g.has(m))return null==l?_.getBlock(m,p):null;const P=g.get(m);if(null==P[l]){for(let D=0;D<P.length;D++)if(P[D]&&P[D].cache.has(p)){const b=P[D].cache.get(p);return b.refCount++,b.block}return _.getBlock(m,p)}const L=P[l].cache;if(L.has(p)){const D=L.get(p);return D.refCount++,D.block}for(let D=0;D<P.length;D++)if(D!==l&&P[D]&&P[D]&&P[D].cache.has(p)){const b=P[D].cache.get(p);return b.refCount++,L.set(p,b),b.block}return null}function c(m,l,p,P,L=null){if(!g.has(m))return void(null==l&&_.putBlock(m,p,P,L));const D=g.get(m);if(null==D[l])return void _.putBlock(m,p,P,L);const b={refCount:1,block:P,isResolved:!1,isRejected:!1,controller:L};P.then(()=>b.isResolved=!0).catch(()=>b.isRejected=!0),D[l].cache.set(p,b)}function s(m,l,p){if(!g.has(m))return void(null==l&&_.deleteBlock(m,p));const P=g.get(m);null!=P[l]?P[l].cache.delete(p):_.deleteBlock(m,p)}function I(m,l,p,P,L,D,b=null){const N=function v(m,l){if(!g.has(m))return null;const p=g.get(m);return null==p[l]?null:p[l]}(m,l),j=N.extent,{cache:C,rasterInfo:U}=N;if(j&&j.xmin===p.xmin&&j.xmax===p.xmax&&j.ymin===p.ymin&&j.ymax===p.ymax)return;const R=p.clone().normalize(),{spatialReference:S,transform:W}=U,G=new Set;for(let K=0;K<R.length;K++){const z=R[K];if(z.xmax-z.xmin<=P||z.ymax-z.ymin<=P)continue;let F=(0,O.tB)(z,S,b);(0,i.pC)(W)&&(F=W.inverseTransform(F));const w=new A.Z({x:P,y:P,spatialReference:z.spatialReference});if(null==L&&!(L=(0,O.VO)(w,S,z,b)))return;const{pyramidLevel:Q,pyramidResolution:H,excessiveReading:se}=(0,O.kr)(L,U,D||"closest");if(se)return;const{storageInfo:f}=U,{origin:T}=f,B={x:Math.max(0,Math.floor((F.xmin-T.x)/H.x)),y:Math.max(0,Math.floor((T.y-F.ymax)/H.y))},Z=Math.ceil((F.xmax-F.xmin)/H.x-.1),$=Math.ceil((F.ymax-F.ymin)/H.y-.1),q=Q>0?f.pyramidBlockWidth:f.blockWidth,k=Q>0?f.pyramidBlockHeight:f.blockHeight,ne=1,oe=Math.max(0,Math.floor(B.x/q)-ne),J=Math.max(0,Math.floor(B.y/k)-ne),Y=Math.floor((B.x+Z-1)/q)+ne,te=Math.floor((B.y+$-1)/k)+ne;for(let ee=J;ee<=te;ee++)for(let ie=oe;ie<=Y;ie++)G.add(`${Q}/${ee}/${ie}`)}C.forEach((K,z)=>{if(!G.has(z)){const F=C.get(z);(null==F||F.isResolved||F.isRejected)&&C.delete(z)}}),N.extent={xmin:p.xmin,ymin:p.ymin,xmax:p.xmax,ymax:p.ymax}}},96504:(V,x,e)=>{e.d(x,{Z:()=>M});var r=e(17626),i=e(86810),h=e(77712),_=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.wq{get affectsPixelSize(){return!1}forwardTransform(d){return d}inverseTransform(d){return d}};(0,r._)([(0,h.Cb)()],a.prototype,"affectsPixelSize",null),(0,r._)([(0,h.Cb)({json:{write:!0}})],a.prototype,"spatialReference",void 0),a=(0,r._)([(0,_.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],a);const M=a},76671:(V,x,e)=>{e.d(x,{Z:()=>d});var r=e(17626),i=e(77712),g=(e(85931),e(8314),e(90912),e(55342)),_=e(76898),a=e(96504);let M=class extends a.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(o){return"point"===(o=o.clone()).type?(o.x>180+this.tolerance&&(o.x-=360),o):(o.xmin>=180-this.tolerance?(o.xmax-=360,o.xmin-=360):o.xmax>180+this.tolerance&&(o.xmin=-180,o.xmax=180),o)}inverseTransform(o){return"point"===(o=o.clone()).type?(o.x<-this.tolerance&&(o.x+=360),o):(o.xmin<-this.tolerance&&(o.xmin+=360,o.xmax+=360),o)}};(0,r._)([(0,g.J)({GCSShiftXform:"gcs-shift"})],M.prototype,"type",void 0),(0,r._)([(0,i.Cb)()],M.prototype,"tolerance",void 0),M=(0,r._)([(0,_.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],M);const d=M},85374:(V,x,e)=>{e.d(x,{Z:()=>m});var r=e(17626),h=(e(29132),e(77712)),_=(e(85931),e(8314),e(90912),e(55342)),a=e(68653),M=e(76898),d=e(99433),o=e(96504),y=e(49672),E=e(2004);function c(l,p,P){const{x:L,y:D}=p;if(P<2)return{x:l[0]+L*l[2]+D*l[4],y:l[1]+L*l[3]+D*l[5]};if(2===P){const W=L*L,G=D*D,K=L*D;return{x:l[0]+L*l[2]+D*l[4]+W*l[6]+K*l[8]+G*l[10],y:l[1]+L*l[3]+D*l[5]+W*l[7]+K*l[9]+G*l[11]}}const b=L*L,N=D*D,j=L*D,C=b*L,U=b*D,R=L*N,S=D*N;return{x:l[0]+L*l[2]+D*l[4]+b*l[6]+j*l[8]+N*l[10]+C*l[12]+U*l[14]+R*l[16]+S*l[18],y:l[1]+L*l[3]+D*l[5]+b*l[7]+j*l[9]+N*l[11]+C*l[13]+U*l[15]+R*l[17]+S*l[19]}}function s(l,p,P){const{xmin:L,ymin:D,xmax:b,ymax:N,spatialReference:j}=p;let C=[];if(P<2)C.push({x:L,y:N}),C.push({x:b,y:N}),C.push({x:L,y:D}),C.push({x:b,y:D});else{let S=10;for(let W=0;W<S;W++)C.push({x:L,y:D+(N-D)*W/(S-1)}),C.push({x:b,y:D+(N-D)*W/(S-1)});S=8;for(let W=1;W<=S;W++)C.push({x:L+(b-L)*W/S,y:D}),C.push({x:L+(b-L)*W/S,y:N})}C=C.map(S=>c(l,S,P));const U=C.map(S=>S.x),R=C.map(S=>S.y);return new E.Z({xmin:Math.min.apply(null,U),xmax:Math.max.apply(null,U),ymin:Math.min.apply(null,R),ymax:Math.max.apply(null,R),spatialReference:j})}let I=class extends o.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(l,p){const{coeffX:P,coeffY:L}=p;if(null==P||!P.length||null==L||!L.length||P.length!==L.length)return null;const D=[];for(let b=0;b<P.length;b++)D.push(P[b]),D.push(L[b]);return D}writeForwardCoefficients(l,p,P){const L=[],D=[];for(let b=0;b<(null==l?void 0:l.length);b++)b%2==0?L.push(l[b]):D.push(l[b]);p.coeffX=L,p.coeffY=D}get inverseCoefficients(){let l=this._get("inverseCoefficients");const p=this._get("forwardCoefficients");return!l&&p&&this.polynomialOrder<2&&(l=function v(l){const[p,P,L,D,b,N]=l,j=L*N-b*D,C=b*D-L*N;return[(b*P-p*N)/j,(L*P-p*D)/C,N/j,D/C,-b/j,-L/C]}(p)),l}set inverseCoefficients(l){this._set("inverseCoefficients",l)}readInverseCoefficients(l,p){const{inverseCoeffX:P,inverseCoeffY:L}=p;if(null==P||!P.length||null==L||!L.length||P.length!==L.length)return null;const D=[];for(let b=0;b<P.length;b++)D.push(P[b]),D.push(L[b]);return D}writeInverseCoefficients(l,p,P){const L=[],D=[];for(let b=0;b<(null==l?void 0:l.length);b++)b%2==0?L.push(l[b]):D.push(l[b]);p.inverseCoeffX=L,p.inverseCoeffY=D}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(l){if("point"===l.type){const p=c(this.forwardCoefficients,l,this.polynomialOrder);return new y.Z({x:p.x,y:p.y,spatialReference:l.spatialReference})}return s(this.forwardCoefficients,l,this.polynomialOrder)}inverseTransform(l){if("point"===l.type){const p=c(this.inverseCoefficients,l,this.polynomialOrder);return new y.Z({x:p.x,y:p.y,spatialReference:l.spatialReference})}return s(this.inverseCoefficients,l,this.polynomialOrder)}};(0,r._)([(0,h.Cb)({json:{write:!0}})],I.prototype,"polynomialOrder",void 0),(0,r._)([(0,h.Cb)()],I.prototype,"forwardCoefficients",void 0),(0,r._)([(0,a.r)("forwardCoefficients",["coeffX","coeffY"])],I.prototype,"readForwardCoefficients",null),(0,r._)([(0,d.c)("forwardCoefficients")],I.prototype,"writeForwardCoefficients",null),(0,r._)([(0,h.Cb)({json:{write:!0}})],I.prototype,"inverseCoefficients",null),(0,r._)([(0,a.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],I.prototype,"readInverseCoefficients",null),(0,r._)([(0,d.c)("inverseCoefficients")],I.prototype,"writeInverseCoefficients",null),(0,r._)([(0,h.Cb)()],I.prototype,"affectsPixelSize",null),(0,r._)([(0,_.J)({PolynomialXform:"polynomial"})],I.prototype,"type",void 0),I=(0,r._)([(0,M.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],I);const m=I},46572:(V,x,e)=>{e.d(x,{j:()=>v,c:()=>I});var r=e(76671),i=e(17626),a=(e(63290),e(90912),e(85931),e(8314),e(82255),e(55342)),M=e(76898),d=e(96504);let o=class extends d.Z{constructor(){super(...arguments),this.type="identity"}};(0,i._)([(0,a.J)({IdentityXform:"identity"})],o.prototype,"type",void 0),o=(0,i._)([(0,M.j)("esri.layers.support.rasterTransforms.IdentityTransform")],o);const y=o;var E=e(85374);const c={GCSShiftXform:r.Z,IdentityXform:y,PolynomialXform:E.Z},s=Object.keys(c);function v(m){return!m||s.includes(null==m?void 0:m.type)}function I(m){if(!(null==m?void 0:m.type))return null;const l=c[null==m?void 0:m.type];if(l){const p=new l;return p.read(m),p}return null}},51026:(V,x,e)=>{e.d(x,{d:()=>h,h:()=>i});var r=e(2584);const i={type:r.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:h}}}}};function h(O,A,g,_){if(!O)return null;const{minScale:a,maxScale:M,minLOD:d,maxLOD:o}=A;if(null!=d&&null!=o)return r.Z.fromJSON(_&&_.ignoreMinMaxLOD?O:re(X({},O),{lods:O.lods.filter(({level:y})=>null!=y&&y>=d&&y<=o)}));if(0!==a&&0!==M){const y=s=>Math.round(1e4*s)/1e4,E=a?y(a):1/0,c=M?y(M):-1/0;return r.Z.fromJSON(re(X({},O),{lods:O.lods.filter(s=>{const v=y(s.scale);return v<=E&&v>=c})}))}return r.Z.fromJSON(O)}},53776:(V,x,e)=>{e.d(x,{Z:()=>v});var o,r=e(17626),i=e(58817),h=e(77712),O=e(90912),A=e(55342),g=e(76898),_=e(80573),a=e(10914),M=e(91558),d=e(86810);let y=o=class extends d.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new o({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,i.d9)(this.color)})}};(0,r._)([(0,h.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,r._)([(0,h.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,r._)([(0,h.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],y.prototype,"minValue",void 0),(0,r._)([(0,h.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],y.prototype,"maxValue",void 0),(0,r._)([(0,h.Cb)({type:M.Z,json:{type:[O.z8],write:!0}})],y.prototype,"color",void 0),y=o=(0,r._)([(0,g.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],y);const E=y;var c;let s=c=class extends _.Z{constructor(I){super(I),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new c(re(X({},this.cloneProperties()),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,i.d9)(this.colorClassBreakInfos),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,r._)([(0,A.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],s.prototype,"type",void 0),(0,r._)([(0,h.Cb)({json:{write:!0},type:String})],s.prototype,"field",void 0),(0,r._)([(0,h.Cb)({type:a.Z,json:{write:!0}})],s.prototype,"legendOptions",void 0),(0,r._)([(0,h.Cb)({type:_.Z.fieldTransformTypeKebabDict.apiValues,json:{type:_.Z.fieldTransformTypeKebabDict.jsonValues,read:_.Z.fieldTransformTypeKebabDict.read,write:_.Z.fieldTransformTypeKebabDict.write}})],s.prototype,"fieldTransformType",void 0),(0,r._)([(0,h.Cb)({type:[E],json:{write:!0}})],s.prototype,"colorClassBreakInfos",void 0),s=c=(0,r._)([(0,g.j)("esri.renderers.PointCloudClassBreaksRenderer")],s);const v=s},80573:(V,x,e)=>{e.d(x,{Z:()=>j});var d,r=e(17626),i=e(2076),h=e(86810),O=e(58817),A=e(77712),_=(e(90912),e(76898));e(85931),e(8314);let o=d=class extends h.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new d({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,r._)([(0,A.Cb)({type:String,json:{write:!0}})],o.prototype,"field",void 0),(0,r._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],o.prototype,"minValue",void 0),(0,r._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],o.prototype,"maxValue",void 0),o=d=(0,r._)([(0,_.j)("esri.renderers.support.pointCloud.ColorModulation")],o);const y=o,E=new i.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let c=class extends h.wq{};(0,r._)([(0,A.Cb)({type:E.apiValues,readOnly:!0,nonNullable:!0,json:{type:E.jsonValues,read:!1,write:E.write}})],c.prototype,"type",void 0),c=(0,r._)([(0,_.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],c);const s=c;var I,v=e(55342);let m=I=class extends s{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new I({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,r._)([(0,v.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],m.prototype,"type",void 0),(0,r._)([(0,A.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"size",void 0),(0,r._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"useRealWorldSymbolSizes",void 0),m=I=(0,r._)([(0,_.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],m);const l=m;var p;let P=p=class extends s{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new p({scaleFactor:this.scaleFactor})}};(0,r._)([(0,v.J)({pointCloudSplatAlgorithm:"splat"})],P.prototype,"type",void 0),(0,r._)([(0,A.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],P.prototype,"scaleFactor",void 0),P=p=(0,r._)([(0,_.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],P);const D={key:"type",base:s,typeMap:{"fixed-size":l,splat:P}},b=(0,i.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let N=class extends h.wq{constructor(C){super(C),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,O.d9)(this.pointSizeAlgorithm),colorModulation:(0,O.d9)(this.colorModulation),pointsPerInch:(0,O.d9)(this.pointsPerInch)}}};(0,r._)([(0,A.Cb)({type:b.apiValues,readOnly:!0,nonNullable:!0,json:{type:b.jsonValues,read:!1,write:b.write}})],N.prototype,"type",void 0),(0,r._)([(0,A.Cb)({types:D,json:{write:!0}})],N.prototype,"pointSizeAlgorithm",void 0),(0,r._)([(0,A.Cb)({type:y,json:{write:!0}})],N.prototype,"colorModulation",void 0),(0,r._)([(0,A.Cb)({json:{write:!0},nonNullable:!0,type:Number})],N.prototype,"pointsPerInch",void 0),N=(0,r._)([(0,_.j)("esri.renderers.PointCloudRenderer")],N),(N||(N={})).fieldTransformTypeKebabDict=new i.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const j=N},23899:(V,x,e)=>{e.d(x,{Z:()=>y});var d,r=e(17626),i=e(58817),h=e(77712),A=(e(90912),e(55342)),g=e(76898),_=e(80573),a=e(10914),M=e(8029);let o=d=class extends _.Z{constructor(E){super(E),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new d(re(X({},this.cloneProperties()),{field:(0,i.d9)(this.field),fieldTransformType:(0,i.d9)(this.fieldTransformType),stops:(0,i.d9)(this.stops),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,r._)([(0,A.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],o.prototype,"type",void 0),(0,r._)([(0,h.Cb)({json:{write:!0},type:String})],o.prototype,"field",void 0),(0,r._)([(0,h.Cb)({type:a.Z,json:{write:!0}})],o.prototype,"legendOptions",void 0),(0,r._)([(0,h.Cb)({type:_.Z.fieldTransformTypeKebabDict.apiValues,json:{type:_.Z.fieldTransformTypeKebabDict.jsonValues,read:_.Z.fieldTransformTypeKebabDict.read,write:_.Z.fieldTransformTypeKebabDict.write}})],o.prototype,"fieldTransformType",void 0),(0,r._)([(0,h.Cb)({type:[M.Z],json:{write:!0}})],o.prototype,"stops",void 0),o=d=(0,r._)([(0,g.j)("esri.renderers.PointCloudStretchRenderer")],o);const y=o},98610:(V,x,e)=>{e.d(x,{Z:()=>v});var o,r=e(17626),i=e(58817),h=e(77712),O=e(90912),A=e(55342),g=e(76898),_=e(80573),a=e(10914),M=e(91558),d=e(86810);let y=o=class extends d.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new o({description:this.description,label:this.label,values:(0,i.d9)(this.values),color:(0,i.d9)(this.color)})}};(0,r._)([(0,h.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,r._)([(0,h.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,r._)([(0,h.Cb)({type:[String],json:{write:!0}})],y.prototype,"values",void 0),(0,r._)([(0,h.Cb)({type:M.Z,json:{type:[O.z8],write:!0}})],y.prototype,"color",void 0),y=o=(0,r._)([(0,g.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],y);const E=y;var c;let s=c=class extends _.Z{constructor(I){super(I),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new c(re(X({},this.cloneProperties()),{field:(0,i.d9)(this.field),fieldTransformType:(0,i.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,i.d9)(this.colorUniqueValueInfos),legendOptions:(0,i.d9)(this.legendOptions)}))}};(0,r._)([(0,A.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],s.prototype,"type",void 0),(0,r._)([(0,h.Cb)({json:{write:!0},type:String})],s.prototype,"field",void 0),(0,r._)([(0,h.Cb)({type:_.Z.fieldTransformTypeKebabDict.apiValues,json:{type:_.Z.fieldTransformTypeKebabDict.jsonValues,read:_.Z.fieldTransformTypeKebabDict.read,write:_.Z.fieldTransformTypeKebabDict.write}})],s.prototype,"fieldTransformType",void 0),(0,r._)([(0,h.Cb)({type:[E],json:{write:!0}})],s.prototype,"colorUniqueValueInfos",void 0),(0,r._)([(0,h.Cb)({type:a.Z,json:{write:!0}})],s.prototype,"legendOptions",void 0),s=c=(0,r._)([(0,g.j)("esri.renderers.PointCloudUniqueValueRenderer")],s);const v=s},22264:(V,x,e)=>{function r(g,_){return _?"xoffset"in _&&_.xoffset?Math.max(g,Math.abs(_.xoffset)):"yoffset"in _&&_.yoffset?Math.max(g,Math.abs(_.yoffset||0)):g:g}function h(g,_){return"number"==typeof g?g:g&&g.stops&&g.stops.length?function i(g){let _=0,a=0;for(let M=0;M<g.length;M++){const d=g[M].size;"number"==typeof d&&(_+=d,a++)}return _/a}(g.stops):_}function A(g){const _=g&&g.renderer,a="touch"===(g&&g.event&&g.event.pointerType)?9:6;if(!_)return a;const M="visualVariables"in _?function O(g,_){if(!_)return g;const a=_.filter(y=>"size"===y.type).map(y=>{const{maxSize:E,minSize:c}=y;return(h(E,g)+h(c,g))/2});let M=0;const d=a.length;if(0===d)return g;for(let y=0;y<d;y++)M+=a[y];const o=Math.floor(M/d);return Math.max(o,g)}(a,_.visualVariables):a;if("simple"===_.type)return r(M,_.symbol);if("unique-value"===_.type){let d=M;return _.uniqueValueInfos.forEach(o=>{d=r(d,o.symbol)}),d}if("class-breaks"===_.type){let d=M;return _.classBreakInfos.forEach(o=>{d=r(d,o.symbol)}),d}return M}e.d(x,{k:()=>A})},36859:(V,x,e)=>{e.d(x,{QM:()=>O,hy:()=>A,uI:()=>i});var r=e(21286);const i=(()=>{if(!("document"in globalThis))return()=>null;const d=document.createElement("canvas"),o=d.getContext("2d");return d.height=512,d.width=1,E=>{o.clearRect(0,0,1,d.height);const c=o.createLinearGradient(0,0,0,d.height);for(const{ratio:s,color:v}of E)c.addColorStop(Math.max(s,.001),`rgba(${v.r}, ${v.g}, ${v.b}, ${v.a})`);return o.fillStyle=c,o.fillRect(0,0,1,d.height),o.getImageData(0,0,1,d.height).data}})();function O(d,o,y,E){const{blurRadius:c,fieldOffset:s,field:v}=o,I=new Float64Array(y*E),m=function _(d){const o=Math.round(3*d),y=2*d*d,E=new Float64Array(2*o+1);for(let c=0;c<=E.length;c++)E[c]=Math.exp(-((c-o)**2)/y)/Math.sqrt(2*Math.PI)*(d/2);return E}(c),l=Math.round(3*c);let p,P=Number.NEGATIVE_INFINITY;const L=function M(d,o){return null!=d?"string"==typeof o?y=>-1*+y.readAttribute(d):y=>+y.readAttribute(d)+o:y=>1}(v,s),D=new Set;for(const b of d){const N=b.getCursor();for(;N.next();){const j=N.getObjectId();if(D.has(j))continue;D.add(j);const C=N.readLegacyPointGeometry(),U=128;if(C.x<-U||C.x>=y+U||C.y<-U||C.y>E+U)continue;const R=+L(N),S=Math.round(C.x)-l,W=Math.round(C.y)-l,G=Math.max(0,S),K=Math.max(0,W),z=Math.min(E,Math.round(C.y)+l),F=Math.min(y,Math.round(C.x)+l);for(let w=K;w<z;w++){const Q=m[w-W];for(let H=G;H<F;H++)p=I[w*y+H]+=Q*m[H-S]*R,p>P&&(P=p)}}}return{matrix:I.buffer,max:P}}function A(d,o,y,E,c,s){d.canvas.width=d.canvas.height=o,d.clearRect(0,0,o,o);const v=d.getImageData(0,0,o,o);y&&E&&v.data.set(new Uint8ClampedArray(function g(d,o,y,E,c){const s=new Uint32Array(d*d),v="buffer"in o?o:new Float64Array(o),I="buffer"in y?new Uint32Array(y.buffer):new Uint32Array(new Uint8Array(y).buffer),m=I.length/(c-E);for(let l=0;l<v.length;l++){const P=Math.floor((v[l]-E)*m);s[l]=I[(0,r.uZ)(P,0,I.length-1)]}return s.buffer}(o,y,E,c,s))),d.putImageData(v,0,0)}},39636:(V,x,e)=>{e.d(x,{i:()=>M});var r=e(15861),i=e(84792),h=e(90912),O=e(91179),A=e(2618),g=e(10920),_=e(77294);const a=(0,h.se)(_.Z);function M(o,y,E){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(function*(o,y,E){y=a(y);const c=(0,A.en)(o),s=X(re(X({},c.query),{f:"json"}),y.toJSON()),v=y.outSpatialReference,I=(0,O.Ji)(y.geometries[0]),m=(0,A.lA)(s,E);return(0,i.default)(c.path+"/project",m).then(({data:{geometries:l}})=>(0,g.o)(l,I,v))})).apply(this,arguments)}},10920:(V,x,e)=>{e.d(x,{o:()=>h,F:()=>i});var r=e(91179);function i(O){return{geometryType:(0,r.Ji)(O[0]),geometries:O.map(A=>A.toJSON())}}function h(O,A,g){const _=(0,r.q9)(A);return O.map(a=>{const M=_.fromJSON(a);return M.spatialReference=g,M})}},4969:(V,x,e)=>{e.d(x,{F:()=>C});var r=e(15861),i=e(84792),h=e(62208),O=e(38811),A=e(13924),g=e(15503),_=e(2618),a=e(17626),M=e(88879),d=e(86810),o=e(77712),s=(e(85931),e(8314),e(90912),e(68653)),v=e(76898),I=e(17253),m=e(12334),l=e(92383);let p=class extends d.wq{constructor(S){super(S),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null}};(0,a._)([(0,o.Cb)({type:I.default,json:{write:!0}})],p.prototype,"directionLines",void 0),(0,a._)([(0,o.Cb)({type:I.default,json:{write:!0}})],p.prototype,"directionPoints",void 0),(0,a._)([(0,o.Cb)({type:l.Z,json:{write:!0}})],p.prototype,"directions",void 0),(0,a._)([(0,o.Cb)({type:M.Z,json:{write:!0}})],p.prototype,"route",void 0),(0,a._)([(0,o.Cb)({type:String,json:{write:!0}})],p.prototype,"routeName",void 0),(0,a._)([(0,o.Cb)({type:[M.Z],json:{write:!0}})],p.prototype,"stops",void 0),p=(0,a._)([(0,v.j)("esri.rest.support.RouteResult")],p);const P=p;function L(S){return S&&I.default.fromJSON(S).features.map(W=>W)}let D=class extends d.wq{constructor(S){super(S),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(S,W){return L(W.barriers)}readPolylineBarriers(S){return L(S)}readPolygonBarriers(S){return L(S)}};(0,a._)([(0,o.Cb)({type:[m.Z]})],D.prototype,"messages",void 0),(0,a._)([(0,o.Cb)({type:[M.Z]})],D.prototype,"pointBarriers",void 0),(0,a._)([(0,s.r)("pointBarriers",["barriers"])],D.prototype,"readPointBarriers",null),(0,a._)([(0,o.Cb)({type:[M.Z]})],D.prototype,"polylineBarriers",void 0),(0,a._)([(0,s.r)("polylineBarriers")],D.prototype,"readPolylineBarriers",null),(0,a._)([(0,o.Cb)({type:[M.Z]})],D.prototype,"polygonBarriers",void 0),(0,a._)([(0,s.r)("polygonBarriers")],D.prototype,"readPolygonBarriers",null),(0,a._)([(0,o.Cb)({type:[P]})],D.prototype,"routeResults",void 0),D=(0,a._)([(0,v.j)("esri.rest.support.RouteSolveResult")],D);const b=D,N=(0,O.E)({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:S=>S.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});function j(S){return"esri.rest.support.FeatureSet"===(null==S?void 0:S.declaredClass)}function C(S,W,G){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(S,W,G){const K=[],z=[],F={},w={},Q=(0,_.en)(S),{path:H}=Q;j(W.stops)&&(0,g.et)(W.stops.features,z,"stops.features",F),j(W.pointBarriers)&&(0,g.et)(W.pointBarriers.features,z,"pointBarriers.features",F),j(W.polylineBarriers)&&(0,g.et)(W.polylineBarriers.features,z,"polylineBarriers.features",F),j(W.polygonBarriers)&&(0,g.et)(W.polygonBarriers.features,z,"polygonBarriers.features",F);const se=yield(0,A.aX)(z);for(const Z in F){const $=F[Z];K.push(Z),w[Z]=se.slice($[0],$[1])}if((0,g.Wf)(w,K)){let Z=null;try{Z=yield(0,g.bI)(H,W.apiKey,G)}catch($){}Z&&!Z.hasZ&&(0,g.ef)(w,K)}for(const Z in w)w[Z].forEach(($,q)=>{W.get(Z)[q].geometry=$});const f=re(X({},G),{query:re(X(X({},Q.query),N.toQueryParams(W)),{f:"json"})}),T=H.endsWith("/solve")?H:`${H}/solve`,{data:B}=yield(0,i.default)(T,f);return R(B)})).apply(this,arguments)}function R(S){var W,G,K,z,F;const w=new Map,{directionLines:Q,directionPoints:H,directions:se,routes:f,stops:T,barriers:B,polygonBarriers:Z,polylineBarriers:$,messages:q}=S,k=null!=(W=null!=(G=null!=(K=null!=(z=null==f?void 0:f.spatialReference)?z:null==T?void 0:T.spatialReference)?K:null==B?void 0:B.spatialReference)?G:null==Z?void 0:Z.spatialReference)?W:null==$?void 0:$.spatialReference;null==f||f.features.forEach(J=>{const Y=J.attributes.Name,te=J.attributes.ObjectID;w.has(Y)?(w.get(Y).route=J,w.get(Y).routeId=te):w.set(Y,{route:J,routeId:te,routeName:Y}),(0,h.pC)(J.geometry)&&(J.geometry.spatialReference=k)}),null==se||se.forEach(J=>{const Y=J.routeName;w.has(Y)?w.get(Y).directions=J:w.set(Y,{routeName:Y,directions:J})}),null==T||T.features.forEach(J=>{var Y;const te=null!=(Y=J.attributes.RouteName)?Y:null;w.has(te)?w.get(te).stops?w.get(te).stops.push(J):w.get(te).stops=[J]:w.set(te,{stops:[J],routeName:te}),(0,h.pC)(J.geometry)&&(J.geometry.spatialReference=k)});const ne=null==(F=null==T?void 0:T.features.every(J=>null==J.attributes.RouteName))||F;if((null==T?void 0:T.features.length)>0&&ne){const J=Array.from(w.keys())[0];w.get(J).stops=w.get(null).stops,w.delete(null)}null==Q||Q.features.forEach(J=>{var Y;const te=J.attributes.RouteID,ee=null==(Y=Array.from(w.values()).find(ie=>ie.routeId===te))?void 0:Y.routeName;if(ee)if(w.has(ee))if(w.get(ee).directionLines)w.get(ee).directionLines.features.push(J);else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=Q;w.get(ee).directionLines={features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}}else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=Q;w.set(ee,{routeName:ee,directionLines:{features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}})}}),null==H||H.features.forEach(J=>{var Y;const te=J.attributes.RouteID,ee=null==(Y=Array.from(w.values()).find(ie=>ie.routeId===te))?void 0:Y.routeName;if(ee)if(w.has(ee))if(w.get(ee).directionPoints)w.get(ee).directionPoints.features.push(J);else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=H;w.get(ee).directionPoints={features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}}else{const{fieldAliases:ie,geometryType:ae,spatialReference:le}=H;w.set(ee,{routeName:ee,directionPoints:{features:[J],fieldAliases:ie,geometryType:ae,spatialReference:le}})}});const oe=Array.from(w.values());return b.fromJSON({routeResults:oe,barriers:B,polygonBarriers:Z,polylineBarriers:$,messages:q})}},77294:(V,x,e)=>{e.d(x,{Z:()=>d});var r=e(17626),i=e(86810),h=e(77712),_=(e(85931),e(8314),e(90912),e(76898)),a=e(91179);let M=class extends i.wq{constructor(o){super(o),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const o=this.geometries.map(function(c){return c.toJSON()}),y=this.geometries[0],E={};return E.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),E.inSR=y.spatialReference.wkid||JSON.stringify(y.spatialReference.toJSON()),E.geometries=JSON.stringify({geometryType:(0,a.Ji)(y),geometries:o}),this.transformation&&(E.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(E.transformForward=this.transformForward),E}};(0,r._)([(0,h.Cb)()],M.prototype,"geometries",void 0),(0,r._)([(0,h.Cb)({json:{read:{source:"outSR"}}})],M.prototype,"outSpatialReference",void 0),(0,r._)([(0,h.Cb)()],M.prototype,"transformation",void 0),(0,r._)([(0,h.Cb)()],M.prototype,"transformForward",void 0),M=(0,r._)([(0,_.j)("esri.rest.support.ProjectParameters")],M);const d=M},70026:(V,x,e)=>{e.d(x,{t:()=>h});var r=e(15861),i=e(84792);function h(A,g){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)(function*(A,g){const{data:_}=yield(0,i.default)(A,X({responseType:"image"},g));return _})).apply(this,arguments)}},32837:(V,x,e)=>{e.d(x,{Z:()=>g});var r=e(35909),i=e(31375),h=e(47139),O=e(80991);class g{constructor(a){this._resourceManager=a}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(a,M,d){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===a.type||"esriSFS"===a.type){const[l,p,P]=r.fN.rasterizeSimpleFill(this._rasterizationCanvas,a.style,M);return{size:[p,P],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===a.type||"esriSLS"===a.type||"line"===a.type&&a.dashTemplate){let l,p;if("simple-line"===a.type||"esriSLS"===a.type)switch(l=(0,r.U1)(a.style,a.cap),a.cap){case"butt":p="Butt";break;case"square":p="Square";break;default:p="Round"}else l=a.dashTemplate,p=a.cim.capStyle;const[P,L,D]=r.fN.rasterizeSimpleLine(l,p);return{size:[L,D],image:new Uint32Array(P.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,y,E;if("simple-marker"===a.type||"esriSMS"===a.type||"line-marker"===a.type?(o=r.B$.fromSimpleMarker(a),E=(0,h.Fp)(o)):a.cim&&"CIMHatchFill"===a.cim.type?(o=r.B$.fromCIMHatchFill(a.cim),y=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):a.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===a.cim.markerPlacement.type?(o=r.B$.fromCIMInsidePolygon(a.cim),y=new i.Z(o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=a.cim,E=(0,h.Fp)(o)),E&&!d){const[l,p,P]=(0,h.RL)(E);return l?{size:[p,P],image:new Uint32Array(l.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,s,v,I,m]=r.B$.rasterize(this._rasterizationCanvas,o,y,this._resourceManager,!d);return c?{size:[s,v],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:I,anchorY:m}:null}rasterizeImageResource(a,M,d,o){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=a,this._rasterizationCanvas.height=M;const y=this._rasterizationCanvas.getContext("2d");d instanceof ImageData?y.putImageData(d,0,0):(d.setAttribute("width",`${a}px`),d.setAttribute("height",`${M}px`),y.drawImage(d,0,0,a,M));const E=y.getImageData(0,0,a,M),c=new Uint8Array(E.data);if(o)for(const p of o)if(p&&p.oldColor&&4===p.oldColor.length&&p.newColor&&4===p.newColor.length){const[P,L,D,b]=p.oldColor,[N,j,C,U]=p.newColor;if(P===N&&L===j&&D===C&&b===U)continue;for(let R=0;R<c.length;R+=4)P===c[R]&&L===c[R+1]&&D===c[R+2]&&b===c[R+3]&&(c[R]=N,c[R+1]=j,c[R+2]=C,c[R+3]=U)}let s;for(let p=0;p<c.length;p+=4)s=c[p+3]/255,c[p]=c[p]*s,c[p+1]=c[p+1]*s,c[p+2]=c[p+2]*s;let v=c,I=a,m=M;const l=512;if(I>=l||m>=l){const p=I/m;p>1?(I=l,m=Math.round(l/p)):(m=l,I=Math.round(l*p)),v=new Uint8Array(4*I*m);const P=new Uint8ClampedArray(v.buffer);(0,O.TT)(c,a,M,P,I,m,!1)}return{size:[I,m],image:new Uint32Array(v.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},50998:(V,x,e)=>{e.r(x),e.d(x,{fetchSymbolFromStyle:()=>y,resolveWebStyleSymbol:()=>o});var r=e(65787),i=e(83100),h=e(26584),O=e(21726),A=e(84687),g=e(29840),_=e(65270),a=e(77345),M=e(78241),d=e(96296);function o(c,s,v,I){return c.name?c.styleName&&"Esri2DPointSymbolsStyle"===c.styleName?function E(c,s,v){const I=M.wm.replace(/\{SymbolName\}/gi,c.name);return(0,M.EJ)(I,v).then(m=>{const l=(0,M.KV)(m.data);return(0,_.im)(l,{portal:s.portal,url:(0,O.mN)((0,O.Yd)(I)),origin:"portal-item"})})}(c,s,I):(0,M.n2)(c,s,I).then(m=>y(m,c.name,s,v,I)):Promise.reject(new h.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function y(c,s,v,I,m){const l=c.data,p={portal:v&&v.portal||A.Z.getDefault(),url:(0,O.mN)(c.baseUrl),origin:"portal-item"},P=l.items.find(j=>j.name===s);if(!P)return Promise.reject(new h.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${s}' could not be found`,{symbolName:s}));let L=(0,g.f)((0,M.v9)(P,I),p),D=P.thumbnail&&P.thumbnail.href;const b=P.thumbnail&&P.thumbnail.imageData;(0,i.XO)()&&(L=(0,i.pJ)(L),D=(0,i.pJ)(D));const N={portal:v.portal,url:(0,O.mN)((0,O.Yd)(L)),origin:"portal-item"};return(0,M.EJ)(L,m).then(j=>{const C="cimRef"===I?(0,M.KV)(j.data):j.data,U=(0,_.im)(C,N);if(U&&(0,r.dU)(U)){if(D){const R=(0,g.f)(D,p);U.thumbnail=new d.p({url:R})}else b&&(U.thumbnail=new d.p({url:`data:image/png;base64,${b}`}));c.styleUrl?U.styleOrigin=new a.Z({portal:v.portal,styleUrl:c.styleUrl,name:s}):c.styleName&&(U.styleOrigin=new a.Z({portal:v.portal,styleName:c.styleName,name:s}))}return U})}},55746:(V,x,e)=>{e.d(x,{p:()=>E,k:()=>y});var r=e(65389),i=e(61885),O=(e(8314),e(62208)),A=e(76279),g=e(5548),_=e(16669),a=e(52397);function M(c,s){return c<<16|s}function d(c){return(4294901760&c)>>>16}function o(c){return 65535&c}const y={getObjectId:c=>c.getObjectId(),getAttributes:c=>c.readAttributes(),getAttribute:(c,s)=>c.readAttribute(s),cloneWithGeometry:(c,s)=>c,getGeometry:c=>c.readHydratedGeometry(),getCentroid:(c,s)=>c.readCentroid()};class E extends _.J{constructor(s,v,I){super(s,v),this.featureAdapter=y,this.events=new i.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new r.Z(50),this._index=(0,A.r)(9,m=>({minX:this._storage.getXMin(m),minY:this._storage.getYMin(m),maxX:this._storage.getXMax(m),maxY:this._storage.getYMax(m)})),this._storage=v,this.mode=I}get storage(){return this._storage}get storeStatistics(){let s=0,v=0,I=0;return this.forEach(m=>{const l=m.readGeometry();l&&(v+=l.isPoint?1:l.lengths.reduce((p,P)=>p+P,0),I+=l.isPoint?1:l.lengths.length,s+=1)}),{featureCount:s,vertexCount:v,ringCount:I}}hasInstance(s){return this._featureSetsByInstance.has(s)}onTileData(s,v){if((0,O.Wi)(v.addOrUpdate))return v;if(v.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const m=v.addOrUpdate.getCursor();for(;m.next();){const l=m.getDisplayId();this.setComputedAttributes(this._storage,m,l,s.scale)}return v}this._featureSetsByInstance.set(v.addOrUpdate.instance,v.addOrUpdate);const I=v.addOrUpdate.getCursor();for(;I.next();)this._insertFeature(I,s.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),v}search(s){this._rebuildIndex();const v=s.id,I=this._indexSearchCache.find(P=>P.tileId===v);if((0,O.pC)(I))return I.readers;const m=new Map,l=this._searchIndex(s.bounds),p=[];for(const P of l){const L=this._storage.getInstanceId(P),D=d(L),b=o(L);m.has(D)||m.set(D,[]),m.get(D).push(b)}return m.forEach((P,L)=>{const D=this._featureSetsByInstance.get(L);p.push(a.t.from(D,P))}),this._indexSearchCache.enqueue({tileId:v,readers:p}),p}insert(s){const v=s.getCursor(),I=this._storage;for(;v.next();){var m;const l=M(v.instance,v.getIndex()),p=v.getObjectId(),P=null!=(m=this._objectIdToDisplayId.get(p))?m:this._storage.createDisplayId();v.setDisplayId(P),I.setInstanceId(P,l),this._objectIdToDisplayId.set(p,P)}this._featureSetsByInstance.set(s.instance,s),this._spatialIndexInvalid=!0}remove(s){const v=this._objectIdToDisplayId.get(s);if(!v)return;const I=this._storage.getInstanceId(v),m=o(I),l=d(I),p=this._featureSetsByInstance.get(l);this._objectIdToDisplayId.delete(s),this._storage.releaseDisplayId(v),p.removeAtIndex(m),p.isEmpty&&this._featureSetsByInstance.delete(l),this._spatialIndexInvalid=!0}forEach(s){this._objectIdToDisplayId.forEach(v=>{const I=this._storage.getInstanceId(v),m=this._lookupFeature(I);s(m)})}forEachUnsafe(s){this._objectIdToDisplayId.forEach(v=>{const I=this._storage.getInstanceId(v),m=d(I),l=o(I),p=this._getFeatureSet(m);p.setIndex(l),s(p)})}forEachInBounds(s,v){const I=this._searchIndex(s);for(const m of I){const l=this.lookupFeatureByDisplayId(m,this._storage);v((0,O.Wg)(l))}}forEachBounds(s,v,I){this._rebuildIndex();const m=[0,0,0,0];for(const l of s){if(!l.readGeometry())continue;const p=l.getDisplayId();m[0]=this._storage.getXMin(p),m[1]=this._storage.getYMin(p),m[2]=this._storage.getXMax(p),m[3]=this._storage.getYMax(p),v((0,g.JR)(I,m))}}sweepFeatures(s,v,I){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((m,l)=>{s.has(m)||(v.releaseDisplayId(m),I&&I.unsetAttributeData(m),this._objectIdToDisplayId.delete(l))}),this.events.emit("changed")}sweepFeatureSets(s){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((v,I)=>{s.has(I)||this._featureSetsByInstance.delete(I)})}lookupObjectId(s,v){const I=this.lookupFeatureByDisplayId(s,v);return(0,O.Wi)(I)?null:I.getObjectId()}lookupDisplayId(s){return this._objectIdToDisplayId.get(s)}lookupFeatureByDisplayId(s,v){const I=v.getInstanceId(s);return this._lookupFeature(I)}lookupByDisplayIdUnsafe(s){const v=this._storage.getInstanceId(s),I=d(v),m=o(v),l=this._getFeatureSet(I);return l?(l.setIndex(m),l):null}_insertFeature(s,v){const I=this._storage,m=s.getObjectId(),l=M(s.instance,s.getIndex());I.getInstanceId(s.getDisplayId());let p=this._objectIdToDisplayId.get(m);p||(p=I.createDisplayId(),this._objectIdToDisplayId.set(m,p),this._spatialIndexInvalid=!0),s.setDisplayId(p),I.setInstanceId(p,l),this.setComputedAttributes(I,s,p,v)}_searchIndex(s){return this._rebuildIndex(),this._index.search({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const s=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(v=>{const I=v.getCursor();for(;I.next();){const m=I.getDisplayId();this._storage.setBounds(m,I)&&s.push(m)}}):this._objectIdToDisplayId.forEach(v=>{const I=this._storage.getInstanceId(v);this._storage.setBounds(v,this._lookupFeature(I))&&s.push(v)}),this._index.clear(),this._index.load(s),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(s){const v=d(s),I=o(s),m=this._getFeatureSet(v);if(!m)return null;const l=m.getCursor();return l.setIndex(I),l}_getFeatureSet(s){return this._featureSetsByInstance.get(s)}}},16669:(V,x,e)=>{e.d(x,{J:()=>M});var r=e(15861),i=e(8314),h=e(62208),O=e(84682),A=e(46679),g=e(63290);const a=e.e(2445).then(e.bind(e,22445));class M{constructor(o,y){this._canCacheExpressionValue=!1,this._sourceInfo=o,this._bitsets={computed:y.getBitset(y.createBitset())}}invalidate(){this._bitsets.computed.clear()}updateSchema(o,y){var E=this;return(0,r.Z)(function*(){const c=(0,O.Hg)(E._schema,y);if(E._schema=y,!y||(0,h.Wi)(c)||!(0,O.uD)(c,"attributes"))return;(0,i.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",c),E._bitsets.computed.clear(),o.targets[y.name]=!0;const s=y.attributes,v=[],I=[];for(const m in s){const l=s[m];switch(l.type){case"field":break;case"expression":v.push(E._createArcadeComputedField(l));break;case"label-expression":v.push(E._createLabelArcadeComputedField(l));break;case"statistic":I.push(l)}}E._computedFields=yield Promise.all(v),E._canCacheExpressionValue=!E._computedFields.some(m=>"expression"===m.type&&m.expression.referencesScale()),E._statisticFields=I})()}setComputedAttributes(o,y,E,c){const s=this._bitsets.computed;if(!this._canCacheExpressionValue||!s.has(E)){s.set(E);for(const v of this._computedFields){const I=this._evaluateField(y,v,c);switch(v.resultType){case"numeric":o.setComputedNumericAtIndex(E,v.fieldIndex,I);break;case"string":o.setComputedStringAtIndex(E,v.fieldIndex,I)}}}}_createArcadeComputedField(o){var y=this;return(0,r.Z)(function*(){const E=y._sourceInfo.spatialReference,c=y._sourceInfo.fieldsIndex;return re(X({},o),{expression:yield(0,A.Yi)(o.valueExpression,E,c)})})()}_createLabelArcadeComputedField(o){var y=this;return(0,r.Z)(function*(){const E=y._sourceInfo.spatialReference,c=y._sourceInfo.fieldsIndex,{createLabelFunction:s}=yield a,v=yield s(o.label,c,E);return re(X({},o),{builder:v})})()}_evaluateField(o,y,E){switch(y.type){case"label-expression":{const c=o.readArcadeFeature();return y.builder.evaluate(c)||""}case"expression":{const{expression:c}=y;return function _(d,o,y){d.referencesGeometry();const E=o.readArcadeFeature();try{return d.evaluate(re(X({},y),{$feature:E}))}catch(c){return g.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}(c,o,{$view:{scale:E}})}}}}},13112:(V,x,e)=>{e.d(x,{Z:()=>M});var r=e(17626),i=e(80542),h=e(77712),_=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const d=this.get("tileStore.tileScheme.spatialReference");return d&&d.toJSON()||null}};(0,r._)([(0,h.Cb)({readOnly:!0})],a.prototype,"supportsTileUpdates",null),(0,r._)([(0,h.Cb)({constructOnly:!0})],a.prototype,"remoteClient",void 0),(0,r._)([(0,h.Cb)({constructOnly:!0})],a.prototype,"service",void 0),(0,r._)([(0,h.Cb)()],a.prototype,"spatialReference",null),(0,r._)([(0,h.Cb)({constructOnly:!0})],a.prototype,"tileInfo",void 0),(0,r._)([(0,h.Cb)({constructOnly:!0})],a.prototype,"tileStore",void 0),a=(0,r._)([(0,_.j)("esri.views.2d.layers.features.processors.BaseProcessor")],a);const M=a},52397:(V,x,e)=>{e.d(x,{t:()=>i});var r=e(25208);class i extends r.s{constructor(O,A){super(r.s.createInstance(),O.fullSchema()),this._currentIndex=-1,this._reader=O,this._indices=A}static from(O,A){return new i(O.copy(),A)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const O=new i(this._reader.copy(),this._indices);return O._currentIndex=this._currentIndex,O}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(O){this._reader.setArcadeSpatialReference(O)}attachStorage(O){this._reader.attachStorage(O)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(O){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(O,A){return this._reader.setComputedNumericAtIndex(A,0)}getComputedString(O){return this._reader.getComputedStringAtIndex(0)}setComputedString(O,A){return this._reader.setComputedStringAtIndex(0,A)}getComputedNumericAtIndex(O){return this._reader.getComputedNumericAtIndex(O)}setComputedNumericAtIndex(O,A){this._reader.setComputedNumericAtIndex(O,A)}getComputedStringAtIndex(O){return this._reader.getComputedStringAtIndex(O)}setComputedStringAtIndex(O,A){return this._reader.setComputedStringAtIndex(O,A)}transform(O,A,g,_){const a=this.copy();return a._reader=this._reader.transform(O,A,g,_),a}readAttribute(O,A=!1){return this._reader.readAttribute(O,A)}readAttributes(){return this._reader.readAttributes()}joinAttributes(O){return this._reader.joinAttributes(O)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(O){return this.readAttribute(O,!0)}hasField(O){return this._reader.hasField(O)}setField(O,A){return this._reader.setField(O,A)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(O){return this._reader.setDisplayId(O)}getGroupId(){return this._reader.getGroupId()}setGroupId(O){return this._reader.setGroupId(O)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(O){return this._reader.setIndex(O)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(O,A){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(V,x,e)=>{e.d(x,{Z:()=>M});var r=e(17626),i=e(80542),h=e(77712),_=(e(85931),e(8314),e(90912),e(76898));let a=class extends i.r{constructor(d){super(d),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(d){const o=this.createTile(d);return o.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(d.id,o),o}forceAttributeTextureUpload(){}forEachTile(d){this.tiles.forEach(d)}releaseTile(d){this.tiles.delete(d.key.id),this.disposeTile(d)}isUpdating(){let d=!0;return this.tiles.forEach(o=>{d=d&&o.isReady}),!d}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,r._)([(0,h.Cb)()],a.prototype,"layer",void 0),(0,r._)([(0,h.Cb)()],a.prototype,"layerView",void 0),(0,r._)([(0,h.Cb)()],a.prototype,"tileInfoView",void 0),(0,r._)([(0,h.Cb)()],a.prototype,"updating",null),a=(0,r._)([(0,_.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],a);const M=a},36275:(V,x,e)=>{e.d(x,{Z:()=>h});var r=e(39406),i=e(55051);class h extends i.Z{renderChildren(A){this.attributeView.bindTextures(A.context,!1),this.children.some(g=>g.hasData)&&(super.renderChildren(A),A.drawPhase===r.jx.MAP&&this._renderChildren(A),this.hasHighlight()&&A.drawPhase===r.jx.HIGHLIGHT&&this._renderHighlight(A),this._boundsRenderer&&this._boundsRenderer.doRender(A))}_renderHighlight(A){const{painter:g}=A,_=g.effects.highlight;_.bind(A),this._renderChildren(A,_.defines),_.draw(A),_.unbind()}}},13305:(V,x,e)=>{e.d(x,{Z:()=>y});var r=e(17626),_=(e(63290),e(90912),e(85931),e(8314),e(82255),e(76898)),a=e(39406),M=e(55051),d=e(67969);let o=class extends M.Z{renderChildren(E){if(E.drawPhase!==a.jx.HIGHLIGHT||(this.attributeView.bindTextures(E.context),!this.children.some(v=>v.hasData)))return;super.renderChildren(E);const{painter:c}=E,s=c.effects.highlight;s.bind(E),E.context.setColorMask(!0,!0,!0,!0),E.context.clear(d.lk.COLOR_BUFFER_BIT),this._renderChildren(E,s.defines.concat(["highlightAll"])),s.draw(E),s.unbind()}};o=(0,r._)([(0,_.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],o);const y=o},19625:(V,x,e)=>{e.d(x,{U$:()=>A});var r=e(60479),i=e(67866);class h{constructor(_,a){this.layout=_,this.buffer="number"==typeof a?new ArrayBuffer(a*_.stride):a;for(const M of _.fieldNames){const d=_.fields.get(M);this[M]=new d.constructor(this.buffer,d.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(_,a){const M=this[_];return M&&M.elementCount===a.ElementCount&&M.elementType===a.ElementType?M:null}slice(_,a){return new h(this.layout,this.buffer.slice(_*this.stride,a*this.stride))}copyFrom(_,a,M,d){const o=this.stride;if(o%4==0){const y=new Uint32Array(_.buffer,a*o,d*o/4);new Uint32Array(this.buffer,M*o,d*o/4).set(y)}else{const y=new Uint8Array(_.buffer,a*o,d*o);new Uint8Array(this.buffer,M*o,d*o).set(y)}}}class O{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(_,a){return this._appendField(_,r.Eu,a),this}vec2f64(_,a){return this._appendField(_,r.q6,a),this}vec3f(_,a){return this._appendField(_,r.ct,a),this}vec3f64(_,a){return this._appendField(_,r.fP,a),this}vec4f(_,a){return this._appendField(_,r.ek,a),this}vec4f64(_,a){return this._appendField(_,r.Cd,a),this}mat3f(_,a){return this._appendField(_,r.gK,a),this}mat3f64(_,a){return this._appendField(_,r.ey,a),this}mat4f(_,a){return this._appendField(_,r.bj,a),this}mat4f64(_,a){return this._appendField(_,r.O1,a),this}vec4u8(_,a){return this._appendField(_,r.mc,a),this}f32(_,a){return this._appendField(_,r.ly,a),this}f64(_,a){return this._appendField(_,r.oS,a),this}u8(_,a){return this._appendField(_,r.D_,a),this}u16(_,a){return this._appendField(_,r.av,a),this}i8(_,a){return this._appendField(_,r.Hz,a),this}vec2i8(_,a){return this._appendField(_,r.Vs,a),this}vec2i16(_,a){return this._appendField(_,r.or,a),this}vec2u8(_,a){return this._appendField(_,r.xA,a),this}vec4u16(_,a){return this._appendField(_,r.v6,a),this}u32(_,a){return this._appendField(_,r.Nu,a),this}_appendField(_,a,M){const d=a.ElementCount*(0,i.n1)(a.ElementType);this.fields.set(_,{size:d,constructor:a,offset:this.stride,optional:M}),this.stride+=d,this.fieldNames.push(_)}alignTo(_){return this.stride=Math.floor((this.stride+_-1)/_)*_,this}hasField(_){return this.fieldNames.indexOf(_)>=0}createBuffer(_){return new h(this,_)}createView(_){return new h(this,_)}clone(){const _=new O;return _.stride=this.stride,_.fields=new Map,this.fields.forEach((a,M)=>_.fields.set(M,a)),_.fieldNames=this.fieldNames.slice(),_.BufferType=this.BufferType,_}}function A(){return new O}},88569:(V,x,e)=>{e.d(x,{ve:()=>M,IB:()=>g,wu:()=>O,je:()=>o,j7:()=>_,Bh:()=>y});var r=e(42743),i=e(67969),h=e(2078);const O=(0,h.wK)(i.zi.SRC_ALPHA,i.zi.ONE,i.zi.ONE_MINUS_SRC_ALPHA,i.zi.ONE_MINUS_SRC_ALPHA),A=(0,h.if)(i.zi.ONE,i.zi.ONE),g=(0,h.if)(i.zi.ZERO,i.zi.ONE_MINUS_SRC_ALPHA);function _(E){return E===r.Am.FrontFace?null:E===r.Am.Alpha?g:A}const M=5e5,d={factor:-1,units:-2};function o(E){return E?d:null}function y(E,c=i.wb.LESS){return E===r.Am.NONE||E===r.Am.FrontFace?c:i.wb.LEQUAL}},91263:(V,x,e)=>{var r,i;e.d(x,{C:()=>r}),(i=r||(r={}))[i.MATERIAL=0]="MATERIAL",i[i.MATERIAL_ALPHA=1]="MATERIAL_ALPHA",i[i.MATERIAL_DEPTH=2]="MATERIAL_DEPTH",i[i.MATERIAL_NORMAL=3]="MATERIAL_NORMAL",i[i.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL",i[i.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT",i[i.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT",i[i.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT",i[i.MAX_PASS=8]="MAX_PASS"},5894:(V,x,e)=>{var r,i;e.d(x,{r:()=>r}),(i=r||(r={}))[i.INTEGRATED_MESH=0]="INTEGRATED_MESH",i[i.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",i[i.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",i[i.OPAQUE_PLUGIN=3]="OPAQUE_PLUGIN",i[i.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL",i[i.TRANSPARENT_PLUGIN=5]="TRANSPARENT_PLUGIN",i[i.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN",i[i.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=7]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",i[i.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN",i[i.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL",i[i.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL",i[i.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS",i[i.POSTPROCESSING_ENVIRONMENT_OPAQUE=12]="POSTPROCESSING_ENVIRONMENT_OPAQUE",i[i.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=13]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT",i[i.LASERLINES=14]="LASERLINES",i[i.LASERLINES_CONTRAST_CONTROL=15]="LASERLINES_CONTRAST_CONTROL",i[i.HUD_MATERIAL=16]="HUD_MATERIAL",i[i.LABEL_MATERIAL=17]="LABEL_MATERIAL",i[i.LINE_CALLOUTS=18]="LINE_CALLOUTS",i[i.LINE_CALLOUTS_HUD_DEPTH=19]="LINE_CALLOUTS_HUD_DEPTH",i[i.DRAPED_MATERIAL=20]="DRAPED_MATERIAL",i[i.DRAPED_WATER=21]="DRAPED_WATER",i[i.VOXEL=22]="VOXEL",i[i.MAX_SLOTS=23]="MAX_SLOTS"},16396:(V,x,e)=>{var r,i;e.d(x,{T:()=>r}),(i=r||(r={})).POSITION="position",i.NORMAL="normal",i.UV0="uv0",i.AUXPOS1="auxpos1",i.AUXPOS2="auxpos2",i.MAPPOS="mapPos",i.COLOR="color",i.SYMBOLCOLOR="symbolColor",i.SIZE="size",i.TANGENT="tangent",i.OFFSET="offset",i.SUBDIVISIONFACTOR="subdivisionFactor",i.COLORFEATUREATTRIBUTE="colorFeatureAttribute",i.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",i.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",i.DISTANCETOSTART="distanceToStart",i.UVMAPSPACE="uvMapSpace",i.BOUNDINGRECT="boundingRect",i.UVREGION="uvRegion",i.NORMALCOMPRESSED="normalCompressed",i.PROFILERIGHT="profileRight",i.PROFILEUP="profileUp",i.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",i.FEATUREVALUE="featureValue",i.MODELORIGINHI="modelOriginHi",i.MODELORIGINLO="modelOriginLo",i.MODEL="model",i.MODELNORMAL="modelNormal",i.INSTANCECOLOR="instanceColor",i.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",i.LOCALTRANSFORM="localTransform",i.GLOBALTRANSFORM="globalTransform",i.BOUNDINGSPHERE="boundingSphere",i.MODELORIGIN="modelOrigin",i.MODELSCALEFACTORS="modelScaleFactors",i.FEATUREATTRIBUTE="featureAttribute",i.STATE="state",i.LODLEVEL="lodLevel",i.POSITION0="position0",i.POSITION1="position1",i.NORMALA="normalA",i.NORMALB="normalB",i.COMPONENTINDEX="componentIndex",i.VARIANTOFFSET="variantOffset",i.VARIANTSTROKE="variantStroke",i.VARIANTEXTENSION="variantExtension",i.U8PADDING="u8padding",i.U16PADDING="u16padding",i.SIDENESS="sideness",i.START="start",i.END="end",i.UP="up",i.EXTRUDE="extrude"},42743:(V,x,e)=>{var r,i,h,O,A,g,_,a,M,d,o,y,E,c,s;e.d(x,{JJ:()=>E,Vr:()=>r,Gv:()=>i,CE:()=>o,MX:()=>d,Rw:()=>g,hU:()=>_,Am:()=>O}),(s=r||(r={}))[s.None=0]="None",s[s.Front=1]="Front",s[s.Back=2]="Back",s[s.COUNT=3]="COUNT",function(s){s[s.Less=0]="Less",s[s.Lequal=1]="Lequal",s[s.COUNT=2]="COUNT"}(i||(i={})),function(s){s[s.NONE=0]="NONE",s[s.SMAA=1]="SMAA"}(h||(h={})),function(s){s[s.Color=0]="Color",s[s.Alpha=1]="Alpha",s[s.FrontFace=2]="FrontFace",s[s.NONE=3]="NONE",s[s.COUNT=4]="COUNT"}(O||(O={})),function(s){s[s.BACKGROUND=0]="BACKGROUND",s[s.UPDATE=1]="UPDATE"}(A||(A={})),function(s){s[s.NOT_LOADED=0]="NOT_LOADED",s[s.LOADING=1]="LOADING",s[s.LOADED=2]="LOADED"}(g||(g={})),function(s){s[s.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",s[s.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(_||(_={})),function(s){s[s.ASYNC=0]="ASYNC",s[s.SYNC=1]="SYNC"}(a||(a={})),function(s){s[s.Highlight=0]="Highlight",s[s.MaskOccludee=1]="MaskOccludee",s[s.COUNT=2]="COUNT"}(M||(M={})),function(s){s[s.Triangle=0]="Triangle",s[s.Point=1]="Point",s[s.Line=2]="Line"}(d||(d={})),function(s){s[s.STRETCH=1]="STRETCH",s[s.PAD=2]="PAD"}(o||(o={})),function(s){s[s.CHANGED=0]="CHANGED",s[s.UNCHANGED=1]="UNCHANGED"}(y||(y={})),function(s){s[s.Blend=0]="Blend",s[s.Opaque=1]="Opaque",s[s.Mask=2]="Mask",s[s.MaskBlend=3]="MaskBlend",s[s.COUNT=4]="COUNT"}(E||(E={})),function(s){s[s.OFF=0]="OFF",s[s.ON=1]="ON"}(c||(c={}))},94672:(V,x,e)=>{e.d(x,{K:()=>A}),e(29132);var i=e(62208),h=e(16730),O=e(2004);function A(a,M,d,o=new O.Z){let y;if("2d"===d.type)y=M*d.resolution;else if("3d"===d.type){const m=d.overlayPixelSizeInMapUnits(a),l=d.basemapSpatialReference;y=(0,i.pC)(l)&&!l.equals(d.spatialReference)?(0,h.c9)(l)/(0,h.c9)(d.spatialReference):M*m}const E=a.x-y,c=a.y-y,s=a.x+y,v=a.y+y,{spatialReference:I}=d;return o.xmin=Math.min(E,s),o.ymin=Math.min(c,v),o.xmax=Math.max(E,s),o.ymax=Math.max(c,v),o.spatialReference=I,o}new O.Z},33e3:(V,x,e)=>{e.d(x,{G:()=>O});var r=e(62208);class i{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(g,_){var a;return null==(a=this._outer.get(g))?void 0:a.get(_)}set(g,_,a){const M=this._outer.get(g);M?M.set(_,a):this._outer.set(g,new Map([[_,a]]))}delete(g,_){const a=this._outer.get(g);a&&(a.delete(_),0===a.size&&this._outer.delete(g))}forEach(g){this._outer.forEach((_,a)=>g(_,a))}}var h=e(17867);class O{constructor(g){this._rctx=g,this._store=new i}dispose(){this._store.forEach(g=>g.forEach(_=>_.dispose())),this._store.clear()}acquire(g,_,a,M){const d=this._store.get(g,_);if((0,r.pC)(d))return d.ref(),d;const o=new h.$(this._rctx,g,_,a,M);return o.ref(),this._store.set(g,_,o),o}get test(){let g=0;return this._store.forEach(_=>_.forEach(a=>g+=a.hasGLName?2:1)),{cachedWebGLObjects:g}}}},2757:(V,x,e)=>{function i(_,a,M){for(let d=0;d<M;++d)a[2*d]=_[d],a[2*d+1]=_[d]-a[2*d]}function O(_,a,M,d){for(let o=0;o<d;++o)A[0]=_[o],i(A,g,1),a[o]=g[0],M[o]=g[1]}e.d(x,{LF:()=>i,po:()=>O});const A=new Float64Array(1),g=new Float32Array(2)},80322:(V,x,e)=>{function r(i){let h="";for(const O in i){const A=i[O];if("boolean"==typeof A)A&&(h+=`#define ${O}\n`);else if("number"==typeof A)h+=`#define ${O} ${A.toFixed()}\n`;else if("object"==typeof A){const g=A.options;let _=0;for(const a in g)h+=`#define ${g[a]} ${(_++).toFixed()}\n`;h+=`#define ${O} ${g[A.value]}\n`}}return h}e.d(x,{K:()=>r})},2078:(V,x,e)=>{e.d(x,{jp:()=>se,zp:()=>_,BK:()=>M,LZ:()=>a,sm:()=>m,wK:()=>O,if:()=>h});var r=e(42743),i=e(67969);function h(f,T,B=i.db.ADD,Z=[0,0,0,0]){return{srcRgb:f,srcAlpha:f,dstRgb:T,dstAlpha:T,opRgb:B,opAlpha:B,color:{r:Z[0],g:Z[1],b:Z[2],a:Z[3]}}}function O(f,T,B,Z,$=i.db.ADD,q=i.db.ADD,k=[0,0,0,0]){return{srcRgb:f,srcAlpha:T,dstRgb:B,dstAlpha:Z,opRgb:$,opAlpha:q,color:{r:k[0],g:k[1],b:k[2],a:k[3]}}}const A={face:i.LR.BACK,mode:i.Wf.CCW},g={face:i.LR.FRONT,mode:i.Wf.CCW},_=f=>f===r.Vr.Back?A:f===r.Vr.Front?g:null,a={zNear:0,zFar:1},M={r:!0,g:!0,b:!0,a:!0};function d(f){return P.intern(f)}function o(f){return D.intern(f)}function y(f){return N.intern(f)}function E(f){return C.intern(f)}function c(f){return R.intern(f)}function s(f){return W.intern(f)}function v(f){return K.intern(f)}function I(f){return F.intern(f)}function m(f){return Q.intern(f)}class l{constructor(T,B){this.makeKey=T,this.makeRef=B,this.interns=new Map}intern(T){if(!T)return null;const B=this.makeKey(T),Z=this.interns;return Z.has(B)||Z.set(B,this.makeRef(T)),Z.get(B)}}function p(f){return"["+f.join(",")+"]"}const P=new l(L,f=>X({__tag:"Blending"},f));function L(f){return f?p([f.srcRgb,f.srcAlpha,f.dstRgb,f.dstAlpha,f.opRgb,f.opAlpha,f.color.r,f.color.g,f.color.b,f.color.a]):null}const D=new l(b,f=>X({__tag:"Culling"},f));function b(f){return f?p([f.face,f.mode]):null}const N=new l(j,f=>X({__tag:"PolygonOffset"},f));function j(f){return f?p([f.factor,f.units]):null}const C=new l(U,f=>X({__tag:"DepthTest"},f));function U(f){return f?p([f.func]):null}const R=new l(S,f=>X({__tag:"StencilTest"},f));function S(f){return f?p([f.function.func,f.function.ref,f.function.mask,f.operation.fail,f.operation.zFail,f.operation.zPass]):null}const W=new l(G,f=>X({__tag:"DepthWrite"},f));function G(f){return f?p([f.zNear,f.zFar]):null}const K=new l(z,f=>X({__tag:"ColorWrite"},f));function z(f){return f?p([f.r,f.g,f.b,f.a]):null}const F=new l(w,f=>X({__tag:"StencilWrite"},f));function w(f){return f?p([f.mask]):null}const Q=new l(function H(f){return f?p([L(f.blending),b(f.culling),j(f.polygonOffset),U(f.depthTest),S(f.stencilTest),G(f.depthWrite),z(f.colorWrite),w(f.stencilWrite)]):null},f=>({blending:d(f.blending),culling:o(f.culling),polygonOffset:y(f.polygonOffset),depthTest:E(f.depthTest),stencilTest:c(f.stencilTest),depthWrite:s(f.depthWrite),colorWrite:v(f.colorWrite),stencilWrite:I(f.stencilWrite)}));class se{constructor(T){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=T}setPipeline(T){(this._pipelineInvalid||T!==this._pipeline)&&(this._setBlending(T.blending),this._setCulling(T.culling),this._setPolygonOffset(T.polygonOffset),this._setDepthTest(T.depthTest),this._setStencilTest(T.stencilTest),this._setDepthWrite(T.depthWrite),this._setColorWrite(T.colorWrite),this._setStencilWrite(T.stencilWrite),this._pipeline=T),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(T){this._blending=this._setSubState(T,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(T){this._culling=this._setSubState(T,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(T){this._polygonOffset=this._setSubState(T,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(T){this._depthTest=this._setSubState(T,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(T){this._stencilTest=this._setSubState(T,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(T){this._depthWrite=this._setSubState(T,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(T){this._colorWrite=this._setSubState(T,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(T){this._stencilWrite=this._setSubState(T,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(T,B,Z,$){return(Z||T!==B)&&($(T),this._pipelineInvalid=!0),T}}}}]);