"use strict";(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[4037],{7848:(ue,H,b)=>{b.d(H,{ym:()=>f,RF:()=>m,vY:()=>W,J9:()=>p,U1:()=>M,Ie:()=>v,G6:()=>z});var S=b(62208),g=b(91179);const U=(r,t,i)=>[t,i],L=(r,t,i)=>[t,i,r[2]],O=(r,t,i)=>[t,i,r[2],r[3]];function W(r){return r?{originPosition:"upper-left"===r.originPosition?"upperLeft":"lower-left"===r.originPosition?"lowerLeft":r.originPosition,scale:r.tolerance?[r.tolerance,r.tolerance]:[1,1],translate:(0,S.pC)(r.extent)?[r.extent.xmin,r.extent.ymax]:[0,0]}:null}function k({scale:r,translate:t},i){return Math.round((i-t[0])/r[0])}function P({scale:r,translate:t},i){return Math.round((t[1]-i)/r[1])}function j(r,t,i){const l=[];let c,h,y,C;for(let T=0;T<i.length;T++){const w=i[T];T>0?(y=k(r,w[0]),C=P(r,w[1]),y===c&&C===h||(l.push(t(w,y-c,C-h)),c=y,h=C)):(c=k(r,w[0]),h=P(r,w[1]),l.push(t(w,c,h)))}return l.length>0?l:null}function D({scale:r,translate:t},i){return i*r[0]+t[0]}function E({scale:r,translate:t},i){return t[1]-i*r[1]}function I(r,t,i){const l=new Array(i.length);if(!i.length)return l;const[c,h]=r.scale;let y=D(r,i[0][0]),C=E(r,i[0][1]);l[0]=t(i[0],y,C);for(let T=1;T<i.length;T++){const w=i[T];y+=w[0]*c,C-=w[1]*h,l[T]=t(w,y,C)}return l}function B(r,t,i){const l=new Array(i.length);for(let c=0;c<i.length;c++)l[c]=I(r,t,i[c]);return l}function m(r,t,i,l,c){return t.x=k(r,i.x),t.y=P(r,i.y),t!==i&&(l&&(t.z=i.z),c&&(t.m=i.m)),t}function f(r,t){return r&&t?(0,g.wp)(t)?m(r,{},t,!1,!1):(0,g.l9)(t)?function s(r,t,i,l,c){const h=function X(r,t,i,l){const c=[],h=i?l?O:L:l?L:U;for(let y=0;y<t.length;y++){const C=j(r,h,t[y]);C&&C.length>=2&&c.push(C)}return c.length?c:null}(r,i.paths,l,c);return h?(t.paths=h,t):null}(r,{},t,!1,!1):(0,g.oU)(t)?function u(r,t,i,l,c){const h=function ee(r,t,i,l){const c=[],h=i?l?O:L:l?L:U;for(let y=0;y<t.length;y++){const C=j(r,h,t[y]);C&&C.length>=3&&c.push(C)}return c.length?c:null}(r,i.rings,l,c);return h?(t.rings=h,t):null}(r,{},t,!1,!1):(0,g.aW)(t)?function o(r,t,i,l,c){return t.points=function Q(r,t,i,l){return j(r,i?l?O:L:l?L:U,t)}(r,i.points,l,c),t}(r,{},t,!1,!1):(0,g.YX)(t)?function a(r,t,i,l,c){return t.xmin=k(r,i.xmin),t.ymin=P(r,i.ymin),t.xmax=k(r,i.xmax),t.ymax=P(r,i.ymax),t!==i&&(l&&(t.zmin=i.zmin,t.zmax=i.zmax),c&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}(r,{},t,!1,!1):null:null}function p(r,t,i,l,c){return(0,S.pC)(i)&&(t.points=function _(r,t,i,l){return I(r,i?l?O:L:l?L:U,t)}(r,i.points,l,c)),t}function M(r,t,i,l,c){return(0,S.Wi)(i)||(t.x=D(r,i.x),t.y=E(r,i.y),t!==i&&(l&&(t.z=i.z),c&&(t.m=i.m))),t}function v(r,t,i,l,c){return(0,S.pC)(i)&&(t.rings=function ie(r,t,i,l){return B(r,i?l?O:L:l?L:U,t)}(r,i.rings,l,c)),t}function z(r,t,i,l,c){return(0,S.pC)(i)&&(t.paths=function ne(r,t,i,l){return B(r,i?l?O:L:l?L:U,t)}(r,i.paths,l,c)),t}},7547:(ue,H,b)=>{var S,g,N,U,L,O,W,Z,k,P,j,R,Q,ee,X,D,E,I,B,Y,_,ne,ie,$,te,ae,q,x,a,o,m,u,s,f,d,p,M,v,z,r,t,i,l,c,h,y,C,T,w,F,A,K,V,oe,le,G,J,re,ce,se,e;b.d(H,{v2:()=>N,UR:()=>D,zV:()=>X,RL:()=>S,Tx:()=>L,eZ:()=>W,DD:()=>Z,Ky:()=>k,TF:()=>B,Em:()=>Y,$y:()=>_,id:()=>$,zQ:()=>q,Dd:()=>x,AH:()=>g,kP:()=>d,sj:()=>p,r4:()=>z,JS:()=>c,bj:()=>h,CS:()=>y,Lh:()=>C,UX:()=>le,Qb:()=>G,RS:()=>re}),(e=S||(S={}))[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN",function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(g||(g={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(N||(N={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(U||(U={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(L||(L={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(O||(O={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(W||(W={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(Z||(Z={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(k||(k={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(P||(P={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(j||(j={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(R||(R={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(Q||(Q={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(ee||(ee={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(X||(X={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(D||(D={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(E||(E={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(I||(I={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(B||(B={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(Y||(Y={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(_||(_={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(ne||(ne={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(ie||(ie={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}($||($={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(te||(te={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(ae||(ae={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(q||(q={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(x||(x={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(a||(a={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(o||(o={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(m||(m={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(u||(u={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(s||(s={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(f||(f={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(d||(d={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(p||(p={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(M||(M={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(v||(v={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(z||(z={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(r||(r={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(t||(t={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(i||(i={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(l||(l={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(c||(c={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(h||(h={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(y||(y={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(C||(C={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(T||(T={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(w||(w={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(F||(F={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(A||(A={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(K||(K={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(V||(V={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(oe||(oe={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(le||(le={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(G||(G={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(J||(J={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(re||(re={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(se||(se={}))},2466:(ue,H,b)=>{b.r(H),b.d(H,{previewCIMSymbol:()=>ae});var X,x,S=b(15861),g=b(23841),N=b(91558),U=b(84792),L=b(10699),O=b(77275),W=b(91179),Z=b(84175),k=b(57052),P=b(32837),j=b(68937),R=b(80991),Q=b(56445),ee=b(37519);(x=X||(X={})).Legend="legend",x.Preview="preview";const D=(x,a,o)=>{if(x&&x.targetSize){let m;if(o){const u=Math.max(o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin);m=x.targetSize/(0,g.F2)(u)}else m=x.targetSize/a.referenceSize;return m}return x&&x.scaleFactor?x.scaleFactor:1},E={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};function _(x,a,o,m){let u,s;return"function"==typeof x.materialHash?(u=(0,x.materialHash)(a,o,m),s=(0,Z.S)(x.cim,x.materialOverrides)):(u=x.materialHash,s=x.cim),{analyzedCIM:s,hash:u}}var ne=b(71131),ie=b(6172);const $=new class I{constructor(a,o){this._spatialReference=a,this._avoidSDF=o,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new j.d,this._cimResourceManager=new k.Z,this._rasterizer=new P.Z(this._cimResourceManager)}rasterizeCIMSymbolAsync(a,o,m,u,s,f,d,p){var M=this;return(0,S.Z)(function*(){u=u||(o?null!=o.centroid?"esriGeometryPolygon":(0,W.Ji)(o.geometry):null)||function Y(x){if(!(x&&x.data&&x.data.symbol))return null;switch(x.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}(a);const v=yield M.analyzeCIMSymbol(a,o?function B(x){return(x?Object.keys(x):[]).map(a=>({name:a,alias:a,type:"string"==typeof x[a]?"esriFieldTypeString":"esriFieldTypeDouble"}))}(o.attributes):null,m,u,p);return M.rasterizeCIMSymbol(v,o,u,s,f,d)})()}analyzeCIMSymbol(a,o,m,u,s){var f=this;return(0,S.Z)(function*(){const d=[],p=o?{geometryType:u,spatialReference:f._spatialReference,fields:o}:null;let M;yield(0,Z.c)(a.data,p,f._cimResourceManager,d,f._avoidSDF),(0,L.k_)(s);for(const v of d)"CIMPictureMarker"!==v.cim.type&&"CIMPictureFill"!==v.cim.type&&"CIMPictureStroke"!==v.cim.type||(M||(M=[]),M.push(f._fetchPictureMarkerResource(v,s))),m&&"text"===v.type&&"string"==typeof v.text&&v.text.indexOf("[")>-1&&(v.text=(0,R.Qs)(m,v.text,v.cim.textCase));return M&&(yield Promise.all(M)),d})()}_fetchPictureMarkerResource(a,o){var m=this;return(0,S.Z)(function*(){const u=a.materialHash;if(!m._pictureMarkerCache.get(u)){const s=(yield(0,U.default)(a.cim.url,{responseType:"image",signal:o&&o.signal})).data;m._pictureMarkerCache.set(u,s)}})()}rasterizeCIMSymbol(a,o,m,u,s,f){const d=[];for(const p of a){u&&"function"==typeof u.scaleFactor&&(u.scaleFactor=u.scaleFactor(o,s,f));const M=this._getRasterizedResource(p,o,m,u,s,f);if(!M)continue;let v=0,z=M.anchorX||0,r=M.anchorY||0,t=!1,i=0,l=0;if("esriGeometryPoint"===m){const c=D(u,p,null);if(i=(0,R.hf)(p.offsetX,o,s,f)*c||0,l=(0,R.hf)(p.offsetY,o,s,f)*c||0,"marker"===p.type)v=(0,R.hf)(p.rotation,o,s,f)||0,t=!!p.rotateClockwise&&p.rotateClockwise;else if("text"===p.type){if(v=(0,R.hf)(p.angle,o,s,f)||0,void 0!==p.horizontalAlignment)switch(p.horizontalAlignment){case"left":z=-.5;break;case"right":z=.5;break;default:z=0}if(void 0!==p.verticalAlignment)switch(p.verticalAlignment){case"top":r=.5;break;case"bottom":r=-.5;break;case"baseline":r=-.25;break;default:r=0}}}null!=M&&d.push({angle:v,rotateClockWise:t,anchorX:z,anchorY:r,offsetX:i,offsetY:l,rasterizedResource:M})}return this.getSymbolImage(d)}getSymbolImage(a){const o=document.createElement("canvas"),m=o.getContext("2d");let u=0,s=0,f=0,d=0;const p=[];for(let r=0;r<a.length;r++){const t=a[r],i=t.rasterizedResource;if(!i)continue;const l=i.size,c=t.offsetX,h=t.offsetY,y=t.anchorX,C=t.anchorY,T=t.rotateClockWise||!1;let w=t.angle,F=(0,g.F2)(c)-l[0]*(.5+y),A=(0,g.F2)(h)-l[1]*(.5+C),K=F+l[0],V=A+l[1];if(w){T&&(w=-w);const G=Math.sin(w*Math.PI/180),J=Math.cos(w*Math.PI/180),re=F*J-A*G,ce=F*G+A*J,se=F*J-V*G,e=F*G+V*J,fe=K*J-V*G,me=K*G+V*J,he=K*J-A*G,ge=K*G+A*J;F=Math.min(re,se,fe,he),A=Math.min(ce,e,me,ge),K=Math.max(re,se,fe,he),V=Math.max(ce,e,me,ge)}u=F<u?F:u,s=A<s?A:s,f=K>f?K:f,d=V>d?V:d;const oe=m.createImageData(i.size[0],i.size[1]);oe.data.set(new Uint8ClampedArray(i.image.buffer)),p.push({offsetX:c,offsetY:h,rotateClockwise:T,angle:w,rasterizedImage:oe,anchorX:y,anchorY:C})}o.width=f-u,o.height=d-s;const M=-u,v=d;for(let r=0;r<p.length;r++){const t=p[r],i=this._imageDataToCanvas(t.rasterizedImage),h=M-t.rasterizedImage.width*(.5+t.anchorX),y=v-t.rasterizedImage.height*(.5-t.anchorY);if(t.angle){const C=(360-t.angle)*Math.PI/180;m.save(),m.translate((0,g.F2)(t.offsetX),-(0,g.F2)(t.offsetY)),m.translate(M,v),m.rotate(C),m.translate(-M,-v),m.drawImage(i,h,y),m.restore()}else m.drawImage(i,h+(0,g.F2)(t.offsetX),y-(0,g.F2)(t.offsetY))}const z=new ee.e({x:M/o.width-.5,y:v/o.height-.5});return{imageData:0!==o.width&&0!==o.height?m.getImageData(0,0,o.width,o.height):m.createImageData(1,1),anchorPosition:z}}_imageDataToCanvas(a){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const o=this._imageDataCanvas,m=o.getContext("2d");return o.width=a.width,o.height=a.height,m.putImageData(a,0,0),o}_imageTo32Array(a,o,m,u){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const s=this._imageDataCanvas,f=s.getContext("2d");if(s.width=o,s.height=m,f.drawImage(a,0,0,o,m),u){f.save();const d=new N.Z(u);f.fillStyle=d.toHex(),f.globalCompositeOperation="multiply",f.fillRect(0,0,o,m),f.globalCompositeOperation="destination-atop",f.drawImage(a,0,0,o,m),f.restore()}return new Uint32Array(f.getImageData(0,0,o,m).data.buffer)}_getRasterizedResource(a,o,m,u,s,f){let d,p,M,v,z=null,r=null;if("esriGeometryPolyline"===m||"esriGeometryPolygon"===m){const i=u&&u.style?u.style:X.Legend,l="esriGeometryPolyline"===m?E.stroke[i]:E.fill[i];if("line"===a.type){if("CIMSolidStroke"!==a.cim.type){if("CIMPictureStroke"===a.cim.type){const c=(0,R.hf)(a.width,o,s,f),h=(0,R.hf)(a.color,o,s,f),{image:y,width:C,height:T}=this._getPictureResource(a,c,h);return this._rasterizePictureResource(a,y,C,T,l,c)}return null}({analyzedCIM:d,hash:M}=_(a,o,s,f)),p=this._embedCIMLayerInVectorMarker(d,l)}else if("marker"===a.type){if("CIMPictureMarker"===a.cim.type){const c=(0,R.hf)(a.size,o,s,f),h=(0,R.hf)(a.color,o,s,f),{image:y,width:C,height:T}=this._getPictureResource(a,c,h);return this._rasterizePictureResource(a,y,C,T,l,c)}if("CIMVectorMarker"!==a.cim.type)return null;a.cim.offsetX=(0,R.hf)(a.offsetX,o,s,f),a.cim.offsetY=(0,R.hf)(a.offsetY,o,s,f),a.cim.rotation=(0,R.hf)(a.rotation,o,s,f),a.cim.markerPlacement=a.markerPlacement,({analyzedCIM:d}=_(a,o,s,f)),M=(0,O.hP)(JSON.stringify(d)).toString(),p=this._embedCIMLayerInVectorMarker(d,l),z=(0,R.hf)(a.size,o,s,f),r=a.path}else{if("text"===a.type)return null;if("fill"===a.type){if("CIMHatchFill"===a.cim.type||"CIMVectorMarker"===a.cim.type||"CIMPictureMarker"===a.cim.type||"CIMPictureFill"===a.cim.type){const c=a.cim.size||a.cim.height;let h,y,C;if("CIMPictureMarker"===a.cim.type||"CIMPictureFill"===a.cim.type)({image:h,width:y,height:C}=this._getPictureResource(a,c,(0,R.hf)(a.color,o,s,f)));else{({analyzedCIM:d,hash:M}=_(a,o,s,f));const T=this._rasterizer.rasterizeJSONResource({cim:d,type:a.type,url:a.url,mosaicHash:M,size:c,path:r},1,this._avoidSDF);h=T.image,y=T.size[0],C=T.size[1]}return this._rasterizePictureResource(a,h,y,C,l,null)}if("CIMSolidFill"!==a.cim.type)return null;({analyzedCIM:d,hash:M}=_(a,o,s,f)),p=this._embedCIMLayerInVectorMarker(d,l)}}}else{if("text"===a.type)return v=this._rasterizeTextResource(a,o,u,s,f),v;({analyzedCIM:d,hash:M}=_(a,o,s,f));const i=D(u,a,null);if("CIMPictureMarker"===a.cim.type){const l=(0,R.hf)(a.size,o,s,f)*i,{image:c,width:h,height:y}=this._getPictureResource(a,l,(0,R.hf)(a.color,o,s,f));return v={image:c,size:[h,y],sdf:!1,simplePattern:!1,anchorX:a.anchorPoint?a.anchorPoint.x:0,anchorY:a.anchorPoint?a.anchorPoint.y:0},v}(0,Q.FW)(d,i,{preserveOutlineWidth:!1}),p=d}M+=m,u&&(M+=JSON.stringify(u));const t=this._resourceCache;return t.has(M)?t.get(M):(v=this._rasterizer.rasterizeJSONResource({cim:p,type:a.type,url:a.url,mosaicHash:M,size:z,path:r},window.devicePixelRatio||1,this._avoidSDF),t.set(M,v),v)}_rasterizeTextResource(a,o,m,u,s){const f=D(m,a,null),d=(0,R.hf)(a.text,o,u,s);if(!d||0===d.length)return null;const p=(0,R.hf)(a.fontName,o,u,s),M=(0,R.hf)(a.style,o,u,s),v=(0,R.hf)(a.weight,o,u,s),z=(0,R.hf)(a.decoration,o,u,s),r=(0,R.hf)(a.size,o,u,s)*f,t=(0,R.hf)(a.horizontalAlignment,o,u,s),i=(0,R.hf)(a.verticalAlignment,o,u,s),l=(0,R.nn)((0,R.hf)(a.color,o,u,s)),c=(0,R.nn)((0,R.hf)(a.outlineColor,o,u,s)),h={color:l,size:r,horizontalAlignment:t,verticalAlignment:i,font:{family:p,style:M,weight:v,decoration:z},halo:{size:(0,R.hf)(a.outlineSize,o,u,s)||0,color:c,style:M},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(d,h)}_rasterizePictureResource(a,o,m,u,s,f){const d=document.createElement("canvas"),p=d.getContext("2d");d.height=(0,g.F2)(Math.max(s.frame.ymax-s.frame.ymin,f)),d.width=(0,g.F2)(s.frame.xmax-s.frame.xmin);const M=p.createImageData(m,u);M.data.set(new Uint8ClampedArray(o.buffer));const v=this._imageDataToCanvas(M),z=p.createPattern(v,"repeat"),r=Math.cos((-a.cim.rotation||0)*Math.PI/180),t=Math.sin((-a.cim.rotation||0)*Math.PI/180);z.setTransform({m11:r,m12:t,m21:-t,m22:r,m41:(0,g.F2)(a.cim.offsetX)||0,m42:(0,g.F2)(a.cim.offsetY)||0});const i=s.canvasPaths;let l,c,h;(0,W.oU)(i)?(l=i.rings,p.fillStyle=z,c=p.fill,h=["evenodd"]):(0,W.l9)(i)&&(l=i.paths,p.strokeStyle=z,p.lineWidth=f,c=p.stroke,l[0][0][1]=d.height/2,l[0][1][1]=d.height/2),p.beginPath();for(const T of l){const w=T?T.length:0;if(w>1){let F=T[0];p.moveTo((0,g.F2)(F[0]),(0,g.F2)(F[1]));for(let A=1;A<w;++A)F=T[A],p.lineTo((0,g.F2)(F[0]),(0,g.F2)(F[1]));p.closePath()}}c.apply(p,h);const y=p.getImageData(0,0,d.width,d.height),C=new Uint8Array(y.data);return{size:[d.width,d.height],image:new Uint32Array(C.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(a,o,m){const u=this._pictureMarkerCache.get(a.materialHash);if(!u)return null;const s=u.height/u.width,f=o?s>1?(0,g.F2)(o):(0,g.F2)(o)/s:u.width,d=o?s>1?(0,g.F2)(o)*s:(0,g.F2)(o):u.height;return{image:this._imageTo32Array(u,f,d,m),width:f,height:d}}_embedCIMLayerInVectorMarker(a,o){const m=(0,W.oU)(o.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",u=o.frame;return{type:"CIMVectorMarker",frame:u,size:u.ymax-u.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:o.geometry,symbol:{type:m,symbolLayers:[a]}}]}}}(null,!0),te=ne.b_.maxSize;function ae(x){return q.apply(this,arguments)}function q(){return q=(0,S.Z)(function*(x,a={}){const{size:o,maxSize:m,node:u,opacity:s}=a,f=a.cimOptions||a,{feature:d,fieldMap:p,geometryType:M,style:v}=f,z=(0,Q.kW)(x),r="number"==typeof o?o:null,t=Math.min(null!=r?r:z,null!=m?m:(0,g.Wz)(te));t!==z&&(x=x.clone(),(0,Q.PI)(x,t,{preserveOutlineWidth:!0}));let i=3;x&&x.data&&x.data.symbol&&"CIMPointSymbol"!==x.data.symbol.type&&(i=1);const l=yield $.rasterizeCIMSymbolAsync(x,d,p,M,{scaleFactor:i,style:v}),c=document.createElement("canvas");c.width=l.imageData.width,c.height=l.imageData.height,c.getContext("2d").putImageData(l.imageData,0,0);let h=c.width/i,y=c.height/i;if(null!=o&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale))){const w=h/y;h=w<=1?Math.ceil(t*w):t,y=w<=1?t:Math.ceil(t/w)}const C=new Image(h,y);C.src=c.toDataURL(),null!=s&&(C.style.opacity=`${s}`);let T=C;return null!=a.effectView&&(T=(0,ie.w)([[{shape:{type:"image",x:0,y:0,width:h,height:y,src:C.src},fill:null,stroke:null,offset:[0,0]}]],[h,y],{effectView:a.effectView})),u&&u.appendChild(T),T}),q.apply(this,arguments)}},61261:(ue,H,b)=>{var S,g,P;function N(P){switch(P){case"left":return S.Left;case"right":return S.Right;case"center":case"justify":return S.Center}}function U(P){switch(P){case"top":return g.Top;case"middle":return g.Center;case"baseline":return g.Baseline;case"bottom":return g.Bottom}}function L(P){switch(P){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[S.Right,g.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[S.Center,g.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[S.Left,g.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[S.Right,g.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[S.Center,g.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[S.Left,g.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[S.Right,g.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[S.Center,g.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[S.Left,g.Top];default:return console.debug(`Found invalid placement type ${P}`),[S.Center,g.Center]}}function O(P){switch(P){case S.Right:return-1;case S.Center:return 0;case S.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${P}`),0}}function W(P){switch(P){case g.Top:return 1;case g.Center:return 0;case g.Bottom:case g.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${P}`),0}}function Z(P){switch(P){case"left":return S.Left;case"right":return S.Right;case"center":case"justify":return S.Center}}function k(P){switch(P){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}b.d(H,{M7:()=>S,TR:()=>g,qv:()=>L,Hd:()=>Z,kH:()=>N,g:()=>O,b7:()=>U,tf:()=>W,NS:()=>k}),(P=S||(S={}))[P.Left=-1]="Left",P[P.Center=0]="Center",P[P.Right=1]="Right",function(P){P[P.Top=1]="Top",P[P.Center=0]="Center",P[P.Bottom=-1]="Bottom",P[P.Baseline=2]="Baseline"}(g||(g={}))},39351:(ue,H,b)=>{b.d(H,{xl:()=>M,lK:()=>t,_5:()=>p,pU:()=>v,aK:()=>z,eF:()=>ne,Uh:()=>ce,_6:()=>he,Tz:()=>e,CQ:()=>se,oK:()=>fe,e0:()=>me,SD:()=>ge,XJ:()=>oe,$0:()=>j,iV:()=>h,Zd:()=>c,Ex:()=>Y,uG:()=>l,Jc:()=>T,xm:()=>R,m4:()=>i,MI:()=>re,AI:()=>N,Ip:()=>le,ru:()=>L,fL:()=>V,iJ:()=>q,nM:()=>x,Ij:()=>a,f2:()=>o,Ic:()=>ae,Al:()=>te,Xj:()=>m,QU:()=>u,Jw:()=>s,kF:()=>f,yP:()=>d,D3:()=>$,Iw:()=>_,tQ:()=>C,I_:()=>O,a:()=>A,CU:()=>F,V4:()=>w});const N=1e-30,L=4294967295,O=512,j=8,R=29,Y=24,_=8,ne={metrics:{width:15,height:17,left:0,top:-7,advance:14}},$=0,te=0,ae=0,q=1,x=2,a=3,o=4,m=12,u=5,s=6,f=5,d=6,p=0,M=1,v=2,z=3,t=4,i=2,l=1,c=2,h=4,C=1.05,T=6,w=5,F=6,A=1.15,V=2,oe=8,le=500,re=10,ce=2,se=0,e=1,fe=4,me=8,he=4,ge=1},5254:(ue,H,b)=>{b.d(H,{UJ:()=>ee,Jz:()=>X,Au:()=>R});const S=new Float32Array(1);function R(I){return[255&I,(65280&I)>>>8,(16711680&I)>>>16,(4278190080&I)>>>24]}function ee(I,B){return 65535&I|B<<16}function X(I,B,Y,_){return 255&I|(255&B)<<8|(255&Y)<<16|_<<24}new Uint32Array(S.buffer)}}]);