"use strict";var Xe=Object.defineProperty,Qe=Object.defineProperties,ke=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable,me=(ot,N,u)=>N in ot?Xe(ot,N,{enumerable:!0,configurable:!0,writable:!0,value:u}):ot[N]=u,$t=(ot,N)=>{for(var u in N||(N={}))qe.call(N,u)&&me(ot,u,N[u]);if(de)for(var u of de(N))tn.call(N,u)&&me(ot,u,N[u]);return ot},Ht=(ot,N)=>Qe(ot,ke(N));(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[5678],{11915:(ot,N,u)=>{u.d(N,{e:()=>I});var D,F,b={exports:{}};D=b,void 0!==(F=function(){function Q(n,i,a){a=a||2;var l,c,p,g,C,j,X,ft=i&&i.length,st=ft?i[0]*a:n.length,Y=ct(n,0,st,a,!0),U=[];if(!Y||Y.next===Y.prev)return U;if(ft&&(Y=function R(n,i,a,l){var c,p,g,C=[];for(c=0,p=i.length;c<p;c++)(g=ct(n,i[c]*l,c<p-1?i[c+1]*l:n.length,l,!1))===g.next&&(g.steiner=!0),C.push(vt(g));for(C.sort(E),c=0;c<C.length;c++)a=G(a=d(C[c],a),a.next);return a}(n,i,Y,a)),n.length>80*a){l=p=n[0],c=g=n[1];for(var Z=a;Z<st;Z+=a)(C=n[Z])<l&&(l=C),(j=n[Z+1])<c&&(c=j),C>p&&(p=C),j>g&&(g=j);X=0!==(X=Math.max(p-l,g-c))?1/X:0}return z(Y,U,a,l,c,X),U}function ct(n,i,a,l,c){var p,g;if(c===Mt(n,i,a,l)>0)for(p=i;p<a;p+=l)g=lt(p,n[p],n[p+1],g);else for(p=a-l;p>=i;p-=l)g=lt(p,n[p],n[p+1],g);if(g&&Ot(g,g.next)){var C=g.next;mt(g),g=C}return g}function G(n,i){if(!n)return n;i||(i=n);var a,l=n;do{if(a=!1,l.steiner||!Ot(l,l.next)&&0!==$(l.prev,l,l.next))l=l.next;else{var c=l.prev;if(mt(l),(l=i=c)===l.next)break;a=!0}}while(a||l!==i);return i}function z(n,i,a,l,c,p,g){if(n){!g&&p&&function K(n,i,a,l){var c=n;do{null===c.z&&(c.z=V(c.x,c.y,i,a,l)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==n);c.prevZ.nextZ=null,c.prevZ=null,function at(n){var i,a,l,c,p,g,C,j,X=1;do{for(a=n,n=null,p=null,g=0;a;){for(g++,l=a,C=0,i=0;i<X&&(C++,l=l.nextZ);i++);for(j=X;C>0||j>0&&l;)0!==C&&(0===j||!l||a.z<=l.z)?(c=a,a=a.nextZ,C--):(c=l,l=l.nextZ,j--),p?p.nextZ=c:n=c,c.prevZ=p,p=c;a=l}p.nextZ=null,X*=2}while(g>1)}(c)}(n,l,c,p);for(var C,j,X=n;n.prev!==n.next;)if(C=n.prev,j=n.next,p?H(n,l,c,p):S(n))i.push(C.i/a),i.push(n.i/a),i.push(j.i/a),mt(n),n=j.next,X=j.next;else if((n=j)===X){g?1===g?z(n=P(G(n),i,a),i,a,l,c,p,2):2===g&&B(n,i,a,l,c,p):z(G(n),i,a,l,c,p,1);break}}}function S(n){var i=n.prev,a=n,l=n.next;if($(i,a,l)>=0)return!1;for(var c=n.next.next;c!==n.prev;){if(ht(i.x,i.y,a.x,a.y,l.x,l.y,c.x,c.y)&&$(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function H(n,i,a,l){var c=n.prev,p=n,g=n.next;if($(c,p,g)>=0)return!1;for(var X=c.x>p.x?c.x>g.x?c.x:g.x:p.x>g.x?p.x:g.x,ft=c.y>p.y?c.y>g.y?c.y:g.y:p.y>g.y?p.y:g.y,st=V(c.x<p.x?c.x<g.x?c.x:g.x:p.x<g.x?p.x:g.x,c.y<p.y?c.y<g.y?c.y:g.y:p.y<g.y?p.y:g.y,i,a,l),Y=V(X,ft,i,a,l),U=n.prevZ,Z=n.nextZ;U&&U.z>=st&&Z&&Z.z<=Y;){if(U!==n.prev&&U!==n.next&&ht(c.x,c.y,p.x,p.y,g.x,g.y,U.x,U.y)&&$(U.prev,U,U.next)>=0||(U=U.prevZ,Z!==n.prev&&Z!==n.next&&ht(c.x,c.y,p.x,p.y,g.x,g.y,Z.x,Z.y)&&$(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;U&&U.z>=st;){if(U!==n.prev&&U!==n.next&&ht(c.x,c.y,p.x,p.y,g.x,g.y,U.x,U.y)&&$(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;Z&&Z.z<=Y;){if(Z!==n.prev&&Z!==n.next&&ht(c.x,c.y,p.x,p.y,g.x,g.y,Z.x,Z.y)&&$(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function P(n,i,a){var l=n;do{var c=l.prev,p=l.next.next;!Ot(c,p)&&Wt(c,l,l.next,p)&&dt(c,p)&&dt(p,c)&&(i.push(c.i/a),i.push(l.i/a),i.push(p.i/a),mt(l),mt(l.next),l=n=p),l=l.next}while(l!==n);return G(l)}function B(n,i,a,l,c,p){var g=n;do{for(var C=g.next.next;C!==g.prev;){if(g.i!==C.i&&Dt(g,C)){var j=Et(g,C);return g=G(g,g.next),j=G(j,j.next),z(g,i,a,l,c,p),void z(j,i,a,l,c,p)}C=C.next}g=g.next}while(g!==n)}function E(n,i){return n.x-i.x}function T(n){if(n.next.prev===n)return n;let i=n;for(;;){const a=i.next;if(a.prev===i||a===i||a===n)break;i=a}return i}function d(n,i){var a=function v(n,i){var a,l=i,c=n.x,p=n.y,g=-1/0;do{if(p<=l.y&&p>=l.next.y&&l.next.y!==l.y){var C=l.x+(p-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(C<=c&&C>g){if(g=C,C===c){if(p===l.y)return l;if(p===l.next.y)return l.next}a=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!a)return null;if(c===g)return a;var j,X=a,ft=a.x,st=a.y,Y=1/0;l=a;do{c>=l.x&&l.x>=ft&&c!==l.x&&ht(p<st?c:g,p,ft,st,p<st?g:c,p,l.x,l.y)&&(j=Math.abs(p-l.y)/(c-l.x),dt(l,n)&&(j<Y||j===Y&&(l.x>a.x||l.x===a.x&&L(a,l)))&&(a=l,Y=j)),l=l.next}while(l!==X);return a}(n,i);if(!a)return i;var l=Et(a,n),c=G(a,a.next);let p=T(l);return G(p,p.next),c=T(c),T(i===a?c:i)}function L(n,i){return $(n.prev,n,i.prev)<0&&$(i.next,n,n.next)<0}function V(n,i,a,l,c){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*c)|n<<8))|n<<4))|n<<2))|n<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-l)*c)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function vt(n){var i=n,a=n;do{(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next}while(i!==n);return a}function ht(n,i,a,l,c,p,g,C){return(c-g)*(i-C)-(n-g)*(p-C)>=0&&(n-g)*(l-C)-(a-g)*(i-C)>=0&&(a-g)*(p-C)-(c-g)*(l-C)>=0}function Dt(n,i){return n.next.i!==i.i&&n.prev.i!==i.i&&!function Gt(n,i){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==i.i&&a.next.i!==i.i&&Wt(a,a.next,n,i))return!0;a=a.next}while(a!==n);return!1}(n,i)&&(dt(n,i)&&dt(i,n)&&function Jt(n,i){var a=n,l=!1,c=(n.x+i.x)/2,p=(n.y+i.y)/2;do{a.y>p!=a.next.y>p&&a.next.y!==a.y&&c<(a.next.x-a.x)*(p-a.y)/(a.next.y-a.y)+a.x&&(l=!l),a=a.next}while(a!==n);return l}(n,i)&&($(n.prev,n,i.prev)||$(n,i.prev,i))||Ot(n,i)&&$(n.prev,n,n.next)>0&&$(i.prev,i,i.next)>0)}function $(n,i,a){return(i.y-n.y)*(a.x-i.x)-(i.x-n.x)*(a.y-i.y)}function Ot(n,i){return n.x===i.x&&n.y===i.y}function Wt(n,i,a,l){var c=Tt($(n,i,a)),p=Tt($(n,i,l)),g=Tt($(a,l,n)),C=Tt($(a,l,i));return c!==p&&g!==C||!(0!==c||!Pt(n,a,i))||!(0!==p||!Pt(n,l,i))||!(0!==g||!Pt(a,n,l))||!(0!==C||!Pt(a,i,l))}function Pt(n,i,a){return i.x<=Math.max(n.x,a.x)&&i.x>=Math.min(n.x,a.x)&&i.y<=Math.max(n.y,a.y)&&i.y>=Math.min(n.y,a.y)}function Tt(n){return n>0?1:n<0?-1:0}function dt(n,i){return $(n.prev,n,n.next)<0?$(n,i,n.next)>=0&&$(n,n.prev,i)>=0:$(n,i,n.prev)<0||$(n,n.next,i)<0}function Et(n,i){var a=new _t(n.i,n.x,n.y),l=new _t(i.i,i.x,i.y),c=n.next,p=i.prev;return n.next=i,i.prev=n,a.next=c,c.prev=a,l.next=a,a.prev=l,p.next=l,l.prev=p,l}function lt(n,i,a,l){var c=new _t(n,i,a);return l?(c.next=l.next,c.prev=l,l.next.prev=c,l.next=c):(c.prev=c,c.next=c),c}function mt(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function _t(n,i,a){this.i=n,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mt(n,i,a,l){for(var c=0,p=i,g=a-l;p<a;p+=l)c+=(n[g]-n[p])*(n[p+1]+n[g+1]),g=p;return c}return Q.deviation=function(n,i,a,l){var c=i&&i.length,g=Math.abs(Mt(n,0,c?i[0]*a:n.length,a));if(c)for(var C=0,j=i.length;C<j;C++)g-=Math.abs(Mt(n,i[C]*a,C<j-1?i[C+1]*a:n.length,a));var st=0;for(C=0;C<l.length;C+=3){var Y=l[C]*a,U=l[C+1]*a,Z=l[C+2]*a;st+=Math.abs((n[Y]-n[Z])*(n[U+1]-n[Y+1])-(n[Y]-n[U])*(n[Z+1]-n[Y+1]))}return 0===g&&0===st?0:Math.abs((st-g)/g)},Q.flatten=function(n){for(var i=n[0][0].length,a={vertices:[],holes:[],dimensions:i},l=0,c=0;c<n.length;c++){for(var p=0;p<n[c].length;p++)for(var g=0;g<i;g++)a.vertices.push(n[c][p][g]);c>0&&a.holes.push(l+=n[c-1].length)}return a},Q}())&&(D.exports=F);const I=b.exports},61751:(ot,N,u)=>{u.d(N,{Z:()=>E});var P,D=u(17626),_=u(86810),F=u(58817),b=u(63290),I=u(77712),Q=u(66656),ct=u(76898),G=u(90912),z=u(45348),S=u(27530),H=u(92529);const B=b.Z.getLogger("esri.geometry.support.MeshComponent");let R=P=class extends _.wq{constructor(T){super(T),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}static from(T){return(0,G.TJ)(P,T)}castFaces(T){return(0,H.X)(T,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},B)}castMaterial(T){return(0,G.TJ)(T&&"object"==typeof T&&("metallic"in T||"roughness"in T||"metallicRoughnessTexture"in T)?S.Z:z.Z,T)}clone(){return new P({faces:(0,F.d9)(this.faces),shading:this.shading,material:(0,F.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(T,d){const v={faces:(0,F.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(T,d):null,trustSourceNormals:this.trustSourceNormals};return new P(v)}};(0,D._)([(0,I.Cb)({json:{write:!0}})],R.prototype,"faces",void 0),(0,D._)([(0,Q.p)("faces")],R.prototype,"castFaces",null),(0,D._)([(0,I.Cb)({type:z.Z,json:{write:!0}})],R.prototype,"material",void 0),(0,D._)([(0,Q.p)("material")],R.prototype,"castMaterial",null),(0,D._)([(0,I.Cb)({type:String,json:{write:!0}})],R.prototype,"shading",void 0),(0,D._)([(0,I.Cb)({type:Boolean})],R.prototype,"trustSourceNormals",void 0),R=P=(0,D._)([(0,ct.j)("esri.geometry.support.MeshComponent")],R);const E=R},45348:(ot,N,u)=>{u.d(N,{Z:()=>B});var H,D=u(17626),_=u(91558),F=u(86810),b=u(62208),I=u(77712),z=(u(85931),u(8314),u(90912),u(76898)),S=u(1607);let P=H=class extends F.wq{constructor(R){super(R),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(R,E){const T=(0,b.pC)(R)?R.get(this):null;if(T)return T;const d=new H(this.clonePropertiesWithDeduplication(E));return(0,b.pC)(R)&&R.set(this,d),d}clonePropertiesWithDeduplication(R){return{color:(0,b.pC)(this.color)?this.color.clone():null,colorTexture:(0,b.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(R):null,normalTexture:(0,b.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(R):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided}}};(0,D._)([(0,I.Cb)({type:_.Z,json:{write:!0}})],P.prototype,"color",void 0),(0,D._)([(0,I.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"colorTexture",void 0),(0,D._)([(0,I.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"normalTexture",void 0),(0,D._)([(0,I.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaMode",void 0),(0,D._)([(0,I.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"alphaCutoff",void 0),(0,D._)([(0,I.Cb)({nonNullable:!0,json:{write:!0}})],P.prototype,"doubleSided",void 0),P=H=(0,D._)([(0,z.j)("esri.geometry.support.MeshMaterial")],P);const B=P},27530:(ot,N,u)=>{u.d(N,{Z:()=>B});var H,D=u(17626),_=u(91558),F=u(62208),b=u(77712),G=(u(85931),u(8314),u(90912),u(76898)),z=u(45348),S=u(1607);let P=H=class extends z.Z{constructor(R){super(R),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(R,E){const T=(0,F.pC)(R)?R.get(this):null;if(T)return T;const d=new H(this.clonePropertiesWithDeduplication(E));return(0,F.pC)(R)&&R.set(this,d),d}clonePropertiesWithDeduplication(R){return Ht($t({},super.clonePropertiesWithDeduplication(R)),{emissiveColor:(0,F.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,F.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(R):null,occlusionTexture:(0,F.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(R):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,F.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(R):null})}};(0,D._)([(0,b.Cb)({type:_.Z,json:{write:!0}})],P.prototype,"emissiveColor",void 0),(0,D._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"emissiveTexture",void 0),(0,D._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"occlusionTexture",void 0),(0,D._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"metallic",void 0),(0,D._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],P.prototype,"roughness",void 0),(0,D._)([(0,b.Cb)({type:S.Z,json:{write:!0}})],P.prototype,"metallicRoughnessTexture",void 0),P=H=(0,D._)([(0,G.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],P);const B=P},1607:(ot,N,u)=>{u.d(N,{Z:()=>T});var P,D=u(17626),F=(u(8314),u(86810)),b=u(77712),Q=(u(85931),u(90912)),ct=u(68653),G=u(76898),z=u(99433),S=u(29840),H=u(18605);const B=new WeakMap;let R=0,E=P=class extends F.wq{constructor(d){super(d),this.wrap="repeat"}get url(){return this._get("url")||null}set url(d){this._set("url",d),d&&this._set("data",null)}get data(){return this._get("data")||null}set data(d){this._set("data",d),d&&this._set("url",null)}writeData(d,v,L,K){if(d instanceof HTMLImageElement){const at={type:"image-element",src:(0,S.t)(d.src,K),crossOrigin:d.crossOrigin};v[L]=at}else if(d instanceof HTMLCanvasElement){const at=d.getContext("2d").getImageData(0,0,d.width,d.height),V={type:"canvas-element",imageData:this._encodeImageData(at)};v[L]=V}else if(d instanceof HTMLVideoElement){const at={type:"video-element",src:(0,S.t)(d.src,K),autoplay:d.autoplay,loop:d.loop,muted:d.muted,crossOrigin:d.crossOrigin,preload:d.preload};v[L]=at}else{const at={type:"image-data",imageData:this._encodeImageData(d)};v[L]=at}}readData(d){switch(d.type){case"image-element":{const v=new Image;return v.src=d.src,v.crossOrigin=d.crossOrigin,v}case"canvas-element":{const v=this._decodeImageData(d.imageData),L=document.createElement("canvas");return L.width=v.width,L.height=v.height,L.getContext("2d").putImageData(v,0,0),L}case"image-data":return this._decodeImageData(d.imageData);case"video-element":{const v=document.createElement("video");return v.src=d.src,v.crossOrigin=d.crossOrigin,v.autoplay=d.autoplay,v.loop=d.loop,v.muted=d.muted,v.preload=d.preload,v}default:return}}get transparent(){const d=this.data,v=this.url;if(d instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(d.getContext("2d").getImageData(0,0,d.width,d.height));if(d instanceof ImageData)return this._imageDataContainsTransparent(d);if(v){const L=v.substr(v.length-4,4).toLowerCase(),K=v.substr(0,15).toLocaleLowerCase();if(".png"===L||"data:image/png;"===K)return!0}return!1}set transparent(d){null!=d?this._override("transparent",d):this._clearOverride("transparent")}get contentHash(){const d="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",v=(L="")=>`d:${L},t:${this.transparent},w:${d}`;return null!=this.url?v(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?v(this.data.src):(B.has(this.data)||B.set(this.data,++R),v(B.get(this.data))):v()}clone(){const d={url:this.url,data:this.data,wrap:this._cloneWrap()};return new P(d)}cloneWithDeduplication(d){const v=d.get(this);if(v)return v;const L=this.clone();return d.set(this,L),L}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(d){let v="";for(let L=0;L<d.data.length;L++)v+=String.fromCharCode(d.data[L]);return{data:btoa(v),width:d.width,height:d.height}}_decodeImageData(d){const v=atob(d.data),L=new Uint8ClampedArray(v.length);for(let K=0;K<v.length;K++)L[K]=v.charCodeAt(K);return(0,H.Jl)(L,d.width,d.height)}_imageDataContainsTransparent(d){for(let v=3;v<d.data.length;v+=4)if(255!==d.data[v])return!0;return!1}static from(d){return"string"==typeof d?new P({url:d}):d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof ImageData||d instanceof HTMLVideoElement?new P({data:d}):(0,Q.TJ)(P,d)}};(0,D._)([(0,b.Cb)({type:String,json:{write:S.w}})],E.prototype,"url",null),(0,D._)([(0,b.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,b.Cb)()],E.prototype,"data",null),(0,D._)([(0,z.c)("data")],E.prototype,"writeData",null),(0,D._)([(0,ct.r)("data")],E.prototype,"readData",null),(0,D._)([(0,b.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],E.prototype,"transparent",null),(0,D._)([(0,b.Cb)({json:{write:!0}})],E.prototype,"wrap",void 0),(0,D._)([(0,b.Cb)({readOnly:!0})],E.prototype,"contentHash",null),E=P=(0,D._)([(0,G.j)("esri.geometry.support.MeshTexture")],E);const T=E},92529:(ot,N,u)=>{u.d(N,{Q:()=>S,X:()=>P});var G,D=u(17626),_=u(86810),F=u(58817),b=u(63290),I=u(77712),Q=u(66656),ct=u(76898);const z=b.Z.getLogger("esri.geometry.support.MeshVertexAttributes");let S=G=class extends _.wq{constructor(E){super(E),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(E){return P(E,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},z)}castPosition(E){return E&&E instanceof Float32Array&&z.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),P(E,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},z)}castUv(E){return P(E,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},z)}castNormal(E){return P(E,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},z)}castTangent(E){return P(E,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},z)}clone(){const E={position:(0,F.d9)(this.position),uv:(0,F.d9)(this.uv),normal:(0,F.d9)(this.normal),tangent:(0,F.d9)(this.tangent),color:(0,F.d9)(this.color)};return new G(E)}clonePositional(){const E={position:(0,F.d9)(this.position),normal:(0,F.d9)(this.normal),tangent:(0,F.d9)(this.tangent),uv:this.uv,color:this.color};return new G(E)}};function H(E,T,d,v){const{loggerTag:L,stride:K}=T;return E.length%K!=0?(v.error(L,`Invalid array length, expected a multiple of ${K}`),new d([])):E}function P(E,T,d,v,L){if(!E)return E;if(E instanceof T)return H(E,v,T,L);for(const K of d)if(E instanceof K)return H(new T(E),v,T,L);if(Array.isArray(E))return H(new T(E),v,T,L);{const K=d.map(at=>`'${at.name}'`);return L.error(`Failed to set property, expected one of ${K}, but got ${E.constructor.name}`),new T([])}}function B(E,T,d){T[d]=function R(E){const T=new Array(E.length);for(let d=0;d<E.length;d++)T[d]=E[d];return T}(E)}(0,D._)([(0,I.Cb)({json:{write:B}})],S.prototype,"color",void 0),(0,D._)([(0,Q.p)("color")],S.prototype,"castColor",null),(0,D._)([(0,I.Cb)({nonNullable:!0,json:{write:B}})],S.prototype,"position",void 0),(0,D._)([(0,Q.p)("position")],S.prototype,"castPosition",null),(0,D._)([(0,I.Cb)({json:{write:B}})],S.prototype,"uv",void 0),(0,D._)([(0,Q.p)("uv")],S.prototype,"castUv",null),(0,D._)([(0,I.Cb)({json:{write:B}})],S.prototype,"normal",void 0),(0,D._)([(0,Q.p)("normal")],S.prototype,"castNormal",null),(0,D._)([(0,I.Cb)({json:{write:B}})],S.prototype,"tangent",void 0),(0,D._)([(0,Q.p)("tangent")],S.prototype,"castTangent",null),S=G=(0,D._)([(0,ct.j)("esri.geometry.support.MeshVertexAttributes")],S)},25678:(ot,N,u)=>{u.r(N),u.d(N,{meshFeatureSetFromJSON:()=>$e});var Et,t,D=u(88879),_=u(62208),F=u(2004),b=u(15861),I=u(17626),Q=u(26584),ct=u(80542),G=u(47996),z=u(63290),S=u(60330),H=u(10699),P=u(32917),B=u(77712),d=(u(85931),u(8314),u(90912),u(76898)),v=u(28093),L=u(21674),K=u(49672),at=u(37118),V=u(89586),vt=u(61751),ht=u(99746),Dt=u(92529),$=u(11915),Ot=u(25748),Wt=u(13757);function dt(t,r,e,o,s,h,f){s*=3;for(let m=0;m<h;++m){const y=t[r];o[s++]=y[0],o[s++]=y[1],o[s++]=f?y[2]:0,r+=e}return s/3}function Jt(t){return!(0,Ot.bu)(t,!1,!1)}(t=Et||(Et={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var lt=u(54614),mt=u(92545),_t=u(60853);const Mt=z.Z.getLogger("esri.geometry.support.meshUtils.centerAt");const p=(0,v.c)(),g=(0,v.c)();var C=u(21726);function X(){return X=(0,b.Z)(function*(t,r,e){const{loadGLTFMesh:o}=yield(0,H.Hl)(Promise.all([u.e(5268),u.e(9185)]).then(u.bind(u,29185)),e),s=yield st(r,e),h=o(new K.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),s.url,{resolveFile:ft(s),useTransform:!0,signal:(0,_.pC)(e)?e.signal:null});h.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:f,components:m}=yield h;t.vertexAttributes=f,t.components=m}),X.apply(this,arguments)}function ft(t){const r=(0,C.Yd)(t.url);return e=>{var o;const s=(0,C.PF)(e,r,r),h=s?s.replace(/^ *\.\//,""):null;return null!=(o=t.files.get(h))?o:e}}function st(t,r){return Y.apply(this,arguments)}function Y(){return Y=(0,b.Z)(function*(t,r){return t instanceof Blob?wt.fromBlob(t):"string"==typeof t?new wt(t):Array.isArray(t)?U(t,r):ve(t,r)}),Y.apply(this,arguments)}function U(t,r){return Z.apply(this,arguments)}function Z(){return Z=(0,b.Z)(function*(t,r){const e=new Map;let o=null;const s=yield(0,H.WW)(t.map(function(){var f=(0,b.Z)(function*(m){return{name:m.name,source:yield st(m instanceof Blob?m:m.source,r)}});return function(m){return f.apply(this,arguments)}}())),h=[];for(const f of s)f&&((0,H.Hc)(r)?f.source.dispose():h.push(f));(0,H.k_)(r);for(const{name:f,source:m}of h)((0,_.Wi)(o)||/\.(gltf|glb)/i.test(f))&&(o=m.url),e.set(f,m.url),m.files&&m.files.forEach((y,x)=>e.set(x,y));if((0,_.Wi)(o))throw new Q.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new wt(o,()=>h.forEach(({source:f})=>f.dispose()),e)}),Z.apply(this,arguments)}function ve(t,r){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,b.Z)(function*(t,r){const{default:e}=yield(0,H.Hl)(Promise.resolve().then(u.bind(u,84792)),r),o="string"==typeof t.multipart[0]?yield Promise.all(t.multipart.map(function(){var s=(0,b.Z)(function*(h){return(yield e(h,{responseType:"array-buffer"})).data});return function(h){return s.apply(this,arguments)}}())):t.multipart;return wt.fromBlob(new Blob(o))}),Vt.apply(this,arguments)}class wt{constructor(r,e=(()=>{}),o=new Map){this.url=r,this.dispose=e,this.files=o}static fromBlob(r){const e=URL.createObjectURL(r);return new wt(e,()=>URL.revokeObjectURL(e))}}var kt=u(30217),Yt=u(550),qt=u(43703),et=u(84161),Xt=u(12080),tt=u(65231);const xe=z.Z.getLogger("esri.geometry.support.meshUtils.offset");function te(t,r){if(t)for(let e=0;e<t.length;e+=3)for(let o=0;o<3;o++)t[e+o]+=r[o]}const Me=(0,v.c)(),ee=(0,qt.c)(),ne=(0,Yt.c)(),St={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function Bt(t,r,e){(function Re(t){for(let r=0;r<t.position.length;r+=3)t.position[r+2]+=.5})(t),function be(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];xt[0]=e[0],xt[4]=e[1],xt[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let s=0;s<3;s++)k[s]=t.position[o+s];(0,et.t)(k,k,xt);for(let s=0;s<3;s++)t.position[o+s]=k[s]}if(e[0]!==e[1]||e[1]!==e[2]){xt[0]=1/e[0],xt[4]=1/e[1],xt[8]=1/e[2];for(let o=0;o<t.normal.length;o+=3){for(let s=0;s<3;s++)k[s]=t.normal[o+s];(0,et.t)(k,k,xt),(0,et.n)(k,k);for(let s=0;s<3;s++)t.normal[o+s]=k[s]}}}(t,e&&e.size);const{vertexAttributes:o,transform:s}=(0,_t.w1)(t,r,e);return{vertexAttributes:new Dt.Q(Ht($t({},o),{uv:t.uv})),transform:s,components:[new vt.Z({faces:t.faces,material:e&&e.material||null})],spatialReference:r.spatialReference}}const Ie={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Le={south:0,east:1,north:2,west:3,up:4,down:5},k=(0,v.c)(),xt=(0,Yt.c)();var Ze=u(28347);const re=z.Z.getLogger("esri.geometry.support.meshUtils.rotate");function Lt(t,r,e,o=v.Z){if(!(0,_.Wi)(t)){(0,Ze.d)(Kt,(0,V.WH)(r),(0,V.ZZ)(r));for(let s=0;s<t.length;s+=e){for(let h=0;h<3;h++)Zt[h]=t[s+h]-o[h];(0,et.m)(Zt,Zt,Kt);for(let h=0;h<3;h++)t[s+h]=Zt[h]+o[h]}}}const Zt=(0,v.c)(),oe=(0,v.c)(),se=(0,V.Ue)(),Kt=(0,qt.c)(),ie=(0,Yt.c)(),ae=(0,v.c)(),le=z.Z.getLogger("esri.geometry.support.meshUtils.scale");function ce(t,r,e=v.Z){if(t)for(let o=0;o<t.length;o+=3){for(let s=0;s<3;s++)jt[s]=t[o+s]-e[s];(0,et.a)(jt,jt,r);for(let s=0;s<3;s++)t[o+s]=jt[s]+e[s]}}const jt=(0,v.c)(),ue=(0,v.c)(),pe=(0,v.c)();var gt;const ut=z.Z.getLogger("esri.geometry.Mesh");let it=gt=class extends((0,ct.p)(G.Z.LoadableMixin((0,S.v)(L.Z)))){constructor(t){super(t),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Dt.Q,this.type="mesh"}initialize(){((0,_.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.handles.add((0,P.YP)(()=>{var t;return{vertexAttributes:this.vertexAttributes,components:null==(t=this.components)?void 0:t.map(r=>r.clone()),transform:(0,_.pC)(this.transform)?this.transform.clone():null}},()=>this._set("external",null),{once:!0,sync:!0}))})}get hasExtent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const t=this.vertexAttributes.position,r=this.spatialReference;if(0===t.length||this.components&&0===this.components.length)return{extent:new F.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:r}),center:new K.Z({x:0,y:0,z:0,spatialReference:r})};const e=(0,_.pC)(this.transform)?this.transform.project(t,r):t;let o=1/0,s=1/0,h=1/0,f=-1/0,m=-1/0,y=-1/0,x=0,O=0,w=0;const M=e.length,A=1/(M/3);let W=0;for(;W<M;){const pt=e[W++],q=e[W++],nt=e[W++];o=Math.min(o,pt),s=Math.min(s,q),h=Math.min(h,nt),f=Math.max(f,pt),m=Math.max(m,q),y=Math.max(y,nt),x+=A*pt,O+=A*q,w+=A*nt}return{extent:new F.Z({xmin:o,ymin:s,zmin:h,xmax:f,ymax:m,zmax:y,spatialReference:r}),center:new K.Z({x,y:O,z:w,spatialReference:r})}}get anchor(){if((0,_.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);const t=this.boundingInfo;return new K.Z({x:t.center.x,y:t.center.y,z:t.extent.zmin,spatialReference:this.spatialReference})}get origin(){return(0,_.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(t){this.loaded?(this.components||(this.components=[]),this.components.push(vt.Z.from(t)),this.notifyChange("components")):ut.error("addComponent()","Mesh must be loaded before applying operations")}removeComponent(t){if(this.loaded){if(this.components){const r=this.components.indexOf(t);if(-1!==r)return this.components.splice(r,1),void this.notifyChange("components")}ut.error("removeComponent()","Provided component is not part of the list of components")}else ut.error("removeComponent()","Mesh must be loaded before applying operations")}rotate(t,r,e,o){return(0,V.uT)(Qt.x,t,Ut),(0,V.uT)(Qt.y,r,he),(0,V.uT)(Qt.z,e,fe),(0,V.qC)(Ut,he,Ut),(0,V.qC)(Ut,fe,Ut),function je(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position||0===r[3])return;const o=t.spatialReference;if((0,_.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&re.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const f=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function Ue(t,r,e){const o=(0,et.s)(Zt,e.x,e.y,e.z),s=(0,et.f)(Zt,o,t.origin);t.applyLocalInverse(s,oe),t.rotation=(0,V.qC)(t.rotation,r,(0,V.Ue)()),t.applyLocalInverse(s,s),(0,et.f)(s,s,oe),t.translation=(0,et.b)((0,v.c)(),t.translation,s)}(t.transform,r,f)}else{var h;const f=null!=(h=null==e?void 0:e.origin)?h:t.origin;(0,mt.h)(t.spatialReference,e)?function Fe(t,r,e){const o=t.spatialReference,s=(0,Xt.rS)(o),h=ae;(0,lt.KC)(e,h,s)||(0,lt.KC)(t.origin,h,s);const f=t.vertexAttributes.position,m=t.vertexAttributes.normal,y=t.vertexAttributes.tangent,x=new Float64Array(f.length),O=(0,_.pC)(m)?new Float32Array(m.length):null,w=(0,_.pC)(y)?new Float32Array(y.length):null;(0,lt.Bm)(s,h,Kt,s),(0,kt.f)(ie,Kt);const M=se;(0,et.t)((0,V.ZZ)(se),(0,V.ZZ)(r),ie),M[3]=r[3],(0,tt.XO)(f,o,x),(0,_.pC)(m)&&(0,tt.Iz)(m,f,x,o,O),(0,_.pC)(y)&&(0,tt.wi)(y,f,x,o,w),Lt(x,M,3,h),(0,tt.To)(x,f,o),(0,_.pC)(m)&&(Lt(O,M,3),(0,tt.Yk)(O,f,x,o,m)),(0,_.pC)(y)&&(Lt(w,M,4),(0,tt.M2)(w,f,x,o,y)),t.vertexAttributesChanged()}(t,r,f):function Se(t,r,e){const o=ae;if(!(0,lt.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,re.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}Lt(t.vertexAttributes.position,r,3,o),Lt(t.vertexAttributes.normal,r,3),Lt(t.vertexAttributes.tangent,r,4),t.vertexAttributesChanged()}(t,r,f)}}(this,Ut,o),this}offset(t,r,e,o){return this.loaded?(Nt[0]=t,Nt[1]=r,Nt[2]=e,function ye(t,r,e){t.vertexAttributes&&t.vertexAttributes.position&&((0,_.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&xe.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function Ce(t,r){const e=t.origin;t.origin=(0,et.b)((0,v.c)(),e,r)}(t.transform,r)):(0,mt.h)(t.spatialReference,e)?function Ee(t,r){const e=t.spatialReference,o=t.vertexAttributes.position,s=t.vertexAttributes.normal,h=t.vertexAttributes.tangent,f=new Float64Array(o.length),m=(0,_.pC)(s)?new Float32Array(s.length):null,y=(0,_.pC)(h)?new Float32Array(h.length):null,x=t.extent.center,O=Me;(0,lt.Bm)(e,[x.x,x.y,x.z],ee,(0,Xt.rS)(e)),(0,kt.f)(ne,ee),(0,et.t)(O,r,ne),(0,tt.XO)(o,e,f),(0,_.pC)(s)&&(0,tt.Iz)(s,o,f,e,m),(0,_.pC)(h)&&(0,tt.wi)(h,o,f,e,y),te(f,O),(0,tt.To)(f,o,e),(0,_.pC)(s)&&(0,tt.Yk)(m,o,f,e,s),(0,_.pC)(h)&&(0,tt.M2)(y,o,f,e,h),t.vertexAttributesChanged()}(t,r):function _e(t,r){te(t.vertexAttributes.position,r),t.vertexAttributesChanged()}(t,r))}(this,Nt,o),this):(ut.error("offset()","Mesh must be loaded before applying operations"),this)}scale(t,r){return this.loaded?(function We(t,r,e){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=t.spatialReference;if((0,_.pC)(t.transform)){var s;null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&le.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const h=null!=(s=null==e?void 0:e.origin)?s:t.transform.getOriginPoint(o);!function Be(t,r,e){const o=(0,et.s)(jt,e.x,e.y,e.z),s=(0,et.f)(jt,o,t.origin);t.applyLocalInverse(s,ue);const h=(0,et.a)((0,v.c)(),t.scale,r);t.scale=h,t.applyLocalInverse(s,s),(0,et.f)(s,s,ue),t.translation=(0,et.b)((0,v.c)(),t.translation,s)}(t.transform,r,h)}else{const h=(0,mt.h)(t.spatialReference,e),f=e&&e.origin||t.origin;h?function Ke(t,r,e){const o=t.spatialReference,s=(0,Xt.rS)(o),h=pe;(0,lt.KC)(e,h,s)||(0,lt.KC)(t.origin,h,s);const f=t.vertexAttributes.position,m=t.vertexAttributes.normal,y=t.vertexAttributes.tangent,x=new Float64Array(f.length),O=(0,_.pC)(m)?new Float32Array(m.length):null,w=(0,_.pC)(y)?new Float32Array(y.length):null;(0,tt.XO)(f,o,x),(0,_.pC)(m)&&(0,tt.Iz)(m,f,x,o,O),(0,_.pC)(y)&&(0,tt.wi)(y,f,x,o,w),ce(x,r,h),(0,tt.To)(x,f,o),(0,_.pC)(m)&&(0,tt.Yk)(O,f,x,o,m),(0,_.pC)(y)&&(0,tt.M2)(w,f,x,o,y),t.vertexAttributesChanged()}(t,r,f):function Ne(t,r,e){const o=pe;if(!(0,lt.KC)(e,o,t.spatialReference)){const s=t.origin;o[0]=s.x,o[1]=s.y,o[2]=s.z,le.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}ce(t.vertexAttributes.position,r,o),t.vertexAttributesChanged()}(t,r,f)}}(this,t,r),this):(ut.error("scale()","Mesh must be loaded before applying operations"),this)}centerAt(t,r){return this.loaded?(function n(t,r,e){var o;if(!t.vertexAttributes||!t.vertexAttributes.position)return;const s=null!=(o=null==e?void 0:e.origin)?o:t.origin;(0,_.pC)(t.transform)?(null!=(null==e?void 0:e.geographic)&&e.geographic!==t.transform.geographic&&Mt.warn(`Specifying the 'geographic' parameter (${e.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function i(t,r,e){const f=t.origin;t.origin=[f[0]+(r.x-e.x),f[1]+(r.y-e.y),f[2]+(r.hasZ&&e.hasZ?r.z-e.z:0)]}(t.transform,r,s)):(0,mt.h)(t.spatialReference,e)?function a(t,r,e){const o=(0,_t.FF)(t.vertexAttributes,e,{geographic:!0}),{position:s,normal:h,tangent:f}=(0,_t.iv)(o,r,{geographic:!0});t.vertexAttributes.position=s,t.vertexAttributes.normal=h,t.vertexAttributes.tangent=f,t.vertexAttributesChanged()}(t,r,s):function l(t,r,e){const o=g,s=p;if((0,lt.KC)(r,s,t.spatialReference)){if(!(0,lt.KC)(e,o,t.spatialReference)){const h=t.origin;o[0]=h.x,o[1]=h.y,o[2]=h.z,Mt.error(`Failed to project specified origin (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}(function c(t,r,e){if(t)for(let o=0;o<t.length;o+=3)for(let s=0;s<3;s++)t[o+s]+=r[s]-e[s]})(t.vertexAttributes.position,s,o),t.vertexAttributesChanged()}else Mt.error(`Failed to project centerAt location (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid})`)}(t,r,s)}(this,t,r),this):(ut.error("centerAt()","Mesh must be loaded before applying operations"),this)}load(t){return(0,_.pC)(this.external)&&this.addResolvingPromise(function j(t,r,e){return X.apply(this,arguments)}(this,this.external.source,t)),Promise.resolve(this)}clone(){const t=this.components?new Map:null,r=this.components?new Map:null,e={components:this.components?this.components.map(o=>o.cloneWithDeduplication(t,r)):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,_.pC)(this.transform)?this.transform.clone():null,external:(0,_.pC)(this.external)?{source:this.external.source,extent:(0,_.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new gt(e)}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var r=this;return(0,b.Z)(function*(){const{toBinaryGLTF:e}=yield u.e(7627).then(u.bind(u,57627));return e(r,t)})()}static createBox(t,r){if(!(t instanceof K.Z))return ut.error(".createBox()","expected location to be a Point instance"),null;const e=new gt(Bt(function Ae(){const{faceDescriptions:t,faceVertexOffsets:r,uvScales:e}=Ie,o=4*t.length,s=new Float64Array(3*o),h=new Float32Array(3*o),f=new Float32Array(2*o),m=new Uint32Array(2*t.length*3);let y=0,x=0,O=0,w=0;for(let M=0;M<t.length;M++){const A=t[M],W=y/3;for(const q of r)m[w++]=W+q;const pt=A.corners;for(let q=0;q<4;q++){const nt=pt[q];let J=0;f[O++]=.25*e[q][0]+A.uvOrigin[0],f[O++]=A.uvOrigin[1]-.25*e[q][1];for(let rt=0;rt<3;rt++)0!==A.axis[rt]?(s[y++]=.5*A.axis[rt],h[x++]=A.axis[rt]):(s[y++]=.5*nt[J++],h[x++]=0)}}return{position:s,normal:h,uv:f,faces:m}}(),t,r));return r&&r.imageFace&&"all"!==r.imageFace?function De(t,r){const e=t.components[0],o=e.faces,s=Le[r],h=6*s,f=new Uint32Array(6),m=new Uint32Array(o.length-6);let y=0,x=0;for(let O=0;O<o.length;O++)O>=h&&O<h+6?f[y++]=o[O]:m[x++]=o[O];if((0,_.pC)(t.vertexAttributes.uv)){const O=new Float32Array(t.vertexAttributes.uv),w=4*s*2,M=[0,1,1,1,1,0,0,0];for(let A=0;A<M.length;A++)O[w+A]=M[A];t.vertexAttributes.uv=O}return t.components=[new vt.Z({faces:f,material:e.material}),new vt.Z({faces:m})],t}(e,r.imageFace):e}static createSphere(t,r){return t instanceof K.Z?new gt(Bt(function Oe(t=0){const r=Math.round(8*2**t),e=2*r,o=(r-1)*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),f=new Float32Array(2*o),m=new Uint32Array((r-1)*e*2*3);let y=0,x=0,O=0,w=0;for(let M=0;M<=r;M++){const A=M/r*Math.PI+.5*Math.PI,W=Math.cos(A),pt=Math.sin(A);k[2]=pt;const q=0===M||M===r,nt=q?e-1:e;for(let J=0;J<=nt;J++){const rt=J/nt*2*Math.PI;k[0]=-Math.sin(rt)*W,k[1]=Math.cos(rt)*W;for(let Ct=0;Ct<3;Ct++)s[y]=.5*k[Ct],h[y]=k[Ct],++y;f[x++]=(J+(q?.5:0))/e,f[x++]=M/r,0!==M&&J!==e&&(M!==r&&(m[O++]=w,m[O++]=w+1,m[O++]=w-e),1!==M&&(m[O++]=w,m[O++]=w-e,m[O++]=w-e-1)),w++}}return{position:s,normal:h,uv:f,faces:m}}(r&&r.densificationFactor||0),t,r)):(ut.error(".createSphere()","expected location to be a Point instance"),null)}static createCylinder(t,r){return t instanceof K.Z?new gt(Bt(function Pe(t=0){const e=Math.round(16*2**t),o=4*(e+1)+2*e,s=new Float64Array(3*o),h=new Float32Array(3*o),f=new Float32Array(2*o),m=new Uint32Array(4*e*3);let y=0,x=0,O=0,w=0,M=0;for(let A=0;A<=5;A++){const W=0===A||5===A,pt=A<=1||A>=4,q=2===A||4===A,nt=W?e-1:e;for(let J=0;J<=nt;J++){const rt=J/nt*2*Math.PI,Ct=W?0:.5;k[0]=Ct*Math.sin(rt),k[1]=Ct*-Math.cos(rt),k[2]=A<=2?.5:-.5;for(let Ft=0;Ft<3;Ft++)s[y++]=k[Ft],h[x++]=pt?2===Ft?A<=1?1:-1:0:2===Ft?0:k[Ft]/Ct;f[O++]=(J+(W?.5:0))/e,f[O++]=A<=1?1*A/3:A<=3?1*(A-2)/3+1/3:1*(A-4)/3+2/3,q||0===A||J===e||(5!==A&&(m[w++]=M,m[w++]=M+1,m[w++]=M-e),1!==A&&(m[w++]=M,m[w++]=M-e,m[w++]=M-e-1)),M++}}return{position:s,normal:h,uv:f,faces:m}}(r&&r.densificationFactor||0),t,r)):(ut.error(".createCylinder()","expected location to be a Point instance"),null)}static createPlane(t,r){var e;if(!(t instanceof K.Z))return ut.error(".createPlane()","expected location to be a Point instance"),null;const o=null!=(e=null==r?void 0:r.facing)?e:"up",s=function Te(t,r){const e="number"==typeof r?r:null!=r?r.width:1,o="number"==typeof r?r:null!=r?r.height:1;switch(t){case"up":case"down":return{width:e,depth:o};case"north":case"south":return{width:e,height:o};case"east":case"west":return{depth:e,height:o}}}(o,null==r?void 0:r.size);return new gt(Bt(function we(t){const r=St.facingAxisOrderSwap[t],e=St.position,o=St.normal,s=new Float64Array(e.length),h=new Float32Array(o.length);let f=0;for(let m=0;m<4;m++){const y=f;for(let x=0;x<3;x++){const O=r[x],w=Math.abs(O)-1,M=O>=0?1:-1;s[f]=e[y+w]*M,h[f]=o[y+w]*M,f++}}return{position:s,normal:h,uv:new Float32Array(St.uv),faces:new Uint32Array(St.faces)}}(o),t,Ht($t({},r),{size:s})))}static createFromPolygon(t,r){if(!(t instanceof at.Z))return ut.error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;const e=function Pt(t){const r=function Gt(t,r,e){const o=t.length,s=new Array(o),h=new Array(o),f=new Array(o);let m=0,y=0,x=0,O=0;for(let A=0;A<o;++A)O+=t[A].length;const w=new Float64Array(3*O);let M=0;for(let A=o-1;A>=0;A--){const W=t[A],pt=e===Et.CCW_IS_HOLE&&Jt(W);if(pt&&1!==o)s[m++]=W;else{let q=W.length;for(let J=0;J<m;++J)q+=s[J].length;const nt={index:M,pathLengths:new Array(m+1),count:q,holeIndices:new Array(m)};nt.pathLengths[0]=W.length,W.length>0&&(f[x++]={index:M,count:W.length}),M=pt?dt(W,W.length-1,-1,w,M,W.length,r):dt(W,0,1,w,M,W.length,r);for(let J=0;J<m;++J){const rt=s[J];nt.holeIndices[J]=M,nt.pathLengths[J+1]=rt.length,rt.length>0&&(f[x++]={index:M,count:rt.length}),M=dt(rt,0,1,w,M,rt.length,r)}m=0,nt.count>0&&(h[y++]=nt)}}for(let A=0;A<m;++A){const W=s[A];W.length>0&&(f[x++]={index:M,count:W.length}),M=dt(W,0,1,w,M,W.length,r)}return y<o&&(h.length=y),x<o&&(f.length=x),{position:w,polygons:h,outlines:f}}(t.rings,t.hasZ,Et.CCW_IS_HOLE),e=[];let o=0,s=0;for(const m of r.polygons){const x=m.index,O=new Float64Array(r.position.buffer,3*x*r.position.BYTES_PER_ELEMENT,3*m.count),w=m.holeIndices.map(A=>A-x),M=new Uint32Array((0,$.e)(O,w,3));e.push({position:O,faces:M}),o+=O.length,s+=M.length}const h=function Tt(t,r,e){if(1===t.length)return t[0];const o=new Float64Array(r),s=new Uint32Array(e);let h=0,f=0,m=0;for(const y of t){for(let x=0;x<y.position.length;x++)o[h++]=y.position[x];for(let x=0;x<y.faces.length;x++)s[f++]=y.faces[x]+m;m=h/3}return{position:o,faces:s}}(e,o,s),f=(0,Wt.d)(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(f.buffer),h.faces=f.indices,h}(t);return new gt({vertexAttributes:new Dt.Q({position:e.position}),components:[new vt.Z({faces:e.faces,shading:"flat",material:r&&r.material||null})],spatialReference:t.spatialReference})}static createFromGLTF(t,r,e){return(0,b.Z)(function*(){if(!(t instanceof K.Z))throw ut.error(".createfromGLTF()","expected location to be a Point instance"),new Q.Z("invalid-input","Expected location to be a Point instance");const{loadGLTFMesh:o}=yield(0,H.Hl)(Promise.all([u.e(5268),u.e(9185)]).then(u.bind(u,29185)),e);return new gt(yield o(t,r,e))})()}static createWithExternalSource(t,r,e){var o,s,h;const f=null!=(o=null==e?void 0:e.extent)?o:null,m=null!=(s=null==e?void 0:e.transform.clone())?s:new ht.Z;return m.origin=[t.x,t.y,null!=(h=t.z)?h:0],new gt({external:{source:r,extent:f},transform:m,spatialReference:t.spatialReference})}static createIncomplete(t,r){var e,o;const s=null!=(e=null==r?void 0:r.transform.clone())?e:new ht.Z;s.origin=[t.x,t.y,null!=(o=t.z)?o:0];const f=new gt({transform:s,spatialReference:t.spatialReference});return f.addResolvingPromise(Promise.reject(new Q.Z("mesh-incomplete","Mesh resources are not complete"))),f}};(0,I._)([(0,B.Cb)({type:[vt.Z],json:{write:!0}})],it.prototype,"components",void 0),(0,I._)([(0,B.Cb)({type:ht.Z,json:{write:!0}})],it.prototype,"transform",void 0),(0,I._)([(0,B.Cb)({constructOnly:!0})],it.prototype,"external",void 0),(0,I._)([(0,B.Cb)({readOnly:!0})],it.prototype,"hasExtent",null),(0,I._)([(0,B.Cb)({readOnly:!0})],it.prototype,"boundingInfo",null),(0,I._)([(0,B.Cb)({readOnly:!0})],it.prototype,"anchor",null),(0,I._)([(0,B.Cb)({readOnly:!0})],it.prototype,"origin",null),(0,I._)([(0,B.Cb)({readOnly:!0,json:{read:!1}})],it.prototype,"extent",null),(0,I._)([(0,B.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],it.prototype,"hasZ",void 0),(0,I._)([(0,B.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],it.prototype,"hasM",void 0),(0,I._)([(0,B.Cb)({type:Dt.Q,nonNullable:!0,json:{write:!0}})],it.prototype,"vertexAttributes",void 0),it=gt=(0,I._)([(0,d.j)("esri.geometry.Mesh")],it);const Qt={x:(0,v.f)(1,0,0),y:(0,v.f)(0,1,0),z:(0,v.f)(0,0,1)},Ut=(0,V.Ue)(),he=(0,V.Ue)(),fe=(0,V.Ue)(),Nt=(0,v.c)(),ge=it;var At,zt;(function(t){t.featureGUID="featureGUID",t.assetName="assetName",t.hash="hash",t.type="type",t.conversionStatus="conversionStatus",t.flags="flags",t.complexity="complexity",t.size="size",t.seqNo="seqNo",t.sourceHash="sourceHash",t.assetURL="assetURL"})(At||(At={})),function(t){t.SUBMITTED="SUBMITTED",t.INPROGRESS="INPROGRESS",t.FAILED="FAILED",t.COMPLETED="COMPLETED"}(zt||(zt={}));var yt,ze=u(17253);function $e(t,r,e){const o=e.features;e.features=[],delete e.geometryType;const s=ze.default.fromJSON(e);s.geometryType="mesh";const h=s.spatialReference,f=(0,_.Wi)(t.outFields)||!t.outFields.length?()=>({}):function He(t){return({attributes:r})=>{if(!r)return{};if(!t)return r;for(const e in r)t.has(e)||delete r[e];return r}}(t.outFields.includes("*")?null:new Set(t.outFields));for(const m of o){const y=Ge(m,h,r);(0,_.pC)(y)&&s.features.push(new D.Z({geometry:y,attributes:f(m)}))}return s}function Ge(t,r,e){const{status:o,source:s}=function Ye(t){if(!t.assetMappings)return{status:yt.FAILED};const r=[],e=new Map;for(const o of t.assetMappings){const s=o[At.seqNo],h=o[At.assetName],f=o[At.assetURL],m=o[At.conversionStatus];if(m===zt.FAILED)return{status:yt.FAILED};if(m!==zt.COMPLETED)return{status:yt.PENDING};if(null==s)r.push({name:h,source:f});else{const y=e.get(h);let x;y?x=y.multipart:(x=[],r.push({name:h,source:{multipart:x}}),e.set(h,{multipart:x})),x[s]=f}}return{status:yt.COMPLETED,source:r}}(t);if(o===yt.FAILED)return null;const h=function Je({attributes:t},r,{transformFieldRoles:e}){return new K.Z({x:t[e.originX],y:t[e.originY],z:t[e.originZ],spatialReference:r})}(t,r,e),f=F.Z.fromJSON(t.geometry);f.spatialReference=r;const m=function Ve({attributes:t,assetMappings:r},{transformFieldRoles:e}){var o;return new ht.Z({translation:[t[e.translationX],t[e.translationY],t[e.translationZ]],rotation:(0,V.uT)([t[e.rotationX],t[e.rotationY],t[e.rotationZ]],t[e.rotationDeg]),scale:[t[e.scaleX],t[e.scaleY],t[e.scaleZ]],geographic:!(null!=(o=r[At.flags])&&o.includes("PROJECT_VERTICES"))})}(t,e);return o===yt.PENDING?ge.createIncomplete(h,{extent:f,transform:m}):ge.createWithExternalSource(h,s,{extent:f,transform:m})}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(yt||(yt={}))}}]);