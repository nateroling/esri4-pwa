"use strict";var Ne=Object.defineProperty,se=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,ae=(rt,M,b)=>M in rt?Ne(rt,M,{enumerable:!0,configurable:!0,writable:!0,value:b}):rt[M]=b,Rt=(rt,M)=>{for(var b in M||(M={}))Le.call(M,b)&&ae(rt,b,M[b]);if(se)for(var b of se(M))Ae.call(M,b)&&ae(rt,b,M[b]);return rt};(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[8364],{78260:(rt,M,b)=>{function O(c){return"h"in c&&"s"in c&&"v"in c}function k(c){return"l"in c&&"a"in c&&"b"in c}function Q(c){return"l"in c&&"c"in c&&"h"in c}b.d(M,{_Y:()=>ht,Y3:()=>Nt,sJ:()=>j,xr:()=>B});const a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function g(c,m){const T=[];let D,N;if(c[0].length!==m.length)throw"dimensions do not match";const x=c.length,V=c[0].length;let Z=0;for(D=0;D<x;D++){for(Z=0,N=0;N<V;N++)Z+=c[D][N]*m[N];T.push(Z)}return T}function I(c){const m=[c.r/255,c.g/255,c.b/255].map(D=>D<=.04045?D/12.92:((D+.055)/1.055)**2.4),T=g(a,m);return{x:100*T[0],y:100*T[1],z:100*T[2]}}function d(c){const m=g(l,[c.x/100,c.y/100,c.z/100]).map(T=>Math.min(1,Math.max(T<=.0031308?12.92*T:1.055*T**.4166666666666667-.055,0)));return{r:Math.round(255*m[0]),g:Math.round(255*m[1]),b:Math.round(255*m[2])}}function L(c){const m=[c.x/95.047,c.y/100,c.z/108.883].map(T=>T>.008856451679035631?T**.3333333333333333:7.787037037037035*T+.13793103448275862);return{l:116*m[1]-16,a:500*(m[0]-m[1]),b:200*(m[1]-m[2])}}function A(c){const m=c.l,T=[(m+16)/116+c.a/500,(m+16)/116,(m+16)/116-c.b/200].map(D=>D>6/29?D**3:3*(6/29)**2*(D-4/29));return{x:95.047*T[0],y:100*T[1],z:108.883*T[2]}}function B(c){return function U(c){return"r"in c&&"g"in c&&"b"in c}(c)?c:Q(c)?function Et(c){return d(A(function H(c){const T=c.c,D=c.h;return{l:c.l,a:T*Math.cos(D),b:T*Math.sin(D)}}(c)))}(c):k(c)?function et(c){return d(A(c))}(c):function i(c){return"x"in c&&"y"in c&&"z"in c}(c)?d(c):O(c)?function lt(c){const m=(c.h+360)%360/60,D=c.v/100*255,N=D*(c.s/100),x=N*(1-Math.abs(m%2-1));let V;switch(Math.floor(m)){case 0:V={r:N,g:x,b:0};break;case 1:V={r:x,g:N,b:0};break;case 2:V={r:0,g:N,b:x};break;case 3:V={r:0,g:x,b:N};break;case 4:V={r:x,g:0,b:N};break;case 5:case 6:V={r:N,g:0,b:x};break;default:V={r:0,g:0,b:0}}return V.r=Math.round(V.r+D-N),V.g=Math.round(V.g+D-N),V.b=Math.round(V.b+D-N),V}(c):c}function ht(c){return O(c)?c:function ot(c){const m=c.r,T=c.g,D=c.b,N=Math.max(m,T,D),x=N-Math.min(m,T,D);let V=N,Z=0===x?0:N===m?(T-D)/x%6:N===T?(D-m)/x+2:(m-T)/x+4,pt=0===x?0:x/V;return Z<0&&(Z+=6),Z*=60,pt*=100,V*=100/255,{h:Z,s:pt,v:V}}(B(c))}function Nt(c){return k(c)?c:function z(c){return L(I(c))}(B(c))}function j(c){return Q(c)?c:function _t(c){return function R(c){const m=c.l,T=c.a,D=c.b,N=Math.sqrt(T*T+D*D);let x=Math.atan2(D,T);return x=x>0?x:x+2*Math.PI,{l:m,c:N,h:x}}(L(I(c)))}(B(c))}},36243:(rt,M,b)=>{b.d(M,{Z:()=>U});class U{constructor(k){this._array=[],k<=0&&console.error("strideInBytes must be positive!"),this._stride=k}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(k,Q){return 65535&k|Q<<16}static i8888to32(k,Q,i,a){return 255&k|(255&Q)<<8|(255&i)<<16|a<<24}static i8816to32(k,Q,i){return 255&k|(255&Q)<<8|i<<16}}},919:(rt,M,b)=>{var U,O,k,Q,i,a;b.d(M,{al:()=>O,_K:()=>Q,Fr:()=>i}),(a=U||(U={}))[a.UNKNOWN=0]="UNKNOWN",a[a.FILL_VERTEX=1]="FILL_VERTEX",a[a.FILL_DD_VERTEX=2]="FILL_DD_VERTEX",a[a.FILL_INDEX=3]="FILL_INDEX",a[a.OUTLINE_VERTEX=4]="OUTLINE_VERTEX",a[a.OUTLINE_DD_VERTEX=5]="OUTLINE_DD_VERTEX",a[a.OUTLINE_INDEX=6]="OUTLINE_INDEX",a[a.LINE_VERTEX=7]="LINE_VERTEX",a[a.LINE_DD_VERTEX=8]="LINE_DD_VERTEX",a[a.LINE_INDEX=9]="LINE_INDEX",a[a.ICON_VERTEX=10]="ICON_VERTEX",a[a.ICON_DD_VERTEX=11]="ICON_DD_VERTEX",a[a.ICON_INDEX=12]="ICON_INDEX",a[a.TEXT_VERTEX=13]="TEXT_VERTEX",a[a.TEXT_DD_VERTEX=14]="TEXT_DD_VERTEX",a[a.TEXT_INDEX=15]="TEXT_INDEX",a[a.CIRCLE_VERTEX=16]="CIRCLE_VERTEX",a[a.CIRCLE_INDEX=17]="CIRCLE_INDEX",function(a){a[a.FILL=1]="FILL",a[a.LINE=2]="LINE",a[a.SYMBOL=3]="SYMBOL",a[a.CIRCLE=4]="CIRCLE"}(O||(O={})),function(a){a[a.BACKGROUND=0]="BACKGROUND",a[a.OPAQUE=1]="OPAQUE",a[a.TRANSLUCENT=2]="TRANSLUCENT",a[a.SYMBOLS=3]="SYMBOLS",a[a.HITTEST=4]="HITTEST"}(k||(k={})),function(a){a[a.BACKGROUND=0]="BACKGROUND",a[a.FILL=1]="FILL",a[a.OUTLINE=2]="OUTLINE",a[a.LINE=3]="LINE",a[a.ICON=4]="ICON",a[a.CIRCLE=5]="CIRCLE",a[a.TEXT=6]="TEXT",a[a.TILEINFO=7]="TILEINFO"}(Q||(Q={})),function(a){a[a.PAINTER_CHANGED=0]="PAINTER_CHANGED",a[a.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",a[a.LAYER_CHANGED=2]="LAYER_CHANGED",a[a.LAYER_REMOVED=3]="LAYER_REMOVED",a[a.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(i||(i={}))},77928:(rt,M,b)=>{b.d(M,{Et:()=>Ie,sj:()=>De,Le:()=>ve,_L:()=>be,gf:()=>Te,jG:()=>we,nj:()=>Re});var i,a,o,U=b(7547),O=b(919),k=b(62208),Q=b(36243);(o=i||(i={}))[o.R8_SIGNED=0]="R8_SIGNED",o[o.R8_UNSIGNED=1]="R8_UNSIGNED",o[o.R16_SIGNED=2]="R16_SIGNED",o[o.R16_UNSIGNED=3]="R16_UNSIGNED",o[o.R8G8_SIGNED=4]="R8G8_SIGNED",o[o.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",o[o.R16G16_SIGNED=6]="R16G16_SIGNED",o[o.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",o[o.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",o[o.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",o[o.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",o[o.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",o[o.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN",function(o){o[o.UNIFORM=0]="UNIFORM",o[o.DATA_DRIVEN=1]="DATA_DRIVEN",o[o.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",o[o.UNUSED=3]="UNUSED"}(a||(a={}));var l=b(67969),g=b(40852);class I{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,r,n,s){const y=this.getUniforms();for(const u of y){const{name:h,type:p,getValue:E}=u,f=E(r,e,n,s);if(null!==f)switch(p){case"float":t.setUniform1f(h,f);break;case"vec2":t.setUniform2fv(h,f);break;case"vec4":t.setUniform4fv(h,f)}}}encodeAttributes(t,e,r,n){const s=this.attributesInfo(),y=this.getEncodingInfos(),u=[];let h=0,p=0;for(const f of Object.keys(y)){var E;const v=y[f],{type:S,precisionFactor:P,isLayout:w}=s[f],K=w?r.getLayoutProperty(f):r.getPaintProperty(f),ut=null==(E=K.interpolator)?void 0:E.getInterpolationRange(e);let X=0;for(const J of v){const{offset:Y,bufferElementsToAdd:nt}=J;if(nt>0){for(let at=0;at<nt;at++)u.push(0);h+=p,p=J.bufferElementsToAdd}const G=null!=n?n:K.getValue(ut?ut[X]:e,t);switch(S){case i.R8_SIGNED:case i.R8_UNSIGNED:u[h]|=this._encodeByte(G*(P||1),8*Y);break;case i.R16_SIGNED:case i.R16_UNSIGNED:u[h]|=this._encodeShort(G*(P||1),8*Y);break;case i.R8G8_SIGNED:case i.R8G8_UNSIGNED:u[h]|=this._encodeByte(G*(P||1),8*Y),u[h]|=this._encodeByte(G*(P||1),8*Y+8);break;case i.R16G16_SIGNED:case i.R16G16_UNSIGNED:u[h]|=this._encodeShort(G*(P||1),8*Y),u[h]|=this._encodeShort(G*(P||1),8*Y+16);break;case i.R8G8B8A8_SIGNED:case i.R8G8B8A8_UNSIGNED:u[h]|=this._encodeByte(G*(P||1),8*Y),u[h]|=this._encodeByte(G*(P||1),8*Y+8),u[h]|=this._encodeByte(G*(P||1),8*Y+16),u[h]|=this._encodeByte(G*(P||1),8*Y+24);break;case i.R8G8B8A8_COLOR:u[h]=this._encodeColor(G);break;case i.R16G16B16A16_DASHARRAY:case i.R16G16B16A16_PATTERN:this._encodePattern(h,u,G);break;default:throw new Error("Unsupported encoding type")}X++}}return u}getAtributeState(t){let e=0;const r=3+2*t;return e|=this._bit(r),e|=this._bit(r+1)<<1,e}_buildAttributesInfo(){const t=[],e={},r={};let n=-1;const s=this.attributesInfo(),y=this.attributes();let u=-1;for(const f of y){u++;const v=this.getAtributeState(u);if(v===a.UNIFORM||v===a.UNUSED)continue;const S=s[f],P=[];e[f]=P;const w=S.type;for(let K=0;K<v;K++){const{dataType:ut,bytesPerElement:X,count:J,normalized:Y}=I._encodingInfo[w],nt=X*J;let G=r[ut],at=0;if(!G||G.count+J>4)n++,G={dataIndex:n,count:0,offset:0},4!==J&&(r[ut]=G),t.push({location:-1,name:"a_data_"+n,count:J,type:ut,normalized:Y}),at=Math.ceil(Math.max(nt/4,1));else{const it=t[G.dataIndex];it.count+=J,at=Math.ceil(Math.max(it.count*X/4,1))-Math.ceil(Math.max(G.offset/4,1))}P.push({dataIndex:G.dataIndex,offset:G.offset,bufferElementsToAdd:at}),G.offset+=nt,G.count+=J}}for(const f of t)switch(f.type){case l.g.BYTE:case l.g.UNSIGNED_BYTE:f.count=4;case l.g.SHORT:case l.g.UNSIGNED_SHORT:f.count+=f.count%2}this._buildVertexBufferLayout(t);let h=0;const p=this._layoutInfo.geometry;for(const f of p)this._locations.set(f.name,h++);const E=this._layoutInfo.opacity;if(E)for(const f of E)this._locations.set(f.name,h++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e={},r=this.geometryInfo();let n=r[0].stride;if(0===t.length)e.geometry=r;else{const s=[];let y=n;for(const u of t)n+=d(u.type)*u.count;for(const u of r){const h=Rt({},u);h.stride=n,s.push(h)}for(const u of t)s.push(new g.G(u.name,u.count,u.type,y,n)),y+=d(u.type)*u.count;e.geometry=s}this.opacityInfo()&&(e.opacity=this.opacityInfo()),this._layoutInfo=e,this._stride=n}_buildShaderInfo(t,e){let r="\n",n="\n";const s=[];for(const p of t)r+=`attribute ${this._getType(p.count)} ${p.name};\n`;const y=this.attributes(),u=this.attributesInfo();let h=-1;for(const p of y){h++;const{name:E,type:f,precisionFactor:v,isLayout:S}=u[p],P=v&&1!==v?" * "+1/v:"",{bytesPerElement:w,count:K}=I._encodingInfo[f],ut=X=>`a_data_${X.dataIndex}${L(K,X.offset,w)}`;switch(this.getAtributeState(h)){case a.UNIFORM:{const X=this._getType(K),J=`u_${E}`;s.push({name:J,type:X,getValue:(Y,nt,G,at)=>{const it=S?Y.getLayoutValue(p,nt):Y.getPaintValue(p,nt);if(f===i.R16G16B16A16_DASHARRAY){const ct=Y.getDashKey(it,Y.getLayoutValue("line-cap",nt)),dt=at.getMosaicItemPosition(ct,!1);if((0,k.Wi)(dt))return null;const{tl:mt,br:ne}=dt;return[mt[0],ne[1],ne[0],mt[1]]}if(f===i.R16G16B16A16_PATTERN){const ct=at.getMosaicItemPosition(it,-1===p.indexOf("line-"));if((0,k.Wi)(ct))return null;const{tl:dt,br:mt}=ct;return[dt[0],mt[1],mt[0],dt[1]]}if(f===i.R8G8B8A8_COLOR){const ct=it[3];return[ct*it[0],ct*it[1],ct*it[2],ct]}return it}}),r+=`uniform ${X} ${J};\n`,n+=`${X} ${E} = ${J};\n`}break;case a.DATA_DRIVEN:{const X=ut(e[p][0]);n+=`${this._getType(K)} ${E} = ${X}${P};\n`}break;case a.INTERPOLATED_DATA_DRIVEN:{const X=`u_t_${E}`;s.push({name:X,type:"float",getValue:(nt,G,at,it)=>(S?nt.getLayoutProperty(p):nt.getPaintProperty(p)).interpolator.interpolationUniformValue(at,G)}),r+=`uniform float ${X};\n`;const J=ut(e[p][0]),Y=ut(e[p][1]);n+=`${this._getType(K)} ${E} = mix(${J}${P}, ${Y}${P}, ${X});\n`}}}this._shaderHeader=r,this._shaderMain=n,this._uniforms=s}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const e=255*t[3];return Q.Z.i8888to32(t[0]*e,t[1]*e,t[2]*e,e)}_encodePattern(t,e,r){if(!r||!r.rect)return;const s=r.rect,y=r.width,u=r.height;e[t]=this._encodeShort(s.x+2,0),e[t]|=this._encodeShort(s.y+2+u,16),e[t+1]=this._encodeShort(s.x+2+y,0),e[t+1]|=this._encodeShort(s.y+2,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}I._encodingInfo={[i.R8_SIGNED]:{dataType:l.g.BYTE,bytesPerElement:1,count:1,normalized:!1},[i.R8_UNSIGNED]:{dataType:l.g.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[i.R16_SIGNED]:{dataType:l.g.SHORT,bytesPerElement:2,count:1,normalized:!1},[i.R16_UNSIGNED]:{dataType:l.g.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[i.R8G8_SIGNED]:{dataType:l.g.BYTE,bytesPerElement:1,count:2,normalized:!1},[i.R8G8_UNSIGNED]:{dataType:l.g.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[i.R16G16_SIGNED]:{dataType:l.g.SHORT,bytesPerElement:2,count:2,normalized:!1},[i.R16G16_UNSIGNED]:{dataType:l.g.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[i.R8G8B8A8_SIGNED]:{dataType:l.g.BYTE,bytesPerElement:1,count:4,normalized:!1},[i.R8G8B8A8_UNSIGNED]:{dataType:l.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[i.R8G8B8A8_COLOR]:{dataType:l.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[i.R16G16B16A16_DASHARRAY]:{dataType:l.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[i.R16G16B16A16_PATTERN]:{dataType:l.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const d=o=>{switch(o){case l.g.FLOAT:case l.g.INT:case l.g.UNSIGNED_INT:return 4;case l.g.SHORT:case l.g.UNSIGNED_SHORT:return 2;case l.g.BYTE:case l.g.UNSIGNED_BYTE:return 1}},L=(o,t,e)=>{const r=t/e;if(1===o)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===o)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===o)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};class A extends I{constructor(t){super(t)}geometryInfo(){return A.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return A.ATTRIBUTES}attributesInfo(){return A.ATTRIBUTES_INFO}}A.ATTRIBUTES=[],A.GEOMETRY_LAYOUT=[new g.G("a_pos",2,l.g.BYTE,0,2)],A.ATTRIBUTES_INFO={};class R extends I{constructor(t){super(t)}geometryInfo(){return R.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return R.ATTRIBUTES}attributesInfo(){return R.ATTRIBUTES_INFO}}R.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],R.GEOMETRY_LAYOUT=[new g.G("a_pos",2,l.g.SHORT,0,4)],R.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:i.R8_UNSIGNED},"circle-color":{name:"color",type:i.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:i.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:i.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:i.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:i.R8_UNSIGNED,precisionFactor:32}};class H extends I{constructor(t){super(t)}geometryInfo(){return H.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return H.ATTRIBUTES}attributesInfo(){return H.ATTRIBUTES_INFO}}H.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],H.GEOMETRY_LAYOUT=[new g.G("a_pos",2,l.g.SHORT,0,4)],H.ATTRIBUTES_INFO={"fill-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:i.R16G16B16A16_PATTERN,isOptional:!0}};class z extends I{constructor(t,e){super(t),this.usefillColor=e}geometryInfo(){return z.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this.usefillColor?z.ATTRIBUTES_FILL:z.ATTRIBUTES_OUTLINE}attributesInfo(){return this.usefillColor?z.ATTRIBUTES_INFO_FILL:z.ATTRIBUTES_INFO_OUTLINE}}z.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],z.ATTRIBUTES_FILL=["fill-color","fill-opacity"],z.GEOMETRY_LAYOUT=[new g.G("a_pos",2,l.g.SHORT,0,8),new g.G("a_offset",2,l.g.BYTE,4,8),new g.G("a_xnormal",2,l.g.BYTE,6,8)],z.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100}},z.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100}};class et extends I{constructor(t){super(t)}geometryInfo(){return et.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return et.ATTRIBUTES}attributesInfo(){return et.ATTRIBUTES_INFO}}et.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],et.GEOMETRY_LAYOUT=[new g.G("a_pos",2,l.g.SHORT,0,16),new g.G("a_extrude_offset",4,l.g.BYTE,4,16),new g.G("a_dir_normal",4,l.g.BYTE,8,16),new g.G("a_accumulatedDistance",2,l.g.UNSIGNED_SHORT,12,16)],et.ATTRIBUTES_INFO={"line-width":{name:"width",type:i.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:i.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:i.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:i.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:i.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:i.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:i.R16G16B16A16_DASHARRAY,isOptional:!0}};const _t=[new g.G("a_pos",2,l.g.SHORT,0,16),new g.G("a_vertexOffset",2,l.g.SHORT,4,16),new g.G("a_texAngleRange",4,l.g.UNSIGNED_BYTE,8,16),new g.G("a_levelInfo",4,l.g.UNSIGNED_BYTE,12,16)],Et=[new g.G("a_opacityInfo",1,l.g.UNSIGNED_BYTE,0,1)];class ot extends I{constructor(t){super(t)}geometryInfo(){return _t}opacityInfo(){return Et}attributes(){return ot.ATTRIBUTES}attributesInfo(){return ot.ATTRIBUTES_INFO}}ot.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],ot.ATTRIBUTES_INFO={"icon-color":{name:"color",type:i.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:i.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:i.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:i.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:i.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class lt extends I{constructor(t){super(t)}geometryInfo(){return _t}opacityInfo(){return Et}attributes(){return lt.ATTRIBUTES}attributesInfo(){return lt.ATTRIBUTES_INFO}}lt.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],lt.ATTRIBUTES_INFO={"text-color":{name:"color",type:i.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:i.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:i.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:i.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:i.R8_UNSIGNED,isLayout:!0}};var B=b(91558),ht=b(78260),Nt=b(78041),j=b(86575);const Lt={kind:"null"},C={kind:"number"},c={kind:"string"},m={kind:"boolean"},T={kind:"color"},D={kind:"object"},N={kind:"value"};function x(o,t){return{kind:"array",itemType:o,n:t}}const V=[Lt,C,c,m,T,D,x(N)];function Z(o){if("array"===o.kind){const t=Z(o.itemType);return"number"==typeof o.n?`array<${t}, ${o.n}>`:"value"===o.itemType.kind?"array":`array<${t}>`}return o.kind}function pt(o){if(null===o)return Lt;if("string"==typeof o)return c;if("boolean"==typeof o)return m;if("number"==typeof o)return C;if(o instanceof B.Z)return T;if(Array.isArray(o)){let t;for(const e of o){const r=pt(e);if(t){if(t!==r){t=N;break}}else t=r}return x(t||N,o.length)}return"object"==typeof o?D:N}function At(o,t){if("array"===t.kind)return"array"===o.kind&&(0===o.n&&"value"===o.itemType.kind||At(o.itemType,t.itemType))&&("number"!=typeof t.n||t.n===o.n);if("value"===t.kind)for(const e of V)if(At(o,e))return!0;return t.kind===o.kind}function St(o){if(null===o)return"";const t=typeof o;return"string"===t?o:"number"===t||"boolean"===t?String(o):o instanceof B.Z?o.toString():JSON.stringify(o)}var xt=b(97938);class ie{constructor(t){this.parent=t,this.vars={}}add(t,e){this.vars[t]=e}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class Pt{constructor(){this.type=N}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new Pt}evaluate(t,e){return null==t?void 0:t.id}}class Ut{constructor(){this.type=c}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new Ut}evaluate(t,e){if(!t)return null;switch(t.type){case xt.V.Point:return"Point";case xt.V.LineString:return"LineString";case xt.V.Polygon:return"Polygon";default:return null}}}class Ot{constructor(){this.type=D}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new Ot}evaluate(t,e){return null==t?void 0:t.values}}class It{constructor(){this.type=C}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new It}evaluate(t,e){return e}}class q{constructor(t,e,r){this.lhs=t,this.rhs=e,this.compare=r,this.type=m}static parse(t,e,r){if(3!==t.length&&4!==t.length)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`"${t[0]}" collator not supported`);return new q(_(t[1],e),_(t[2],e),r)}evaluate(t,e){return this.compare(this.lhs.evaluate(t,e),this.rhs.evaluate(t,e))}}class Gt{constructor(t){this.arg=t,this.type=m}static parse(t,e){if(2!==t.length)throw new Error('"!" expects 1 argument');return new Gt(_(t[1],e))}evaluate(t,e){return!this.arg.evaluate(t,e)}}class Bt{constructor(t){this.args=t,this.type=m}static parse(t,e){const r=[];for(let n=1;n<t.length;n++)r.push(_(t[n],e));return new Bt(r)}evaluate(t,e){for(const r of this.args)if(!r.evaluate(t,e))return!1;return!0}}class kt{constructor(t){this.args=t,this.type=m}static parse(t,e){const r=[];for(let n=1;n<t.length;n++)r.push(_(t[n],e));return new kt(r)}evaluate(t,e){for(const r of this.args)if(r.evaluate(t,e))return!0;return!1}}class Ct{constructor(t){this.args=t,this.type=m}static parse(t,e){const r=[];for(let n=1;n<t.length;n++)r.push(_(t[n],e));return new Ct(r)}evaluate(t,e){for(const r of this.args)if(r.evaluate(t,e))return!1;return!0}}class Vt{constructor(t,e,r){this.type=t,this.args=e,this.fallback=r}static parse(t,e,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let n;const s=[];for(let u=1;u<t.length-1;u+=2){const h=_(t[u],e),p=_(t[u+1],e,r);n||(n=p.type),s.push({condition:h,output:p})}const y=_(t[t.length-1],e,r);return n||(n=y.type),new Vt(n,s,y)}evaluate(t,e){for(const r of this.args)if(r.condition.evaluate(t,e))return r.output.evaluate(t,e);return this.fallback.evaluate(t,e)}}class Ft{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const n=[];for(let s=1;s<t.length;s++){const y=_(t[s],e);r||(r=y.type),n.push(y)}return new Ft(r,n)}evaluate(t,e){for(const r of this.args){const n=r.evaluate(t,e);if(null!==n)return n}return null}}class Mt{constructor(t,e,r,n,s){this.type=t,this.input=e,this.labels=r,this.outputs=n,this.fallback=s}static parse(t,e){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const n=_(t[1],e),s=[],y={};let u;for(let h=2;h<t.length-1;h+=2){let p=t[h];Array.isArray(p)||(p=[p]);for(const f of p){const v=typeof f;if("string"!==v&&"number"!==v)throw new Error('"match" requires string or number literal as labels');if(u){if(v!==u)throw new Error('"match" requires labels to have the same type')}else u=v;y[f]=s.length}const E=_(t[h+1],e);r||(r=E.type),s.push(E)}return new Mt(r,n,y,s,_(t[t.length-1],e))}evaluate(t,e){const r=this.input.evaluate(t,e);return(this.outputs[this.labels[r]]||this.fallback).evaluate(t,e)}}class st{constructor(t,e,r,n,s){this.operator=t,this.type=e,this.interpolation=r,this.input=n,this.stops=s}static parse(t,e,r){const n=t[0];if(t.length<5)throw new Error(`"${n}" expects at least 4 arguments`);const s=t[1];if(!Array.isArray(s)||0===s.length)throw new Error(`"${s}" is not a valid interpolation`);switch(s[0]){case"linear":if(1!==s.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==s.length||"number"!=typeof s[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==s.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let p=1;p<5;p++){const E=s[p];if("number"!=typeof E||E<0||E>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${s[0]}"`)}if(t.length%2!=1)throw new Error(`"${n}" expects an even number of arguments`);const y=_(t[2],e,C);let u;"interpolate-hcl"===n||"interpolate-lab"===n?u=T:r&&"value"!==r.kind&&(u=r);const h=[];for(let p=3;p<t.length;p+=2){const E=t[p];if("number"!=typeof E)throw new Error(`"${n}" requires stop inputs as literal numbers`);if(h.length&&h[h.length-1][0]>=E)throw new Error(`"${n}" requires strictly ascending stop inputs`);const f=_(t[p+1],e,u);u||(u=f.type),h.push([E,f])}if(u&&u!==T&&u!==C&&("array"!==u.kind||u.itemType!==C))throw new Error(`"${n}" cannot interpolate type ${Z(u)}`);return new st(n,u,s,y,h)}evaluate(t,e){const r=this.stops;if(1===r.length)return r[0][1].evaluate(t,e);const n=this.input.evaluate(t,e);if(n<=r[0][0])return r[0][1].evaluate(t,e);if(n>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,e);let s=0;for(;++s<r.length&&!(n<r[s][0]););const h=st.interpolationRatio(this.interpolation,n,r[s-1][0],r[s][0]),p=r[s-1][1].evaluate(t,e),E=r[s][1].evaluate(t,e);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(p)&&Array.isArray(E))return p.map((f,v)=>(0,j.sX)(f,E[v],h));if("color"===this.type.kind&&p instanceof B.Z&&E instanceof B.Z){const f=new B.Z(p),v=new B.Z(E);return new B.Z([(0,j.sX)(f.r,v.r,h),(0,j.sX)(f.g,v.g,h),(0,j.sX)(f.b,v.b,h),(0,j.sX)(f.a,v.a,h)])}if("number"===this.type.kind&&"number"==typeof p&&"number"==typeof E)return(0,j.sX)(p,E,h);throw new Error(`"${this.operator}" cannot interpolate type ${Z(this.type)}`)}if("interpolate-hcl"===this.operator){const f=(0,ht.sJ)(p),v=(0,ht.sJ)(E),S=v.h-f.h,P=(0,ht.xr)({h:f.h+h*(S>180||S<-180?S-360*Math.round(S/360):S),c:(0,j.sX)(f.c,v.c,h),l:(0,j.sX)(f.l,v.l,h)});return new B.Z(Rt({a:(0,j.sX)(p.a,E.a,h)},P))}if("interpolate-lab"===this.operator){const f=(0,ht.Y3)(p),v=(0,ht.Y3)(E),S=(0,ht.xr)({l:(0,j.sX)(f.l,v.l,h),a:(0,j.sX)(f.a,v.a,h),b:(0,j.sX)(f.b,v.b,h)});return new B.Z(Rt({a:(0,j.sX)(p.a,E.a,h)},S))}throw new Error(`Unexpected operator "${this.operator}"`)}interpolationUniformValue(t,e){const r=this.stops;if(1===r.length||t>=r[r.length-1][0])return 0;let n=0;for(;++n<r.length&&!(t<r[n][0]););return st.interpolationRatio(this.interpolation,e,r[n-1][0],r[n][0])}getInterpolationRange(t){const e=this.stops;if(1===e.length){const s=e[0][0];return[s,s]}const r=e[e.length-1][0];if(t>=r)return[r,r];let n=0;for(;++n<e.length&&!(t<e[n][0]););return[e[n-1][0],e[n][0]]}static interpolationRatio(t,e,r,n){let s=0;return"linear"===t[0]?s=st._exponentialInterpolationRatio(e,1,r,n):"exponential"===t[0]?s=st._exponentialInterpolationRatio(e,t[1],r,n):"cubic-bezier"===t[0]&&(s=(0,Nt.n_)(t[1],t[2],t[3],t[4])(st._exponentialInterpolationRatio(e,1,r,n),1e-5)),s<0?s=0:s>1&&(s=1),s}static _exponentialInterpolationRatio(t,e,r,n){const s=n-r;if(0===s)return 0;const y=t-r;return 1===e?y/s:(e**y-1)/(e**s-1)}}class zt{constructor(t,e,r){this.type=t,this.input=e,this.stops=r}static parse(t,e){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=_(t[1],e,C);let n;const s=[];s.push([-1/0,_(t[2],e)]);for(let y=3;y<t.length;y+=2){const u=t[y];if("number"!=typeof u)throw new Error('"step" requires stop inputs as literal numbers');if(s.length&&s[s.length-1][0]>=u)throw new Error('"step" requires strictly ascending stop inputs');const h=_(t[y+1],e);n||(n=h.type),s.push([u,h])}return new zt(n,r,s)}evaluate(t,e){const r=this.stops;if(1===r.length)return r[0][1].evaluate(t,e);const n=this.input.evaluate(t,e);let s=0;for(;++s<r.length&&!(n<r[s][0]););return this.stops[s-1][1].evaluate(t,e)}}class $t{constructor(t,e){this.type=t,this.output=e}static parse(t,e,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const n=new ie(e);for(let y=1;y<t.length-1;y+=2){const u=t[y];if("string"!=typeof u)throw new Error(`"let" requires a string to define variable names - found ${u}`);n.add(u,_(t[y+1],e))}const s=_(t[t.length-1],n,r);return new $t(s.type,s)}evaluate(t,e){return this.output.evaluate(t,e)}}class Yt{constructor(t,e){this.type=t,this.output=e}static parse(t,e,r){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');const n=e.get(t[1]);if(!n)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new Yt(r||N,n)}evaluate(t,e){return this.output.evaluate(t,e)}}class Xt{constructor(t,e,r){this.type=t,this.index=e,this.array=r}static parse(t,e){if(3!==t.length)throw new Error('"at" expects 2 arguments');const r=_(t[1],e,C),n=_(t[2],e);return new Xt(n.type.itemType,r,n)}evaluate(t,e){const r=this.index.evaluate(t,e),n=this.array.evaluate(t,e);if(r<0||r>=n.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return n[r]}}class vt{constructor(t,e){this.key=t,this.obj=e,this.type=N}static parse(t,e){let r,n;switch(t.length){case 2:return r=_(t[1],e),new vt(r);case 3:return r=_(t[1],e),n=_(t[2],e),new vt(r,n);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,e){const r=this.key.evaluate(t,e);return this.obj?this.obj.evaluate(t,e)[r]:null==t?void 0:t.values[r]}}class Tt{constructor(t,e){this.key=t,this.obj=e,this.type=m}static parse(t,e){let r,n;switch(t.length){case 2:return r=_(t[1],e),new Tt(r);case 3:return r=_(t[1],e),n=_(t[2],e),new Tt(r,n);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,e){const r=this.key.evaluate(t,e);return this.obj?r in this.obj.evaluate(t,e):!(null==t||!t.values[r])}}class Ht{constructor(t,e){this.key=t,this.vals=e,this.type=m}static parse(t,e){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new Ht(_(t[1],e),_(t[2],e))}evaluate(t,e){const r=this.key.evaluate(t,e);return-1!==this.vals.evaluate(t,e).indexOf(r)}}class wt{constructor(t,e,r){this.item=t,this.array=e,this.from=r,this.type=C}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=_(t[1],e),n=_(t[2],e);if(4===t.length){const s=_(t[3],e,C);return new wt(r,n,s)}return new wt(r,n)}evaluate(t,e){const r=this.item.evaluate(t,e),n=this.array.evaluate(t,e);if(this.from){const s=this.from.evaluate(t,e);if(s!==Math.floor(s))throw new Error('"index-of" index must be an integer');return n.indexOf(r,s)}return n.indexOf(r)}}class jt{constructor(t){this.arg=t,this.type=C}static parse(t,e){if(2!==t.length)throw new Error('"length" expects 2 arguments');const r=_(t[1],e);return new jt(r)}evaluate(t,e){const r=this.arg.evaluate(t,e);if("string"==typeof r||Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}class Dt{constructor(t,e,r,n){this.type=t,this.array=e,this.from=r,this.to=n}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=_(t[1],e),n=_(t[2],e,C);if(n.type!==C)throw new Error('"slice" index must return a number');if(4===t.length){const s=_(t[3],e,C);if(s.type!==C)throw new Error('"slice" index must return a number');return new Dt(r.type,r,n,s)}return new Dt(r.type,r,n)}evaluate(t,e){const r=this.array.evaluate(t,e);if(!Array.isArray(r)&&"string"!=typeof r)throw new Error('"slice" input must be an array or a string');const n=this.from.evaluate(t,e);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');if(this.to){const s=this.to.evaluate(t,e);if(s<0||s>=r.length)throw new Error('"slice" index out of bounds');if(s!==Math.floor(s))throw new Error('"slice" index must be an integer');return r.slice(n,s)}return r.slice(n)}}class Kt{constructor(){this.type=m}static parse(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new Kt}evaluate(t,e){return t&&void 0!==t.id}}class W{constructor(t,e){this.args=t,this.calculate=e,this.type=C}static parse(t,e,r){const n=t.slice(1).map(s=>_(s,e));return new W(n,r)}evaluate(t,e){let r;return this.args&&(r=this.args.map(n=>n.evaluate(t,e))),this.calculate(r)}}let $=(()=>{class o{constructor(e,r){this.args=e,this.calculate=r,this.type=C}static parse(e,r){const n=e.slice(1).map(s=>_(s,r));return new o(n,o.ops[e[0]])}evaluate(e,r){let n;return this.args&&(n=this.args.map(s=>s.evaluate(e,r))),this.calculate(n)}}return o.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])},o})();class Zt{constructor(t){this.args=t,this.type=c}static parse(t,e){return new Zt(t.slice(1).map(r=>_(r,e)))}evaluate(t,e){return this.args.map(r=>r.evaluate(t,e)).join("")}}let ee=(()=>{class o{constructor(e,r){this.arg=e,this.calculate=r,this.type=c}static parse(e,r){if(2!==e.length)throw new Error(`${e[0]} expects 1 argument`);const n=_(e[1],r);return new o(n,o.ops[e[0]])}evaluate(e,r){return this.calculate(this.arg.evaluate(e,r))}}return o.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()},o})();class Wt{constructor(t){this.args=t,this.type=T}static parse(t,e){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');const r=t.slice(1).map(n=>_(n,e));return new Wt(r)}evaluate(t,e){const r=this._validate(this.args[0].evaluate(t,e)),n=this._validate(this.args[1].evaluate(t,e)),s=this._validate(this.args[2].evaluate(t,e));return new B.Z({r,g:n,b:s})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class Jt{constructor(t){this.args=t,this.type=T}static parse(t,e){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');const r=t.slice(1).map(n=>_(n,e));return new Jt(r)}evaluate(t,e){const r=this._validate(this.args[0].evaluate(t,e)),n=this._validate(this.args[1].evaluate(t,e)),s=this._validate(this.args[2].evaluate(t,e)),y=this._validateAlpha(this.args[3].evaluate(t,e));return new B.Z({r,g:n,b:s,a:y})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if("number"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class Qt{constructor(t){this.color=t,this.type=x(C,4)}static parse(t,e){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');const r=_(t[1],e);return new Qt(r)}evaluate(t,e){return new B.Z(this.color.evaluate(t,e)).toRgba()}}class yt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let n,s=1;if("array"===r){if(t.length>2){switch(t[1]){case"string":n=c;break;case"number":n=C;break;case"boolean":n=m;break;default:throw new Error('"array" type argument must be string, number or boolean')}s++}else n=N;let u;if(t.length>3){if(u=t[2],null!==u&&("number"!=typeof u||u<0||u!==Math.floor(u)))throw new Error('"array" length argument must be a positive integer literal');s++}n=x(n,u)}else switch(r){case"string":n=c;break;case"number":n=C;break;case"boolean":n=m;break;case"object":n=D}const y=[];for(;s<t.length;s++){const u=_(t[s],e);y.push(u)}return new yt(n,y)}evaluate(t,e){let r;for(const n of this.args){const s=n.evaluate(t,e);if(r=pt(s),At(r,this.type))return s}throw new Error(`Expected ${Z(this.type)} but got ${Z(r)}`)}}let ft=(()=>{class o{constructor(e,r){this.type=e,this.args=r}static parse(e,r){const n=e[0],s=o.types[n];if(s===m||s===c){if(2!==e.length)throw new Error(`${n} expects one argument`)}else if(e.length<2)throw new Error(`${n} expects at least one argument`);const y=[];for(let u=1;u<e.length;u++){const h=_(e[u],r);y.push(h)}return new o(s,y)}evaluate(e,r){if(this.type===m)return Boolean(this.args[0].evaluate(e,r));if(this.type===c)return St(this.args[0].evaluate(e,r));if(this.type===C){for(const n of this.args){const s=Number(n.evaluate(e,r));if(!isNaN(s))return s}return null}if(this.type===T){for(const n of this.args)try{const s=o.toColor(n.evaluate(e,r));if(s instanceof B.Z)return s}catch(s){}return null}}static toBoolean(e){return Boolean(e)}static toString(e){return St(e)}static toNumber(e){const r=Number(e);if(isNaN(r))throw new Error(`"${e}" is not a number`);return r}static toColor(e){if(e instanceof B.Z)return e;if("string"==typeof e){const r=B.Z.fromString(e);if(r)return r;throw new Error(`"${e}" is not a color`)}if(Array.isArray(e))return B.Z.fromArray(e);throw new Error(`"${e}" is not a color`)}}return o.types={"to-boolean":m,"to-color":T,"to-number":C,"to-string":c},o})();class qt{constructor(t){this.val=t,this.type=pt(t)}static parse(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new qt(t[1])}evaluate(t,e){return this.val}}class te{constructor(t){this.arg=t,this.type=c}static parse(t,e){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new te(_(t[1],e))}evaluate(t,e){return Z(pt(this.arg.evaluate(t,e)))}}function _(o,t,e){const r=typeof o;if("string"===r||"boolean"===r||"number"===r||null===o){if(e)switch(e.kind){case"string":"string"!==r&&(o=ft.toString(o));break;case"number":"number"!==r&&(o=ft.toNumber(o));break;case"color":o=ft.toColor(o)}o=["literal",o]}if(!Array.isArray(o)||0===o.length)throw new Error("Expression must be a non empty array");const n=o[0];if("string"!=typeof n)throw new Error("First element of expression must be a string");const s=re[n];if(void 0===s)throw new Error(`Invalid expression operator "${n}"`);if(!s)throw new Error(`Unimplemented expression operator "${n}"`);return s.parse(o,t,e)}const re={array:yt,boolean:yt,collator:null,format:null,image:null,literal:qt,number:yt,"number-format":null,object:yt,string:yt,"to-boolean":ft,"to-color":ft,"to-number":ft,"to-string":ft,typeof:te,accumulated:null,"feature-state":null,"geometry-type":Ut,id:Pt,"line-progress":null,properties:Ot,at:Xt,get:vt,has:Tt,in:Ht,"index-of":wt,length:jt,slice:Dt,"!":Gt,"!=":class le extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r!==n)}},"<":class ue extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r<n)}},"<=":class ce extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r<=n)}},"==":class oe extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r===n)}},">":class he extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r>n)}},">=":class pe extends q{static parse(t,e){return q.parse(t,e,(r,n)=>r>=n)}},all:Bt,any:kt,case:Vt,coalesce:Ft,match:Mt,within:null,interpolate:st,"interpolate-hcl":st,"interpolate-lab":st,step:zt,let:$t,var:Yt,concat:Zt,downcase:ee,"is-supported-script":null,"resolved-locale":null,upcase:ee,rgb:Wt,rgba:Jt,"to-rgba":Qt,"-":class ye extends W{static parse(t,e){switch(t.length){case 2:return W.parse(t,e,r=>-r[0]);case 3:return W.parse(t,e,r=>r[0]-r[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}},"*":class fe extends W{static parse(t,e){return W.parse(t,e,r=>{let n=1;for(const s of r)n*=s;return n})}},"/":class ge extends W{static parse(t,e){if(3===t.length)return W.parse(t,e,r=>r[0]/r[1]);throw new Error('"/" expects 2 arguments')}},"%":class de extends W{static parse(t,e){if(3===t.length)return W.parse(t,e,r=>r[0]%r[1]);throw new Error('"%" expects 2 arguments')}},"^":class me extends W{static parse(t,e){if(3===t.length)return W.parse(t,e,r=>r[0]**r[1]);throw new Error('"^" expects 1 or 2 arguments')}},"+":class _e extends W{static parse(t,e){return W.parse(t,e,r=>{let n=0;for(const s of r)n+=s;return n})}},abs:$,acos:$,asin:$,atan:$,ceil:$,cos:$,e:$,floor:$,ln:$,ln2:$,log10:$,log2:$,max:$,min:$,pi:$,round:$,sin:$,sqrt:$,tan:$,zoom:It,"heatmap-density":null,"has-id":Kt,none:Ct};class tt{constructor(t){this._expression=t}filter(t,e){if(!this._expression)return!0;try{return this._expression.evaluate(t,e)}catch(r){return console.log(r.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const e=_(t,null,m);return new tt(e)}catch(e){return console.log(e.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===t.length&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"in":return t.length>=3&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let e=1;e<t.length;e++)if(!this.isLegacyFilter(t[1]))return!1;return!0;case"has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;const e=t[0];if(1===t.length)return"any"!==e;switch(e){case"==":return tt.convertComparison("==",t[1],t[2]);case"!=":return tt.negate(tt.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return tt.convertComparison(e,t[1],t[2]);case"in":return tt.convertIn(t[1],t.slice(2));case"!in":return tt.negate(tt.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return tt.convertCombining(e,t.slice(1));case"has":return tt.convertHas(t[1]);case"!has":return tt.negate(tt.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,e,r){switch(e){case"$type":return[t,["geometry-type"],r];case"$id":return[t,["id"],r];default:return[t,["get",e],r]}}static convertIn(t,e){switch(t){case"$type":return["in",["geometry-type"],["literal",e]];case"$id":return["in",["id"],["literal",e]];default:return["in",["get",t],["literal",e]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,e){return[t].concat(e.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}var F=b(1268);class bt{constructor(t,e){let r;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r="number"===t.value;break;default:r=!1}if(null==e&&(e=t.default),Array.isArray(e)&&e.length>0&&re[e[0]]){const s={number:C,color:T,string:c,boolean:m,enum:c};try{const u=_(e,null,"array"===t.type?x(s[t.value]||N,t.length):s[t.type]);this.getValue=this._buildExpression(u,t),this.isDataDriven=!0,u instanceof st&&u.input instanceof It&&(this.interpolator=u)}catch(y){console.log(y.message),this.getValue=this._buildSimple(t.default)}return}r&&"interval"===e.type&&(r=!1);const n=e&&e.stops&&e.stops.length>0;if(n)for(const s of e.stops)s[1]=this._validate(s[1],t);if(this.isDataDriven=!!e&&!!e.property,this.isDataDriven)if(void 0!==e.default&&(e.default=this._validate(e.default,t)),n)switch(e.type){case"identity":this.getValue=this._buildIdentity(e,t);break;case"categorical":this.getValue=this._buildCategorical(e,t);break;default:this.getValue=r?this._buildInterpolate(e,t):this._buildInterval(e,t)}else this.getValue=this._buildIdentity(e,t);else n?this.getValue=r?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,t),this.getValue=this._buildSimple(e))}_validate(t,e){if("number"===e.type){if(t<e.minimum)return e.minimum;if(t>e.maximum)return e.maximum}else"color"===e.type?t=bt._parseColor(t):"enum"===e.type?"string"==typeof t&&(t=e.values.indexOf(t)):"array"===e.type&&"enum"===e.value?t=t.map(r=>"string"==typeof r?e.values.indexOf(r):r):"string"===e.type&&(t=St(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,e){return(r,n)=>{try{const s=t.evaluate(n,r);return void 0===s?e.default:this._validate(s,e)}catch(s){return console.log(s.message),e.default}}}_buildIdentity(t,e){return(r,n)=>{let s;return n&&(s=n.values[t.property]),void 0!==s&&(s=this._validate(s,e)),null!=s?s:void 0!==t.default?t.default:e.default}}_buildCategorical(t,e){return(r,n)=>{let s;return n&&(s=n.values[t.property]),s=this._categorical(s,t.stops),void 0!==s?s:void 0!==t.default?t.default:e.default}}_buildInterval(t,e){return(r,n)=>{let s;return n&&(s=n.values[t.property]),"number"==typeof s?this._interval(s,t.stops):void 0!==t.default?t.default:e.default}}_buildInterpolate(t,e){return(r,n)=>{let s;return n&&(s=n.values[t.property]),"number"==typeof s?this._interpolate(s,t.stops,t.base||1):void 0!==t.default?t.default:e.default}}_buildZoomInterpolate(t){return e=>this._interpolate(e,t.stops,t.base||1)}_buildZoomInterval(t){return e=>this._interval(e,t.stops)}_categorical(t,e){const r=e.length;for(let n=0;n<r;n++)if(e[n][0]===t)return e[n][1]}_interval(t,e){const r=e.length;let n=0;for(let s=0;s<r&&e[s][0]<=t;s++)n=s;return e[n][1]}_interpolate(t,e,r){let n,s;const y=e.length;for(let u=0;u<y;u++){const h=e[u];if(!(h[0]<=t)){s=h;break}n=h}if(n&&s){const u=s[0]-n[0],h=t-n[0],p=1===r?h/u:(r**h-1)/(r**u-1);if(Array.isArray(n[1])){const E=n[1],f=s[1],v=[];for(let S=0;S<E.length;S++)v.push((0,j.sX)(E[S],f[S],p));return v}return(0,j.sX)(n[1],s[1],p)}return n?n[1]:s?s[1]:void 0}static _isEmpty(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:("string"==typeof t&&(t=new B.Z(t)),t instanceof B.Z&&!this._isEmpty(t)?B.Z.toUnitRGBA(t):void 0)}}var Ee=b(39351);class gt{constructor(t,e,r,n){switch(this.type=t,this.typeName=e.type,this.id=e.id,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.layout=e.layout,this.paint=e.paint,this.z=r,this.uid=n,t){case F.fR.BACKGROUND:this._layoutDefinition=F.f2.backgroundLayoutDefinition,this._paintDefinition=F.f2.backgroundPaintDefinition;break;case F.fR.FILL:this._layoutDefinition=F.f2.fillLayoutDefinition,this._paintDefinition=F.f2.fillPaintDefinition;break;case F.fR.LINE:this._layoutDefinition=F.f2.lineLayoutDefinition,this._paintDefinition=F.f2.linePaintDefinition;break;case F.fR.SYMBOL:this._layoutDefinition=F.f2.symbolLayoutDefinition,this._paintDefinition=F.f2.symbolPaintDefinition;break;case F.fR.CIRCLE:this._layoutDefinition=F.f2.circleLayoutDefinition,this._paintDefinition=F.f2.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=tt.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,e,r){let n;const s=this._layoutProperties[t];return s&&(n=s.getValue(e,r)),void 0===n&&(n=this._layoutDefinition[t].default),n}getPaintValue(t,e,r){let n;const s=this._paintProperties[t];return s&&(n=s.getValue(e,r)),void 0===n&&(n=this._paintDefinition[t].default),n}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const e in t)if(t[e].isDataDriven)return!0;return!1}_parseLayout(t){const e={};for(const r in t){const n=this._layoutDefinition[r];n&&(e[r]=new bt(n,t[r]))}return e}_parsePaint(t){const e={};for(const r in t){const n=this._paintDefinition[r];n&&(e[r]=new bt(n,t[r]))}return e}computeAttributesKey(t,e,r,n){let s=0,y=0;for(const u of e){let h=3;if(!u||u!==n){const p=r[u],{isLayout:E,isOptional:f}=p,v=E?this.getLayoutProperty(u):this.getPaintProperty(u);h=null!=v&&v.interpolator?2:null!=v&&v.isDataDriven?1:f&&!v?3:0}y|=h<<s,s+=2}return y<<3|t}}class Ie extends gt{constructor(t,e,r,n){super(t,e,r,n),this.backgroundMaterial=new A(this.computeAttributesKey(O._K.BACKGROUND,A.ATTRIBUTES,A.ATTRIBUTES_INFO))}}class ve extends gt{constructor(t,e,r,n){super(t,e,r,n);const s=this.getPaintProperty("fill-color"),y=this.getPaintProperty("fill-opacity"),u=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=null==s?void 0:s.isDataDriven,this.hasDataDrivenOpacity=null==y?void 0:y.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(null==u?void 0:u.isDataDriven);const h=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!h,this.hasDataDrivenOutlineColor=null==h?void 0:h.isDataDriven,this.hasDataDrivenOutline=h?h.isDataDriven:!!s&&s.isDataDriven,this.hasDataDrivenOutline=(h?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new H(this.computeAttributesKey(O._K.FILL,H.ATTRIBUTES,H.ATTRIBUTES_INFO)),this.outlineMaterial=new z(this.computeAttributesKey(O._K.OUTLINE,this.outlineUsesFillColor?z.ATTRIBUTES_FILL:z.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?z.ATTRIBUTES_INFO_FILL:z.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class Te extends gt{constructor(t,e,r,n){var s,y,u,h,p,E,f,v,S;super(t,e,r,n);const P=this.getPaintProperty("line-pattern");if(this.lineMaterial=new et(this.computeAttributesKey(O._K.LINE,et.ATTRIBUTES,et.ATTRIBUTES_INFO,P?"line-dasharray":"")),this.hasDataDrivenLine=(null==(s=this.getPaintProperty("line-blur"))?void 0:s.isDataDriven)||(null==(y=this.getPaintProperty("line-color"))?void 0:y.isDataDriven)||(null==(u=this.getPaintProperty("line-gap-width"))?void 0:u.isDataDriven)||(null==(h=this.getPaintProperty("line-offset"))?void 0:h.isDataDriven)||(null==(p=this.getPaintProperty("line-opacity"))?void 0:p.isDataDriven)||(null==(E=this.getPaintProperty("line-pattern"))?void 0:E.isDataDriven)||(null==(f=this.getPaintProperty("line-dasharray"))?void 0:f.isDataDriven)||(null==(v=this.getLayoutProperty("line-cap"))?void 0:v.isDataDriven)||(null==(S=this.getPaintProperty("line-width"))?void 0:S.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const w=this.getPaintProperty("line-width");if(!w||"number"==typeof w&&.5*w<Ee.tQ){const K=this.getPaintProperty("line-offset");(!K||"number"==typeof K&&0===K)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,e){let r;switch(e){case U.RL.BUTT:r="Butt";break;case U.RL.ROUND:r="Round";break;case U.RL.SQUARE:r="Square";break;default:r="Butt"}return`dasharray-[${t.toString()}]-${r}`}}class we extends gt{constructor(t,e,r,n){var s,y,u,h,p,E,f,v,S,P,w,K;super(t,e,r,n),this.iconMaterial=new ot(this.computeAttributesKey(O._K.ICON,ot.ATTRIBUTES,ot.ATTRIBUTES_INFO)),this.textMaterial=new lt(this.computeAttributesKey(O._K.TEXT,lt.ATTRIBUTES,lt.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=(null==(s=this.getPaintProperty("icon-color"))?void 0:s.isDataDriven)||(null==(y=this.getPaintProperty("icon-halo-blur"))?void 0:y.isDataDriven)||(null==(u=this.getPaintProperty("icon-halo-color"))?void 0:u.isDataDriven)||(null==(h=this.getPaintProperty("icon-halo-width"))?void 0:h.isDataDriven)||(null==(p=this.getPaintProperty("icon-opacity"))?void 0:p.isDataDriven)||(null==(E=this.getLayoutProperty("icon-size"))?void 0:E.isDataDriven),this.hasDataDrivenText=(null==(f=this.getPaintProperty("text-color"))?void 0:f.isDataDriven)||(null==(v=this.getPaintProperty("text-halo-blur"))?void 0:v.isDataDriven)||(null==(S=this.getPaintProperty("text-halo-color"))?void 0:S.isDataDriven)||(null==(P=this.getPaintProperty("text-halo-width"))?void 0:P.isDataDriven)||(null==(w=this.getPaintProperty("text-opacity"))?void 0:w.isDataDriven)||(null==(K=this.getLayoutProperty("text-size"))?void 0:K.isDataDriven)}}class De extends gt{constructor(t,e,r,n){super(t,e,r,n),this.circleMaterial=new R(this.computeAttributesKey(O._K.CIRCLE,R.ATTRIBUTES,R.ATTRIBUTES_INFO))}}class be{constructor(t,e,r){var n,s,y,u,h;let p;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",e),this.keepUpright=t.getLayoutValue("icon-keep-upright",e),this.optional=t.getLayoutValue("icon-optional",e),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",e),this.rotationAlignment===F.aF.AUTO&&(this.rotationAlignment=r?F.aF.MAP:F.aF.VIEWPORT),p=t.getLayoutProperty("icon-anchor"),null!=(n=p)&&n.isDataDriven?this._anchorProp=p:this.anchor=t.getLayoutValue("icon-anchor",e),p=t.getLayoutProperty("icon-offset"),null!=(s=p)&&s.isDataDriven?this._offsetProp=p:this.offset=t.getLayoutValue("icon-offset",e),p=t.getLayoutProperty("icon-padding"),null!=(y=p)&&y.isDataDriven?this._paddingProp=p:this.padding=t.getLayoutValue("icon-padding",e),p=t.getLayoutProperty("icon-rotate"),null!=(u=p)&&u.isDataDriven?this._rotateProp=p:this.rotate=t.getLayoutValue("icon-rotate",e),p=t.getLayoutProperty("icon-size"),null!=(h=p)&&h.isDataDriven?this._sizeProp=p:this.size=t.getLayoutValue("icon-size",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e))}}class Re{constructor(t,e,r){var n,s,y,u,h,p,E,f,v,S,P;let w;this.allowOverlap=t.getLayoutValue("text-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",e),this.keepUpright=t.getLayoutValue("text-keep-upright",e),this.optional=t.getLayoutValue("text-optional",e),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",e),this.rotationAlignment===F.aF.AUTO&&(this.rotationAlignment=r?F.aF.MAP:F.aF.VIEWPORT),w=t.getLayoutProperty("text-anchor"),null!=(n=w)&&n.isDataDriven?this._anchorProp=w:this.anchor=t.getLayoutValue("text-anchor",e),w=t.getLayoutProperty("text-justify"),null!=(s=w)&&s.isDataDriven?this._justifyProp=w:this.justify=t.getLayoutValue("text-justify",e),w=t.getLayoutProperty("text-letter-spacing"),null!=(y=w)&&y.isDataDriven?this._letterSpacingProp=w:this.letterSpacing=t.getLayoutValue("text-letter-spacing",e),w=t.getLayoutProperty("text-line-height"),null!=(u=w)&&u.isDataDriven?this._lineHeightProp=w:this.lineHeight=t.getLayoutValue("text-line-height",e),w=t.getLayoutProperty("text-max-angle"),null!=(h=w)&&h.isDataDriven?this._maxAngleProp=w:this.maxAngle=t.getLayoutValue("text-max-angle",e),w=t.getLayoutProperty("text-max-width"),null!=(p=w)&&p.isDataDriven?this._maxWidthProp=w:this.maxWidth=t.getLayoutValue("text-max-width",e),w=t.getLayoutProperty("text-offset"),null!=(E=w)&&E.isDataDriven?this._offsetProp=w:this.offset=t.getLayoutValue("text-offset",e),w=t.getLayoutProperty("text-padding"),null!=(f=w)&&f.isDataDriven?this._paddingProp=w:this.padding=t.getLayoutValue("text-padding",e),w=t.getLayoutProperty("text-rotate"),null!=(v=w)&&v.isDataDriven?this._rotateProp=w:this.rotate=t.getLayoutValue("text-rotate",e),w=t.getLayoutProperty("text-size"),null!=(S=w)&&S.isDataDriven?this._sizeProp=w:this.size=t.getLayoutValue("text-size",e),w=t.getLayoutProperty("text-writing-mode"),null!=(P=w)&&P.isDataDriven?this._writingModeProp=w:this.writingMode=t.getLayoutValue("text-writing-mode",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,e)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,e)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,e)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,e)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,e))}}},78364:(rt,M,b)=>{b.d(M,{Z:()=>k});var U=b(1268),O=b(77928);class k{constructor(i){if(this._style=i,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,i.layers||(i.layers=[]),this.version=parseFloat(i.version),this.layers=i.layers.map((a,l,g)=>this._create(a,l,g)),this.layers){let a;for(let l=0;l<this.layers.length;l++)a=this.layers[l],this._layerByName[a.id]=a,this._uidToLayer.set(a.uid,a),a.type===U.fR.BACKGROUND&&this.backgroundBucketIds.push(a.id)}this._identifyRefLayers()}isPainterDataDriven(i){const a=this._layerByName[i];return!!a&&a.isPainterDataDriven()}getStyleLayerId(i){return i>=this.layers.length?null:this.layers[i].id}getStyleLayerByUID(i){const a=this._uidToLayer.get(i);return null!=a?a:null}getStyleLayerIndex(i){const a=this._layerByName[i];return a?this.layers.indexOf(a):-1}setStyleLayer(i,a){if(!i||!i.id)return;const l=this._style;null!=a&&a>=this.layers.length&&(a=this.layers.length-1);let g,I=!0;const d=this._layerByName[i.id];if(d){const L=this.layers.indexOf(d);a||(a=L),a===L?(I=!1,g=k._recreateLayer(i,d),this.layers[a]=g,l.layers[a]=i):(this.layers.splice(L,1),l.layers.splice(L,1),g=this._create(i,a,this.layers),this.layers.splice(a,0,g),l.layers.splice(a,0,i))}else g=this._create(i,a,this.layers),!a||a>=this.layers.length?(this.layers.push(g),l.layers.push(i)):(this.layers.splice(a,0,g),l.layers.splice(a,0,i));this._layerByName[i.id]=g,this._uidToLayer.set(g.uid,g),I&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(i){const a=this._layerByName[i];return a?{type:a.typeName,id:a.id,source:a.source,"source-layer":a.sourceLayer,minzoom:a.minzoom,maxzoom:a.maxzoom,filter:a.filter,layout:a.layout,paint:a.paint}:null}deleteStyleLayer(i){const a=this._layerByName[i];if(a){delete this._layerByName[i],this._uidToLayer.delete(a.uid);const l=this.layers.indexOf(a);this.layers.splice(l,1),this._style.layers.splice(l,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(i){return this._layerByName[i]}getLayoutProperties(i){const a=this._layerByName[i];return a?a.layout:null}getPaintProperties(i){const a=this._layerByName[i];return a?a.paint:null}setPaintProperties(i,a){const l=this._layerByName[i];if(!l)return;const I=k._recreateLayer({type:l.typeName,id:l.id,source:l.source,"source-layer":l.sourceLayer,minzoom:l.minzoom,maxzoom:l.maxzoom,filter:l.filter,layout:l.layout,paint:a},l),d=this.layers.indexOf(l);this.layers[d]=I,this._style.layers[d].paint=a,this._layerByName[l.id]=I,this._uidToLayer.set(l.uid,I)}setLayoutProperties(i,a){const l=this._layerByName[i];if(!l)return;const I=k._recreateLayer({type:l.typeName,id:l.id,source:l.source,"source-layer":l.sourceLayer,minzoom:l.minzoom,maxzoom:l.maxzoom,filter:l.filter,layout:a,paint:l.paint},l),d=this.layers.indexOf(l);this.layers[d]=I,this._style.layers[d].layout=a,this._layerByName[l.id]=I,this._uidToLayer.set(l.uid,I)}setStyleLayerVisibility(i,a){const l=this._layerByName[i];if(!l)return;const g=l.layout||{};g.visibility=a;const d=k._recreateLayer({type:l.typeName,id:l.id,source:l.source,"source-layer":l.sourceLayer,minzoom:l.minzoom,maxzoom:l.maxzoom,filter:l.filter,layout:g,paint:l.paint},l),L=this.layers.indexOf(l);this.layers[L]=d,this._style.layers[L].layout=g,this._layerByName[l.id]=d,this._uidToLayer.set(l.uid,d)}getStyleLayerVisibility(i){var a;const l=this._layerByName[i];if(!l)return"none";const g=l.layout;return null!=(a=null==g?void 0:g.visibility)?a:"visible"}_recomputeZValues(){const i=this.layers,a=1/(i.length+1);for(let l=0;l<i.length;l++)i[l].z=1-(1+l)*a}_identifyRefLayers(){const i=[],a=[];let l=0;for(const d of this.layers){const L=d.layout;if(d.type===U.fR.FILL){var g;const A=d;let R=d.source+"|"+d.sourceLayer;R+=null!=(g="|"+(null==L?void 0:L.visibility))?g:"",R+="|"+d.minzoom,R+="|"+d.maxzoom,R+="|"+JSON.stringify(d.filter),(A.hasDataDrivenFill||A.hasDataDrivenOutline)&&(R+="|"+l),i.push({key:R,layer:d})}else if(d.type===U.fR.LINE){var I;const A=d;let R=d.source+"|"+d.sourceLayer;R+=null!=(I="|"+(null==L?void 0:L.visibility))?I:"",R+="|"+d.minzoom,R+="|"+d.maxzoom,R+="|"+JSON.stringify(d.filter),R+="|"+(void 0!==L?L["line-cap"]:""),R+="|"+(void 0!==L?L["line-join"]:""),A.hasDataDrivenLine&&(R+="|"+l),a.push({key:R,layer:d})}++l}this._assignRefLayers(i),this._assignRefLayers(a)}_assignRefLayers(i){let a,l;i.sort((I,d)=>I.key<d.key?-1:I.key>d.key?1:0);const g=i.length;for(let I=0;I<g;I++){const d=i[I];if(d.key===a)d.layer.refLayerId=l;else if(a=d.key,l=d.layer.id,d.layer.type===U.fR.FILL){if(!d.layer.getPaintProperty("fill-outline-color"))for(let L=I+1;L<g;L++){const A=i[L];if(A.key!==a)break;if(A.layer.getPaintProperty("fill-outline-color")){i[I]=A,i[L]=d,l=A.layer.id;break}}}else if(d.layer.type===U.fR.LINE){let L=d.layer;for(let A=I+1;A<g;A++){const R=i[A];if(R.key!==a)break;const H=R.layer;(L.canUseThinTessellation&&!H.canUseThinTessellation||!L.canUseThinTessellation&&(H.getPaintProperty("line-pattern")||H.getPaintProperty("line-dasharray")))&&(L=H,i[I]=R,i[A]=d,l=R.layer.id)}}}}_create(i,a,l){const g=1-(1+a)*(1/(l.length+1)),I=this._runningId++;switch(i.type){case"background":return new O.Et(U.fR.BACKGROUND,i,g,I);case"fill":return new O.Le(U.fR.FILL,i,g,I);case"line":return new O.gf(U.fR.LINE,i,g,I);case"symbol":return new O.jG(U.fR.SYMBOL,i,g,I);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new O.sj(U.fR.CIRCLE,i,g,I)}throw new Error("Unknown vector tile layer")}static _recreateLayer(i,a){switch(i.type){case"background":return new O.Et(U.fR.BACKGROUND,i,a.z,a.uid);case"fill":return new O.Le(U.fR.FILL,i,a.z,a.uid);case"line":return new O.gf(U.fR.LINE,i,a.z,a.uid);case"symbol":return new O.jG(U.fR.SYMBOL,i,a.z,a.uid);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new O.sj(U.fR.CIRCLE,i,a.z,a.uid)}}}}}]);