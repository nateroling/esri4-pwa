"use strict";var Di=Object.defineProperty,Mn=Object.getOwnPropertySymbols,gi=Object.prototype.hasOwnProperty,Ei=Object.prototype.propertyIsEnumerable,Pn=(Te,we,q)=>we in Te?Di(Te,we,{enumerable:!0,configurable:!0,writable:!0,value:q}):Te[we]=q,Zn=(Te,we)=>{for(var q in we||(we={}))gi.call(we,q)&&Pn(Te,q,we[q]);if(Mn)for(var q of Mn(we))Ei.call(we,q)&&Pn(Te,q,we[q]);return Te};(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[5068],{37780:(Te,we,q)=>{q.d(we,{Z:()=>fe});var Y=q(6729);class fe extends Y.Z{constructor(v){super(),this.immutable=!1,this.setField("url",v),this.immutable=!0}}},22386:(Te,we,q)=>{q.d(we,{Z:()=>fe});var Y=q(6729);class fe extends Y.Z{constructor(v,pe,le,g,S,J){super(),this.attachmentUrl=S,this.immutable=!1,this.setField("id",v),this.setField("name",pe),this.setField("contenttype",le),this.setField("size",g),this.setField("exifinfo",J),this.immutable=!0}}},6729:(Te,we,q)=>{q.d(we,{Z:()=>le});var Y=q(98362),fe=q(47562),b=q(10699),v=q(21674);function pe(g,S=!1){if(null==g)return null;if((0,fe.j)(g))return(0,fe.t)(g);if((0,fe.i)(g))return(0,fe.z)(g);if((0,fe.f)(g))return(0,fe.d)(g);if((0,fe.o)(g))return(0,fe.A)(g);if((0,fe.a)(g)){const M=[];for(const X of g)M.push(pe(X,S));return M}const J=new le;J.immutable=!1;for(const M of Object.keys(g)){const X=g[M];void 0!==X&&J.setField(M,pe(X,S))}return J.immutable=S,J}class le{constructor(S){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=S instanceof le?S.attributes:null==S?{}:S}field(S){const J=S.toLowerCase(),M=this.attributes[S];if(void 0!==M)return M;for(const X in this.attributes)if(X.toLowerCase()===J)return this.attributes[X];throw new Error("Field not Found : "+S)}setField(S,J){if(this.immutable)throw new Error("Dictionary is Immutable");const M=S.toLowerCase();if(void 0===this.attributes[S]){for(const X in this.attributes)if(X.toLowerCase()===M)return void(this.attributes[X]=J);this.attributes[S]=J}else this.attributes[S]=J}hasField(S){const J=S.toLowerCase();if(void 0!==this.attributes[S])return!0;for(const M in this.attributes)if(M.toLowerCase()===J)return!0;return!1}keys(){let S=[];for(const J in this.attributes)S.push(J);return S=S.sort(),S}castToText(){let S="";for(const J in this.attributes){""!==S&&(S+=",");const M=this.attributes[J];null==M?S+=JSON.stringify(J)+":null":(0,fe.i)(M)||(0,fe.j)(M)||(0,fe.f)(M)?S+=JSON.stringify(J)+":"+JSON.stringify(M):M instanceof v.Z||M instanceof Y.Z||M instanceof Array?S+=JSON.stringify(J)+":"+(0,fe.u)(M):M instanceof Date?S+=JSON.stringify(J)+":"+JSON.stringify(M):null!==M&&"object"==typeof M&&void 0!==M.castToText&&(S+=JSON.stringify(J)+":"+M.castToText())}return"{"+S+"}"}static convertObjectToArcadeDictionary(S,J=!0){const M=new le;M.immutable=!1;for(const X in S){const B=S[X];void 0!==B&&M.setField(X.toString(),pe(B))}return M.immutable=J,M}static convertJsonToArcade(S,J=!1){return pe(S,J)}castAsJson(S=null){const J={};for(let M in this.attributes){const X=this.attributes[M];void 0!==X&&(null!=S&&S.keyTranslate&&(M=S.keyTranslate(M)),J[M]=(0,fe.w)(X,S))}return J}castDictionaryValueAsJsonAsync(S,J,M,X=null,B){return(0,fe.x)(M,X,B).then(C=>(S[J]=C,C))}castAsJsonAsync(S=null,J=null){const M={},X=[];for(let B in this.attributes){const C=this.attributes[B];null!=J&&J.keyTranslate&&(B=J.keyTranslate(B)),void 0!==C&&((0,fe.y)(C)||C instanceof v.Z||C instanceof Date?M[B]=(0,fe.w)(C,J):X.push(this.castDictionaryValueAsJsonAsync(M,B,C,S,J)))}return X.length>0?(0,b.$6)(X).then(()=>M):(0,b.DB)(M)}}},42275:(Te,we,q)=>{q.d(we,{Z:()=>M});var Y=q(6729),fe=q(98362),b=q(47562),v=q(10699),pe=q(21674),le=q(49672),g=q(91179),S=q(82054),J=q(62208);class M{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.immutable=!0,this._datefields=null,this.immutable=!0}static createFromGraphic(B){const C=new M;return C._geometry=(0,J.pC)(B.geometry)?B.geometry:null,C.attributes=null==B.attributes?{}:B.attributes,B._sourceLayer?(C._layer=B._sourceLayer,C._datesfixed=!1):B._layer?(C._layer=B._layer,C._datesfixed=!1):B.layer&&"fields"in B.layer?(C._layer=B.layer,C._datesfixed=!1):B.sourceLayer&&"fields"in B.sourceLayer&&(C._layer=B.sourceLayer,C._datesfixed=!1),C}static createFromArcadeFeature(B){const C=new M;return C._datesfixed=B._datesfixed,C.attributes=B.attributes,C._geometry=B._geometry,C._optimizedGeomDefinition=B._optimizedGeomDefinition,B._layer&&(C._layer=B._layer),C}static createFromOptimisedFeature(B,C,T){const H=new M;return H._geometry=B.geometry?{geometry:B.geometry}:null,H._optimizedGeomDefinition=T,H.attributes=B.attributes||{},H._layer=C,H._datesfixed=!1,H}static createFromArcadeDictionary(B){const C=new M;return C.attributes=B.field("attributes"),null!==C.attributes&&C.attributes instanceof Y.Z?(C.attributes=C.attributes.attributes,null===C.attributes&&(C.attributes={})):C.attributes={},C._geometry=B.field("geometry"),null!==C._geometry&&(C._geometry instanceof Y.Z?C._geometry=M.parseGeometryFromDictionary(C._geometry):C._geometry instanceof pe.Z||(C._geometry=null)),C}static createFromGraphicLikeObject(B,C,T=null){const H=new M;return null===C&&(C={}),H.attributes=C,H._geometry=(0,J.pC)(B)?B:null,H._layer=T,H._layer&&(H._datesfixed=!1),H}repurposeFromGraphicLikeObject(B,C,T=null){null===C&&(C={}),this.attributes=C,this._geometry=B||null,this._layer=T,this._datesfixed=!this._layer}castToText(){let B="";!1===this._datesfixed&&this._fixDates();for(const C in this.attributes){""!==B&&(B+=",");const T=this.attributes[C];null==T?B+=JSON.stringify(C)+":null":(0,b.i)(T)||(0,b.j)(T)||(0,b.f)(T)?B+=JSON.stringify(C)+":"+JSON.stringify(T):T instanceof pe.Z||T instanceof fe.Z||T instanceof Array?B+=JSON.stringify(C)+":"+(0,b.u)(T):T instanceof Date?B+=JSON.stringify(C)+":"+JSON.stringify(T):null!==T&&"object"==typeof T&&void 0!==T.castToText&&(B+=JSON.stringify(C)+":"+T.castToText())}return'{"geometry":'+(null===this.geometry()?"null":(0,b.u)(this.geometry()))+',"attributes":{'+B+"}}"}_fixDates(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);const B=[];for(let C=0;C<this._layer.fields.length;C++){const T=this._layer.fields[C];"date"!==T.type&&"esriFieldTypeDate"!==T.type||B.push(T.name)}this._datefields=B,B.length>0&&this._fixDateFields(B),this._datesfixed=!0}_fixDateFields(B){this.attributes=Zn({},this.attributes);for(let C=0;C<B.length;C++){let T=this.attributes[B[C]];if(null!==T)if(void 0===T){for(const H in this.attributes)if(H.toLowerCase()===B[C].toLowerCase()){T=this.attributes[H],null!==T&&(T instanceof Date||(this.attributes[H]=new Date(T)));break}}else T instanceof Date||(this.attributes[B[C]]=new Date(T))}}geometry(){return null===this._geometry||this._geometry instanceof pe.Z||(this._optimizedGeomDefinition?(this._geometry=(0,J.Wg)((0,g.im)((0,S.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,J.Wg)((0,g.im)(this._geometry))),this._geometry}field(B){!1===this._datesfixed&&this._fixDates();const C=this.attributes[B];if(void 0!==C)return C;const T=B.toLowerCase();for(const H in this.attributes)if(H.toLowerCase()===T)return this.attributes[H];if(this._hasFieldDefinition(T))return null;throw new Error("Field not Found : "+B)}_hasFieldDefinition(B){if(null===this._layer)return!1;for(let C=0;C<this._layer.fields.length;C++)if(this._layer.fields[C].name.toLowerCase()===B)return!0;return!1}setField(B,C){if(this.immutable)throw new Error("Feature is Immutable");if(!1===(0,b.y)(C))throw new Error("Illegal Value Assignment to Feature");const T=B.toLowerCase();if(void 0===this.attributes[B]){for(const H in this.attributes)if(H.toLowerCase()===T)return void(this.attributes[H]=C);this.attributes[B]=C}else this.attributes[B]=C}hasField(B){const C=B.toLowerCase();if(void 0!==this.attributes[B])return!0;for(const T in this.attributes)if(T.toLowerCase()===C)return!0;return!!this._hasFieldDefinition(C)}keys(){let B=[];const C={};for(const T in this.attributes)B.push(T),C[T.toLowerCase()]=1;if(null!==this._layer)for(let T=0;T<this._layer.fields.length;T++){const H=this._layer.fields[T];1!==C[H.name.toLowerCase()]&&B.push(H.name)}return B=B.sort(),B}static parseGeometryFromDictionary(B){const C=M._convertDictionaryToJson(B,!0);return void 0!==C.hasm&&(C.hasM=C.hasm,delete C.hasm),void 0!==C.hasz&&(C.hasZ=C.hasz,delete C.hasz),void 0!==C.spatialreference&&(C.spatialReference=C.spatialreference,delete C.spatialreference),void 0!==C.rings&&(C.rings=this._fixPathArrays(C.rings,!0===C.hasZ,!0===C.hasZ)),void 0!==C.paths&&(C.paths=this._fixPathArrays(C.paths,!0===C.hasZ,!0===C.hasM)),void 0!==C.points&&(C.points=this._fixPointArrays(C.points,!0===C.hasZ,!0===C.hasM)),(0,g.im)(C)}static _fixPathArrays(B,C,T){const H=[];if(B instanceof Array)for(let K=0;K<B.length;K++)H.push(this._fixPointArrays(B[K],C,T));else if(B instanceof fe.Z)for(let K=0;K<B.length();K++)H.push(this._fixPointArrays(B.get(K),C,T));return H}static _fixPointArrays(B,C,T){const H=[];if(B instanceof Array)for(let K=0;K<B.length;K++){const ie=B[K];H.push(ie instanceof le.Z?C&&T?[ie.x,ie.y,ie.z,ie.m]:C?[ie.x,ie.y,ie.z]:T?[ie.x,ie.y,ie.m]:[ie.x,ie.y]:ie instanceof fe.Z?ie.toArray():ie)}else if(B instanceof fe.Z)for(let K=0;K<B.length();K++){const ie=B.get(K);H.push(ie instanceof le.Z?C&&T?[ie.x,ie.y,ie.z,ie.m]:C?[ie.x,ie.y,ie.z]:T?[ie.x,ie.y,ie.m]:[ie.x,ie.y]:ie instanceof fe.Z?ie.toArray():ie)}return H}static _convertDictionaryToJson(B,C=!1){const T={};for(const H in B.attributes){let K=B.attributes[H];K instanceof Y.Z&&(K=M._convertDictionaryToJson(K)),C?T[H.toLowerCase()]=K:T[H]=K}return T}static parseAttributesFromDictionary(B){const C={};for(const T in B.attributes){const H=B.attributes[T];if(!(0,b.y)(H))throw new Error("Illegal Argument");C[T]=H}return C}static fromJson(B){let C=null;null!=B.geometry&&(C=(0,g.im)(B.geometry));const T={};if(null!=B.attributes)for(const H in B.attributes){const K=B.attributes[H];if(null===K)T[H]=K;else{if(!((0,b.f)(K)||(0,b.j)(K)||(0,b.i)(K)||(0,b.o)(K)))throw new Error("Illegal Argument");T[H]=K}}return M.createFromGraphicLikeObject(C,T,null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const B=this._layer.gdbVersion;return void 0===B?"":""===B&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":B}castAsJson(B){const C={attributes:{},geometry:!0===(null==B?void 0:B.keepGeometryType)?this.geometry():this.geometry().toJSON()};for(const T in this.attributes){const H=this.attributes[T];void 0!==H&&(C.attributes[T]=(0,b.w)(H,B))}return C}castAsJsonAsync(B=null,C){return(0,v.DB)(this.castAsJson(C))}}},85692:(Te,we,q)=>{q.d(we,{RI:()=>G,ws:()=>Z,B9:()=>z,Es:()=>w,Ay:()=>C,s9:()=>B,_R:()=>le,nB:()=>oe,AW:()=>b});var Y=q(49672),fe=q(11519);function b(D,V,Q){return Math.sqrt((D[0]-V[0])**2+(D[1]-V[1])**2+(void 0!==D[2]&&void 0!==V[2]?(D[2]*Q-V[2]*Q)**2:0))}const v=[];for(const D of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const V=D[0];for(let Q=1;Q<D.length;Q++)v[D[Q]]=V}const pe=[];function le(D){return D.vcsWkid&&void 0!==v[D.vcsWkid]?pe[v[D.vcsWkid]]:D.latestVcsWkid&&void 0!==v[D.latestVcsWkid]?pe[v[D.latestVcsWkid]]:1}function g(D,V,Q){const he={x:0,y:0};V&&(he.z=0),Q&&(he.m=0);let Ae=0,p=D[0];for(let _=0;_<D.length;_++){const E=D[_];if(!1===X(E,p)){const L=M(p,E,V),$=S(p,E,V,Q);$.x*=L,$.y*=L,he.x+=$.x,he.y+=$.y,V&&($.z*=L,he.z+=$.z),Q&&($.m*=L,he.m+=$.m),Ae+=L,p=E}}return Ae>0?(he.x/=Ae,he.y/=Ae,V&&(he.z/=Ae),Q&&(he.m/=Ae)):(he.x=D[0][0],he.y=D[0][1],V&&(he.z=D[0][2]),Q&&V?he.m=D[0][3]:Q&&(he.m=D[0][2])),he}function S(D,V,Q,he){const Ae={x:(D[0]+V[0])/2,y:(D[1]+V[1])/2};return Q&&(Ae.z=(D[2]+V[2])/2),Q&&he?Ae.m=(D[3]+V[3])/2:he&&(Ae.m=(D[2]+V[2])/2),Ae}function J(D,V){if(D.length<=1)return 0;let Q=0;for(let he=1;he<D.length;he++)Q+=M(D[he-1],D[he],V);return Q}function M(D,V,Q){const he=V[0]-D[0],Ae=V[1]-D[1];if(Q){const p=V[2]-V[2];return Math.sqrt(he*he+Ae*Ae+p*p)}return Math.sqrt(he*he+Ae*Ae)}function X(D,V){if(D.length!==V.length)return!1;for(let Q=0;Q<D.length;Q++)if(D[Q]!==V[Q])return!1;return!0}function B(D){const V={x:0,y:0,spatialReference:D.spatialReference.toJSON()},Q={x:0,y:0,spatialReference:D.spatialReference.toJSON()};let he=0,Ae=0;for(let p=0;p<D.paths.length;p++){if(0===D.paths[p].length)continue;const _=J(D.paths[p],!0===D.hasZ);if(0===_){const E=g(D.paths[p],!0===D.hasZ,!0===D.hasM);V.x+=E.x,V.y+=E.y,!0===D.hasZ&&(V.z+=E.z),!0===D.hasM&&(V.m+=E.m),++he}else{const E=g(D.paths[p],!0===D.hasZ,!0===D.hasM);Q.x+=E.x*_,Q.y+=E.y*_,!0===D.hasZ&&(Q.z+=E.z*_),!0===D.hasM&&(Q.m+=E.m*_),Ae+=_}}return Ae>0?(Q.x/=Ae,Q.y/=Ae,!0===D.hasZ&&(Q.z/=Ae),!0===D.hasM&&(Q.m/=Ae),new Y.Z(Q)):he>0?(V.x/=he,V.y/=he,!0===D.hasZ&&(Q.z/=he),!0===D.hasM&&(V.m/=he),new Y.Z(V)):null}function C(D){if(0===D.points.length)return null;let V=0,Q=0,he=0,Ae=0;for(let _=0;_<D.points.length;_++){const E=D.getPoint(_);!0===E.hasZ&&(he+=E.z),!0===E.hasM&&(Ae+=E.m),V+=E.x,Q+=E.y,Ae+=E.m}const p={x:V/D.points.length,y:Q/D.points.length,spatialReference:null};return p.spatialReference=D.spatialReference.toJSON(),!0===D.hasZ&&(p.z=he/D.points.length),!0===D.hasM&&(p.m=Ae/D.points.length),new Y.Z(p)}function K(D,V,Q=0){for(;D<Q;)D+=V;const he=Q+V;for(;D>=he;)D-=V;return D}function ie(D,V){return Math.atan2(V.y-D.y,V.x-D.x)}function G(D,V){return K(ie(D,V),2*Math.PI)*(180/Math.PI)}function z(D,V){return K(Math.PI/2-ie(D,V),2*Math.PI)*(180/Math.PI)}function re(D,V,Q){const he={x:D.x-V.x,y:D.y-V.y},Ae={x:Q.x-V.x,y:Q.y-V.y};return Math.atan2(function H(D,V){return D.x*V.y-V.x*D.y}(he,Ae),function T(D,V){return D.x*V.x+D.y*V.y}(he,Ae))}function Z(D,V,Q){return K(re(D,V,Q),2*Math.PI)*(180/Math.PI)}function w(D,V,Q){return K(-1*re(D,V,Q),2*Math.PI)*(180/Math.PI)}pe[9002]=.3048,pe[9003]=.3048006096012192,pe[9095]=.3048007491;const ee=[0,0];function oe(D){for(let V=0;V<D.length;V++){const Q=D[V];for(let Ae=0;Ae<Q.length-1;Ae++){const p=Q[Ae],_=Q[Ae+1];for(let E=V+1;E<D.length;E++)for(let L=0;L<D[E].length-1;L++){const $=D[E][L],ue=D[E][L+1];if((0,fe.UT)(p,_,$,ue,ee)&&!(ee[0]===p[0]&&ee[1]===p[1]||ee[0]===$[0]&&ee[1]===$[1]||ee[0]===_[0]&&ee[1]===_[1]||ee[0]===ue[0]&&ee[1]===ue[1]))return!0}}const he=Q.length;if(!(he<3))for(let Ae=0;Ae<=he-2;Ae++){const p=Q[Ae],_=Q[Ae+1];for(let E=Ae+2;E<=he-2;E++){const L=Q[E],$=Q[E+1];if((0,fe.UT)(p,_,L,$,ee)&&!(ee[0]===p[0]&&ee[1]===p[1]||ee[0]===L[0]&&ee[1]===L[1]||ee[0]===_[0]&&ee[1]===_[1]||ee[0]===$[0]&&ee[1]===$[1]))return!0}}}return!1}},84228:(Te,we,q)=>{q.d(we,{r:()=>B});var Y=q(47562),fe=q(56683),b=q(27122);function v(C){const T=new Date(C.getTime()),H=T.getFullYear(),K=new Date(0);K.setFullYear(H+1,0,4),K.setHours(0,0,0,0);const ie=pe(K),G=new Date(0);G.setFullYear(H,0,4),G.setHours(0,0,0,0);const z=pe(G);return T.getTime()>=ie.getTime()?H+1:T.getTime()>=z.getTime()?H:H-1}function pe(C){const H=new Date(C.getTime()),K=H.getDay(),ie=(K<1?7:0)+K-1;return H.setDate(H.getDate()-ie),H.setHours(0,0,0,0),H}const J=[0,31,59,90,120,151,181,212,243,273,304,334],M=[0,31,60,91,121,152,182,213,244,274,305,335];function X(C){return null===C?C:isNaN(C.getTime())?null:C}function B(C,T){C.today=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,0,0);const re=new Date;return re.setHours(0,0,0,0),re})},C.now=function(H,K){return T(H,K,function(ie,G,z){return(0,Y.p)(z,0,0),new Date})},C.timestamp=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,0,0);let re=new Date;return re=new Date(re.getUTCFullYear(),re.getUTCMonth(),re.getUTCDate(),re.getUTCHours(),re.getUTCMinutes(),re.getUTCSeconds(),re.getUTCMilliseconds()),re})},C.toutc=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?null:new Date(re.getUTCFullYear(),re.getUTCMonth(),re.getUTCDate(),re.getUTCHours(),re.getUTCMinutes(),re.getUTCSeconds(),re.getUTCMilliseconds())})},C.tolocal=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?null:b.ou.utc(re.getFullYear(),re.getMonth()+1,re.getDate(),re.getHours(),re.getMinutes(),re.getSeconds(),re.getMilliseconds()).toJSDate()})},C.day=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getDate()})},C.month=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getMonth()})},C.year=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getFullYear()})},C.hour=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getHours()})},C.second=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getSeconds()})},C.millisecond=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getMilliseconds()})},C.minute=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getMinutes()})},C.week=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,2);const re=(0,Y.A)(z[0]);if(null===re)return NaN;const Z=(0,Y.t)((0,Y.C)(z[1],0));if(Z<0||Z>6)throw new Error("Invalid Parameter");const w=re.getDate(),ee=re.getMonth(),oe=re.getFullYear(),D=re.getDay(),V=function g(C,T,H){return C+(function S(C){return C%4==0&&(C%100!=0||C%400==0)}(H)?M:J)[T]}(w,ee,oe)-1,Q=Math.floor(V/7);return D-Z+(D-Z<0?7:0)<V-7*Q?Q+1:Q})},C.weekday=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getDay()})},C.isoweekday=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);if(null===re)return NaN;let Z=re.getDay();return 0===Z&&(Z=7),Z})},C.isomonth=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:re.getMonth()+1})},C.isoweek=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);if(null===re)return NaN;const Z=pe(re).getTime()-function le(C){const T=v(C),H=new Date(0);return H.setFullYear(T,0,4),H.setHours(0,0,0,0),pe(H)}(re).getTime();return Math.round(Z/6048e5)+1})},C.isoyear=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,1,1);const re=(0,Y.A)(z[0]);return null===re?NaN:v(re)})},C.date=function(H,K){return T(H,K,function(ie,G,z){if((0,Y.p)(z,0,7),3===z.length)return X(new Date((0,Y.t)(z[0]),(0,Y.t)(z[1]),(0,Y.t)(z[2]),0,0,0,0));if(4===z.length)return X(new Date((0,Y.t)(z[0]),(0,Y.t)(z[1]),(0,Y.t)(z[2]),(0,Y.t)(z[3]),0,0,0));if(5===z.length)return X(new Date((0,Y.t)(z[0]),(0,Y.t)(z[1]),(0,Y.t)(z[2]),(0,Y.t)(z[3]),(0,Y.t)(z[4]),0,0));if(6===z.length)return X(new Date((0,Y.t)(z[0]),(0,Y.t)(z[1]),(0,Y.t)(z[2]),(0,Y.t)(z[3]),(0,Y.t)(z[4]),(0,Y.t)(z[5]),0));if(7===z.length)return X(new Date((0,Y.t)(z[0]),(0,Y.t)(z[1]),(0,Y.t)(z[2]),(0,Y.t)(z[3]),(0,Y.t)(z[4]),(0,Y.t)(z[5]),(0,Y.t)(z[6])));if(2===z.length){let re,Z=(0,Y.d)(z[1]);return""===Z?null:(Z=(0,Y.D)(Z),re="X"===Z?b.ou.fromSeconds((0,Y.t)(z[0])):"x"===Z?b.ou.fromMillis((0,Y.t)(z[0])):b.ou.fromFormat((0,Y.d)(z[0]),Z,{locale:(0,fe.Kd)(),numberingSystem:"latn"}),re.isValid?re.toJSDate():null)}if(1===z.length){if((0,Y.f)(z[0])){if(""===z[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(z[0]))return(0,Y.A)(z[0]+"-01-01")}const re=(0,Y.t)(z[0]);return!1===isNaN(re)?X(new Date(re)):(0,Y.A)(z[0])}return 0===z.length?new Date:void 0})},C.datediff=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,2,3);const re=(0,Y.E)(z[0]),Z=(0,Y.E)(z[1]);if(null===re||null===Z)return NaN;switch((0,Y.d)(z[2]).toLowerCase()){case"days":case"day":case"d":return re.diff(Z,"days").days;case"months":case"month":return re.diff(Z,"months").months;case"minutes":case"minute":case"m":return"M"===z[2]?re.diff(Z,"months").months:re.diff(Z,"minutes").minutes;case"seconds":case"second":case"s":return re.diff(Z,"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return re.diff(Z).milliseconds;case"hours":case"hour":case"h":return re.diff(Z,"hours").hours;case"years":case"year":case"y":return re.diff(Z,"years").years}})},C.dateadd=function(H,K){return T(H,K,function(ie,G,z){(0,Y.p)(z,2,3);const re=(0,Y.E)(z[0]);if(null===re)return null;let Z=(0,Y.t)(z[1]);if(isNaN(Z))return re.toJSDate();let w="milliseconds";switch((0,Y.d)(z[2]).toLowerCase()){case"days":case"day":case"d":w="days",Z=(0,Y.F)(Z);break;case"months":case"month":w="months",Z=(0,Y.F)(Z);break;case"minutes":case"minute":case"m":w="M"===z[2]?"months":"minutes";break;case"seconds":case"second":case"s":w="seconds";break;case"milliseconds":case"millisecond":case"ms":w="milliseconds";break;case"hours":case"hour":case"h":w="hours";break;case"years":case"year":case"y":w="years"}return re.plus({[w]:Z}).toJSDate()})}}},50818:(Te,we,q)=>{q.d(we,{t:()=>g});var Y=q(47562);function fe(S){let J=0;for(let M=0;M<S.length;M++)J+=S[M];return J/S.length}function b(S){const J=fe(S);let M=0;for(let X=0;X<S.length;X++)M+=(J-S[X])**2;return M/S.length}function g(S,J,M=1e3){switch(S.toLowerCase()){case"distinct":return function pe(S,J){const M=[],X={},B=[];for(let C=0;C<S.length;C++){if(null!=S[C]&&S[C]!==Y.v){const T=S[C];if((0,Y.j)(T)||(0,Y.f)(T))void 0===X[T]&&(M.push(T),X[T]=1);else{let H=!1;for(let K=0;K<B.length;K++)!0===(0,Y.e)(B[K],T)&&(H=!0);!1===H&&(B.push(T),M.push(T))}}if(M.length>=J&&-1!==J)return M}return M}(J,M);case"avg":case"mean":return fe((0,Y.W)(J));case"min":return Math.min.apply(Math,(0,Y.W)(J));case"sum":return function v(S){let J=0;for(let M=0;M<S.length;M++)J+=S[M];return J}((0,Y.W)(J));case"max":return Math.max.apply(Math,(0,Y.W)(J));case"stdev":case"stddev":return Math.sqrt(b((0,Y.W)(J)));case"var":case"variance":return b((0,Y.W)(J));case"count":return J.length}return 0}},24499:(Te,we,q)=>{q.d(we,{r:()=>H});var Y=q(6729),fe=q(42275),b=q(26685),v=q(47562),pe=q(2004),le=q(21674),g=q(72854),S=q(49672),J=q(37118),M=q(55214),X=q(85692),B=q(91179),C=q(25748);function T(K){return K&&"esri.arcade.Feature"===K.arcadeDeclaredClass}function H(K,ie){K.ringisclockwise=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=[],oe=!1,D=!1;if(null===w[0])return!1;if((0,v.a)(w[0])){for(const V of w[0]){if(!(V instanceof S.Z))throw new Error("Invalid Argument");ee.push(V.hasZ?V.hasM?[V.x,V.y,V.z,V.m]:[V.x,V.y,V.z]:[V.x,V.y])}ee.length>0&&(oe=w[0][0].hasZ,D=w[0][0].hasM)}else if(w[0]instanceof b.Z)ee=w[0]._elements,ee.length>0&&(oe=w[0]._hasZ,D=w[0]._hasM);else{if(!(0,v.b)(w[0]))throw new Error("Invalid Argument");for(const V of w[0].toArray()){if(!(V instanceof S.Z))throw new Error("Invalid Argument");ee.push(V.hasZ?V.hasM?[V.x,V.y,V.z,V.m]:[V.x,V.y,V.z]:[V.x,V.y])}ee.length>0&&(oe=w[0].get(0).hasZ,D=w[0].get(0).hasM)}return!(ee.length<3)&&(0,C.bu)(ee,D,oe)})},K.polygon=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=null;if(w[0]instanceof Y.Z){if(ee=(0,v.s)(fe.Z.parseGeometryFromDictionary(w[0]),G.spatialReference),!(ee instanceof J.Z))throw new Error("Illegal Parameter")}else ee=w[0]instanceof J.Z?(0,B.im)(w[0].toJSON()):(0,v.s)(new J.Z(JSON.parse(w[0])),G.spatialReference);if(null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.polyline=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=null;if(w[0]instanceof Y.Z){if(ee=(0,v.s)(fe.Z.parseGeometryFromDictionary(w[0]),G.spatialReference),!(ee instanceof M.Z))throw new Error("Illegal Parameter")}else ee=w[0]instanceof M.Z?(0,B.im)(w[0].toJSON()):(0,v.s)(new M.Z(JSON.parse(w[0])),G.spatialReference);if(null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.point=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=null;if(w[0]instanceof Y.Z){if(ee=(0,v.s)(fe.Z.parseGeometryFromDictionary(w[0]),G.spatialReference),!(ee instanceof S.Z))throw new Error("Illegal Parameter")}else ee=w[0]instanceof S.Z?(0,B.im)(w[0].toJSON()):(0,v.s)(new S.Z(JSON.parse(w[0])),G.spatialReference);if(null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.multipoint=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=null;if(w[0]instanceof Y.Z){if(ee=(0,v.s)(fe.Z.parseGeometryFromDictionary(w[0]),G.spatialReference),!(ee instanceof g.Z))throw new Error("Illegal Parameter")}else ee=w[0]instanceof g.Z?(0,B.im)(w[0].toJSON()):(0,v.s)(new g.Z(JSON.parse(w[0])),G.spatialReference);if(null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.extent=function(G,z){return ie(G,z,function(re,Z,w){w=(0,v.H)(w),(0,v.p)(w,1,1);let ee=null;if(w[0]instanceof Y.Z)ee=(0,v.s)(fe.Z.parseGeometryFromDictionary(w[0]),G.spatialReference);else if(w[0]instanceof S.Z){const oe={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJSON()},D=w[0];D.hasZ?(oe.zmin=D.z,oe.zmax=D.z):D.hasM&&(oe.mmin=D.m,oe.mmax=D.m),ee=(0,B.im)(oe)}else ee=w[0]instanceof J.Z||w[0]instanceof M.Z||w[0]instanceof g.Z?(0,B.im)(w[0].extent.toJSON()):w[0]instanceof pe.Z?(0,B.im)(w[0].toJSON()):(0,v.s)(new pe.Z(JSON.parse(w[0])),G.spatialReference);if(null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.geometry=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,1,1);let ee=null;if(null===w[0])return null;if(ee=T(w[0])?(0,v.s)(w[0].geometry(),G.spatialReference):(0,v.s)(w[0]instanceof Y.Z?fe.Z.parseGeometryFromDictionary(w[0]):(0,B.im)(JSON.parse(w[0])),G.spatialReference),null!==ee&&!1===ee.spatialReference.equals(G.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return(0,v.G)(ee)})},K.setgeometry=function(G,z){return ie(G,z,function(re,Z,w){if((0,v.p)(w,2,2),!T(w[0]))throw new Error("Illegal Argument");if(!0===w[0].immutable)throw new Error("Feature is Immutable");if(!(w[1]instanceof le.Z||null===w[1]))throw new Error("Illegal Argument");return w[0]._geometry=w[1],v.v})},K.feature=function(G,z){return ie(G,z,function(re,Z,w){if(0===w.length)throw new Error("Missing Parameters");let ee=null;if(1===w.length)if((0,v.f)(w[0]))ee=fe.Z.fromJson(JSON.parse(w[0]));else if(T(w[0]))ee=fe.Z.createFromArcadeFeature(w[0]);else if(w[0]instanceof le.Z)ee=fe.Z.createFromGraphicLikeObject(w[0],null,null);else{if(!(w[0]instanceof Y.Z))throw new Error("Illegal Argument");{let oe=w[0].hasField("geometry")?w[0].field("geometry"):null,D=w[0].hasField("attributes")?w[0].field("attributes"):null;null!==oe&&oe instanceof Y.Z&&(oe=fe.Z.parseGeometryFromDictionary(oe)),null!==D&&(D=fe.Z.parseAttributesFromDictionary(D)),ee=fe.Z.createFromGraphicLikeObject(oe,D,null)}}else if(2===w.length){let oe=null,D=null;if(null!==w[0])if(w[0]instanceof le.Z)oe=w[0];else{if(!(oe instanceof Y.Z))throw new Error("Illegal Argument");oe=fe.Z.parseGeometryFromDictionary(w[0])}if(null!==w[1]){if(!(w[1]instanceof Y.Z))throw new Error("Illegal Argument");D=fe.Z.parseAttributesFromDictionary(w[1])}ee=fe.Z.createFromGraphicLikeObject(oe,D,null)}else{let oe=null;const D={};if(null!==w[0])if(w[0]instanceof le.Z)oe=w[0];else{if(!(oe instanceof Y.Z))throw new Error("Illegal Argument");oe=fe.Z.parseGeometryFromDictionary(w[0])}for(let V=1;V<w.length;V+=2){const Q=(0,v.d)(w[V]),he=w[V+1];if(!(null==he||(0,v.f)(he)||isNaN(he)||(0,v.o)(he)||(0,v.j)(he)||(0,v.i)(he)))throw new Error("Illegal Argument");if((0,v.c)(he)||!1===(0,v.y)(he))throw new Error("Illegal Argument");D[Q]=he===v.v?null:he}ee=fe.Z.createFromGraphicLikeObject(oe,D,null)}return ee._geometry=(0,v.s)(ee.geometry(),G.spatialReference),ee.immutable=!1,ee})},K.dictionary=function(G,z){return ie(G,z,function(re,Z,w){if(0===w.length){const D=new Y.Z;return D.immutable=!1,D}if(1===w.length&&(0,v.f)(w[0]))try{const D=JSON.parse(w[0]),V=Y.Z.convertObjectToArcadeDictionary(D,!1);return V.immutable=!1,V}catch(D){throw new Error("Missing Parameters or Illegal Json")}if(w.length%2!=0)throw new Error("Missing Parameters");const ee={};for(let D=0;D<w.length;D+=2){const V=(0,v.d)(w[D]),Q=w[D+1];if(!(null==Q||(0,v.f)(Q)||isNaN(Q)||(0,v.o)(Q)||(0,v.j)(Q)||(0,v.i)(Q)||(0,v.a)(Q)||(0,v.b)(Q)))throw new Error("Illegal Argument");if((0,v.c)(Q))throw new Error("Illegal Argument");ee[V]=Q===v.v?null:Q}const oe=new Y.Z(ee);return oe.immutable=!1,oe})},K.haskey=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,2,2);const ee=(0,v.d)(w[1]);if(T(w[0])||w[0]instanceof Y.Z)return w[0].hasField(ee);throw new Error("Illegal Argument")})},K.indexof=function(G,z){return ie(G,z,function(re,Z,w){(0,v.p)(w,2,2);const ee=w[1];if((0,v.a)(w[0])){for(let oe=0;oe<w[0].length;oe++)if((0,v.e)(ee,w[0][oe]))return oe;return-1}if((0,v.b)(w[0])){const oe=w[0].length();for(let D=0;D<oe;D++)if((0,v.e)(ee,w[0].get(D)))return D;return-1}throw new Error("Illegal Argument")})},K.angle=function(G,z){return ie(G,z,function(re,Z,w){if(w=(0,v.H)(w),(0,v.p)(w,2,3),!(w[0]instanceof S.Z))throw new Error("Illegal Argument");if(!(w[1]instanceof S.Z))throw new Error("Illegal Argument");if(w.length>2&&!(w[2]instanceof S.Z))throw new Error("Illegal Argument");return 2===w.length?(0,X.RI)(w[0],w[1]):(0,X.ws)(w[0],w[1],w[2])})},K.bearing=function(G,z){return ie(G,z,function(re,Z,w){if(w=(0,v.H)(w),(0,v.p)(w,2,3),!(w[0]instanceof S.Z))throw new Error("Illegal Argument");if(!(w[1]instanceof S.Z))throw new Error("Illegal Argument");if(w.length>2&&!(w[2]instanceof S.Z))throw new Error("Illegal Argument");return 2===w.length?(0,X.B9)(w[0],w[1]):(0,X.Es)(w[0],w[1],w[2])})},K.isselfintersecting=function(G,z){return ie(G,z,function(re,Z,w){w=(0,v.H)(w),(0,v.p)(w,1,1);let ee=w[0];if(ee instanceof J.Z)return ee.isSelfIntersecting;if(ee instanceof M.Z)return ee=ee.paths,(0,X.nB)(ee);if(ee instanceof g.Z){const oe=ee.points;for(let D=0;D<oe.length;D++)for(let V=0;V<oe.length;V++)if(V!==D){let Q=!0;for(let he=0;he<oe[D].length;he++)if(oe[D][he]!==oe[V][he]){Q=!1;break}if(!0===Q)return!0}}return!(!(0,v.a)(ee)&&!(0,v.b)(ee))&&(ee=(0,v.J)(ee,G.spatialReference),null!==ee&&(ee=ee.paths),(0,X.nB)(ee))})}}},63461:(Te,we,q)=>{q.r(we),q.d(we,{registerFunctions:()=>ie,setGeometryEngine:()=>H});var Y=q(24263),fe=q(27187),b=q(47562),v=q(85692),pe=q(2004),le=q(21674),g=q(72854),S=q(49672),J=q(37118),M=q(55214),X=q(91179),B=q(16730);let C=null;function T(G){return 0===Y.i8.indexOf("4.")?J.Z.fromExtent(G):new J.Z({spatialReference:G.spatialReference,rings:[[[G.xmin,G.ymin],[G.xmin,G.ymax],[G.xmax,G.ymax],[G.xmax,G.ymin],[G.xmin,G.ymin]]]})}function H(G){C=G}function K(G,z){if("polygon"!==G.type&&"polyline"!==G.type&&"extent"!==G.type)return 0;let re=1;(G.spatialReference.vcsWkid||G.spatialReference.latestVcsWkid)&&(re=(0,v._R)(G.spatialReference)/(0,B.c9)(G.spatialReference));let Z=0;if("polyline"===G.type)for(const ee of G.paths)for(let oe=1;oe<ee.length;oe++)Z+=(0,v.AW)(ee[oe],ee[oe-1],re);else if("polygon"===G.type)for(const ee of G.rings){for(let oe=1;oe<ee.length;oe++)Z+=(0,v.AW)(ee[oe],ee[oe-1],re);(ee[0][0]!==ee[ee.length-1][0]||ee[0][1]!==ee[ee.length-1][1]||void 0!==ee[0][2]&&ee[0][2]!==ee[ee.length-1][2])&&(Z+=(0,v.AW)(ee[0],ee[ee.length-1],re))}else"extent"===G.type&&(Z+=2*(0,v.AW)([G.xmin,G.ymin,0],[G.xmax,G.ymin,0],re),Z+=2*(0,v.AW)([G.xmin,G.ymin,0],[G.xmin,G.ymax,0],re),Z*=2,Z+=4*Math.abs((0,b.C)(G.zmax,0)*re-(0,b.C)(G.zmin,0)*re));const w=new M.Z({hasZ:!1,hasM:!1,spatialReference:G.spatialReference,paths:[[0,0],[0,Z]]});return C.planarLength(w,z)}function ie(G,z){function re(Z){if((0,b.p)(Z,2,2),!(Z[0]instanceof le.Z&&Z[1]instanceof le.Z||Z[0]instanceof le.Z&&null===Z[1]||Z[1]instanceof le.Z&&null===Z[0]||null===Z[0]&&null===Z[1]))throw new Error("Illegal Argument")}G.disjoint=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null===D[0]||null===D[1]||C.disjoint(D[0],D[1])})},G.intersects=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.intersects(D[0],D[1])})},G.touches=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.touches(D[0],D[1])})},G.crosses=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.crosses(D[0],D[1])})},G.within=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.within(D[0],D[1])})},G.contains=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.contains(D[0],D[1])})},G.overlaps=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null!==D[1]&&C.overlaps(D[0],D[1])})},G.equals=function(Z,w){return z(Z,w,function(ee,oe,D){return(0,b.p)(D,2,2),D[0]===D[1]||(D[0]instanceof le.Z&&D[1]instanceof le.Z?C.equals(D[0],D[1]):!(!(0,b.o)(D[0])||!(0,b.o)(D[1]))&&D[0].getTime()===D[1].getTime())})},G.relate=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,3,3),D[0]instanceof le.Z&&D[1]instanceof le.Z)return C.relate(D[0],D[1],(0,b.d)(D[2]));if(D[0]instanceof le.Z&&null===D[1]||D[1]instanceof le.Z&&null===D[0]||null===D[0]&&null===D[1])return!1;throw new Error("Illegal Argument")})},G.intersection=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null===D[0]||null===D[1]?null:C.intersect(D[0],D[1])})},G.union=function(Z,w){return z(Z,w,function(ee,oe,D){const V=[];if(0===(D=(0,b.H)(D)).length)throw new Error("Function called with wrong number of Parameters");if(1===D.length)if((0,b.a)(D[0])){const Q=(0,b.H)(D[0]);for(let he=0;he<Q.length;he++)if(null!==Q[he]){if(!(Q[he]instanceof le.Z))throw new Error("Illegal Argument");V.push(Q[he])}}else{if(!(0,b.b)(D[0])){if(D[0]instanceof le.Z)return(0,b.s)((0,fe.r1)(D[0]),Z.spatialReference);if(null===D[0])return null;throw new Error("Illegal Argument")}{const Q=(0,b.H)(D[0].toArray());for(let he=0;he<Q.length;he++)if(null!==Q[he]){if(!(Q[he]instanceof le.Z))throw new Error("Illegal Argument");V.push(Q[he])}}}else for(let Q=0;Q<D.length;Q++)if(null!==D[Q]){if(!(D[Q]instanceof le.Z))throw new Error("Illegal Argument");V.push(D[Q])}return 0===V.length?null:C.union(V)})},G.difference=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null!==D[0]&&null===D[1]?(0,fe.r1)(D[0]):null===D[0]?null:C.difference(D[0],D[1])})},G.symmetricdifference=function(Z,w){return z(Z,w,function(ee,oe,D){return re(D=(0,b.H)(D)),null===D[0]&&null===D[1]?null:null===D[0]?(0,fe.r1)(D[1]):null===D[1]?(0,fe.r1)(D[0]):C.symmetricDifference(D[0],D[1])})},G.clip=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,2),!(D[1]instanceof pe.Z)&&null!==D[1])throw new Error("Illegal Argument");if(null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return null===D[1]?null:C.clip(D[0],D[1])})},G.cut=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,2),!(D[1]instanceof M.Z)&&null!==D[1])throw new Error("Illegal Argument");if(null===D[0])return[];if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return null===D[1]?[(0,fe.r1)(D[0])]:C.cut(D[0],D[1])})},G.area=function(Z,w){return z(Z,w,function(ee,oe,D){if((0,b.p)(D,1,2),null===(D=(0,b.H)(D))[0])return 0;if((0,b.a)(D[0])||(0,b.b)(D[0])){const V=(0,b.K)(D[0],Z.spatialReference);return null===V?0:C.planarArea(V,(0,fe.EI)((0,b.C)(D[1],-1)))}if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.planarArea(D[0],(0,fe.EI)((0,b.C)(D[1],-1)))})},G.areageodetic=function(Z,w){return z(Z,w,function(ee,oe,D){if((0,b.p)(D,1,2),null===(D=(0,b.H)(D))[0])return 0;if((0,b.a)(D[0])||(0,b.b)(D[0])){const V=(0,b.K)(D[0],Z.spatialReference);return null===V?0:C.geodesicArea(V,(0,fe.EI)((0,b.C)(D[1],-1)))}if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.geodesicArea(D[0],(0,fe.EI)((0,b.C)(D[1],-1)))})},G.length=function(Z,w){return z(Z,w,function(ee,oe,D){if((0,b.p)(D,1,2),null===(D=(0,b.H)(D))[0])return 0;if((0,b.a)(D[0])||(0,b.b)(D[0])){const V=(0,b.J)(D[0],Z.spatialReference);return null===V?0:C.planarLength(V,(0,fe.Lz)((0,b.C)(D[1],-1)))}if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.planarLength(D[0],(0,fe.Lz)((0,b.C)(D[1],-1)))})},G.length3d=function(Z,w){return z(Z,w,function(ee,oe,D){if((0,b.p)(D,1,2),null===(D=(0,b.H)(D))[0])return 0;if((0,b.a)(D[0])||(0,b.b)(D[0])){const V=(0,b.J)(D[0],Z.spatialReference);return null===V?0:!0===V.hasZ?K(V,(0,fe.Lz)((0,b.C)(D[1],-1))):C.planarLength(V,(0,fe.Lz)((0,b.C)(D[1],-1)))}if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return!0===D[0].hasZ?K(D[0],(0,fe.Lz)((0,b.C)(D[1],-1))):C.planarLength(D[0],(0,fe.Lz)((0,b.C)(D[1],-1)))})},G.lengthgeodetic=function(Z,w){return z(Z,w,function(ee,oe,D){if((0,b.p)(D,1,2),null===(D=(0,b.H)(D))[0])return 0;if((0,b.a)(D[0])||(0,b.b)(D[0])){const V=(0,b.J)(D[0],Z.spatialReference);return null===V?0:C.geodesicLength(V,(0,fe.Lz)((0,b.C)(D[1],-1)))}if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.geodesicLength(D[0],(0,fe.Lz)((0,b.C)(D[1],-1)))})},G.distance=function(Z,w){return z(Z,w,function(ee,oe,D){D=(0,b.H)(D),(0,b.p)(D,2,3);let V=D[0];((0,b.a)(D[0])||(0,b.b)(D[0]))&&(V=(0,b.L)(D[0],Z.spatialReference));let Q=D[1];if(((0,b.a)(D[1])||(0,b.b)(D[1]))&&(Q=(0,b.L)(D[1],Z.spatialReference)),!(V instanceof le.Z))throw new Error("Illegal Argument");if(!(Q instanceof le.Z))throw new Error("Illegal Argument");return C.distance(V,Q,(0,fe.Lz)((0,b.C)(D[2],-1)))})},G.distancegeodetic=function(Z,w){return z(Z,w,function(ee,oe,D){D=(0,b.H)(D),(0,b.p)(D,2,3);const V=D[0],Q=D[1];if(!(V instanceof S.Z))throw new Error("Illegal Argument");if(!(Q instanceof S.Z))throw new Error("Illegal Argument");const he=new M.Z({paths:[],spatialReference:V.spatialReference});return he.addPath([V,Q]),C.geodesicLength(he,(0,fe.Lz)((0,b.C)(D[2],-1)))})},G.densify=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,3),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");if(V<=0)throw new Error("Illegal Argument");return D[0]instanceof J.Z||D[0]instanceof M.Z?C.densify(D[0],V,(0,fe.Lz)((0,b.C)(D[2],-1))):D[0]instanceof pe.Z?C.densify(T(D[0]),V,(0,fe.Lz)((0,b.C)(D[2],-1))):D[0]})},G.densifygeodetic=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,3),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");if(V<=0)throw new Error("Illegal Argument");return D[0]instanceof J.Z||D[0]instanceof M.Z?C.geodesicDensify(D[0],V,(0,fe.Lz)((0,b.C)(D[2],-1))):D[0]instanceof pe.Z?C.geodesicDensify(T(D[0]),V,(0,fe.Lz)((0,b.C)(D[2],-1))):D[0]})},G.generalize=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,4),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");return C.generalize(D[0],V,(0,b.z)((0,b.C)(D[2],!0)),(0,fe.Lz)((0,b.C)(D[3],-1)))})},G.buffer=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,3),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");return 0===V?(0,fe.r1)(D[0]):C.buffer(D[0],V,(0,fe.Lz)((0,b.C)(D[2],-1)))})},G.buffergeodetic=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,3),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");return 0===V?(0,fe.r1)(D[0]):C.geodesicBuffer(D[0],V,(0,fe.Lz)((0,b.C)(D[2],-1)))})},G.offset=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,2,6),null===D[0])return null;if(!(D[0]instanceof J.Z||D[0]instanceof M.Z))throw new Error("Illegal Argument");const V=(0,b.t)(D[1]);if(isNaN(V))throw new Error("Illegal Argument");const Q=(0,b.t)((0,b.C)(D[4],10));if(isNaN(Q))throw new Error("Illegal Argument");const he=(0,b.t)((0,b.C)(D[5],0));if(isNaN(he))throw new Error("Illegal Argument");return C.offset(D[0],V,(0,fe.Lz)((0,b.C)(D[2],-1)),(0,b.d)((0,b.C)(D[3],"round")).toLowerCase(),Q,he)})},G.rotate=function(Z,w){return z(Z,w,function(ee,oe,D){D=(0,b.H)(D),(0,b.p)(D,2,3);let V=D[0];if(null===V)return null;if(!(V instanceof le.Z))throw new Error("Illegal Argument");V instanceof pe.Z&&(V=J.Z.fromExtent(V));const Q=(0,b.t)(D[1]);if(isNaN(Q))throw new Error("Illegal Argument");const he=(0,b.C)(D[2],null);if(null===he)return C.rotate(V,Q);if(he instanceof S.Z)return C.rotate(V,Q,he);throw new Error("Illegal Argument")})},G.centroid=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,1,1),null===D[0])return null;let V=D[0];if(((0,b.a)(D[0])||(0,b.b)(D[0]))&&(V=(0,b.L)(D[0],Z.spatialReference)),null===V)return null;if(!(V instanceof le.Z))throw new Error("Illegal Argument");return V instanceof S.Z?(0,b.s)((0,fe.r1)(D[0]),Z.spatialReference):V instanceof J.Z?V.centroid:V instanceof M.Z?(0,v.s9)(V):V instanceof g.Z?(0,v.Ay)(V):V instanceof pe.Z?V.center:null})},G.multiparttosinglepart=function(Z,w){return z(Z,w,function(ee,oe,D){D=(0,b.H)(D),(0,b.p)(D,1,1);const V=[];if(null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");if(D[0]instanceof S.Z)return[(0,b.s)((0,fe.r1)(D[0]),Z.spatialReference)];if(D[0]instanceof pe.Z)return[(0,b.s)((0,fe.r1)(D[0]),Z.spatialReference)];const Q=C.simplify(D[0]);if(Q instanceof J.Z){const he=[],Ae=[];for(let p=0;p<Q.rings.length;p++)if(Q.isClockwise(Q.rings[p])){const _=(0,X.im)({rings:[Q.rings[p]],hasZ:!0===Q.hasZ,hasM:!0===Q.hasM,spatialReference:Q.spatialReference.toJSON()});he.push(_)}else Ae.push({ring:Q.rings[p],pt:Q.getPoint(p,0)});for(let p=0;p<Ae.length;p++)for(let _=0;_<he.length;_++)if(he[_].contains(Ae[p].pt)){he[_].addRing(Ae[p].ring);break}return he}if(Q instanceof M.Z){const he=[];for(let Ae=0;Ae<Q.paths.length;Ae++){const p=(0,X.im)({paths:[Q.paths[Ae]],hasZ:!0===Q.hasZ,hasM:!0===Q.hasM,spatialReference:Q.spatialReference.toJSON()});he.push(p)}return he}if(D[0]instanceof g.Z){const he=(0,b.s)((0,fe.r1)(D[0]),Z.spatialReference);for(let Ae=0;Ae<he.points.length;Ae++)V.push(he.getPoint(Ae));return V}return null})},G.issimple=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,1,1),null===D[0])return!0;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.isSimple(D[0])})},G.simplify=function(Z,w){return z(Z,w,function(ee,oe,D){if(D=(0,b.H)(D),(0,b.p)(D,1,1),null===D[0])return null;if(!(D[0]instanceof le.Z))throw new Error("Illegal Argument");return C.simplify(D[0])})}}},53840:(Te,we,q)=>{q.d(we,{r:()=>v});var Y=q(47562),fe=q(75327);function b(pe,le,g){return void 0===g||0==+g?Math[pe](le):(le=+le,g=+g,isNaN(le)||"number"!=typeof g||g%1!=0?NaN:(le=le.toString().split("e"),+((le=(le=Math[pe](+(le[0]+"e"+(le[1]?+le[1]-g:-g)))).toString().split("e"))[0]+"e"+(le[1]?+le[1]+g:g))))}function v(pe,le){function g(S,J,M){const X=(0,Y.t)(S);return isNaN(X)?X:isNaN(J)||isNaN(M)||J>M?NaN:X<J?J:X>M?M:X}pe.number=function(S,J){return le(S,J,function(M,X,B){(0,Y.p)(B,1,2);const C=B[0];if((0,Y.j)(C))return C;if(null===C)return 0;if((0,Y.o)(C)||(0,Y.i)(C))return Number(C);if((0,Y.a)(C))return NaN;if(""===C||void 0===C)return Number(C);if((0,Y.f)(C)){if(void 0!==B[1]){let T=(0,Y.M)(B[1],"\u2030","");return T=(0,Y.M)(T,"\xa4",""),(0,fe.Qc)(C,{pattern:T})}return Number(C.trim())}return Number(C)})},pe.abs=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.abs((0,Y.t)(B[0]))})},pe.acos=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.acos((0,Y.t)(B[0]))})},pe.asin=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.asin((0,Y.t)(B[0]))})},pe.atan=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.atan((0,Y.t)(B[0]))})},pe.atan2=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,2,2),Math.atan2((0,Y.t)(B[0]),(0,Y.t)(B[1]))})},pe.ceil=function(S,J){return le(S,J,function(M,X,B){if((0,Y.p)(B,1,2),2===B.length){let C=(0,Y.t)(B[1]);return isNaN(C)&&(C=0),b("ceil",(0,Y.t)(B[0]),-1*C)}return Math.ceil((0,Y.t)(B[0]))})},pe.round=function(S,J){return le(S,J,function(M,X,B){if((0,Y.p)(B,1,2),2===B.length){let C=(0,Y.t)(B[1]);return isNaN(C)&&(C=0),b("round",(0,Y.t)(B[0]),-1*C)}return Math.round((0,Y.t)(B[0]))})},pe.floor=function(S,J){return le(S,J,function(M,X,B){if((0,Y.p)(B,1,2),2===B.length){let C=(0,Y.t)(B[1]);return isNaN(C)&&(C=0),b("floor",(0,Y.t)(B[0]),-1*C)}return Math.floor((0,Y.t)(B[0]))})},pe.cos=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.cos((0,Y.t)(B[0]))})},pe.isnan=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),"number"==typeof B[0]&&isNaN(B[0])})},pe.exp=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.exp((0,Y.t)(B[0]))})},pe.log=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.log((0,Y.t)(B[0]))})},pe.pow=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,2,2),(0,Y.t)(B[0])**(0,Y.t)(B[1])})},pe.random=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,0,0),Math.random()})},pe.sin=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.sin((0,Y.t)(B[0]))})},pe.sqrt=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.sqrt((0,Y.t)(B[0]))})},pe.tan=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),Math.tan((0,Y.t)(B[0]))})},pe.defaultvalue=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,2,2),null===B[0]||""===B[0]||void 0===B[0]?B[1]:B[0]})},pe.isempty=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),null===B[0]||""===B[0]||void 0===B[0]})},pe.boolean=function(S,J){return le(S,J,function(M,X,B){return(0,Y.p)(B,1,1),(0,Y.z)(B[0])})},pe.constrain=function(S,J){return le(S,J,function(M,X,B){(0,Y.p)(B,3,3);const C=(0,Y.t)(B[1]),T=(0,Y.t)(B[2]);if((0,Y.a)(B[0])){const H=[];for(const K of B[0])H.push(g(K,C,T));return H}if((0,Y.b)(B[0])){const H=[];for(let K=0;K<B[0].length();K++)H.push(g(B[0].get(K),C,T));return H}return g(B[0],C,T)})}}},97536:(Te,we,q)=>{q.d(we,{r:()=>v});var Y=q(47562),fe=q(50818);function b(pe,le,g,S){if(1===S.length){if((0,Y.a)(S[0]))return(0,fe.t)(pe,S[0],-1);if((0,Y.b)(S[0]))return(0,fe.t)(pe,S[0].toArray(),-1)}return(0,fe.t)(pe,S,-1)}function v(pe,le){pe.stdev=function(g,S){return le(g,S,function(J,M,X){return b("stdev",0,0,X)})},pe.variance=function(g,S){return le(g,S,function(J,M,X){return b("variance",0,0,X)})},pe.average=function(g,S){return le(g,S,function(J,M,X){return b("mean",0,0,X)})},pe.mean=function(g,S){return le(g,S,function(J,M,X){return b("mean",0,0,X)})},pe.sum=function(g,S){return le(g,S,function(J,M,X){return b("sum",0,0,X)})},pe.min=function(g,S){return le(g,S,function(J,M,X){return b("min",0,0,X)})},pe.max=function(g,S){return le(g,S,function(J,M,X){return b("max",0,0,X)})},pe.distinct=function(g,S){return le(g,S,function(J,M,X){return b("distinct",0,0,X)})},pe.count=function(g,S){return le(g,S,function(J,M,X){if((0,Y.p)(X,1,1),(0,Y.a)(X[0])||(0,Y.f)(X[0]))return X[0].length;if((0,Y.b)(X[0]))return X[0].length();throw new Error("Invalid Parameters for Count")})}}},31975:(Te,we,q)=>{q.d(we,{r:()=>Rt});var Y=q(37780),fe=q(22386),b=q(6729),v=q(47562),pe=q(77132);const le=N=>(y,R,I)=>(I=I||14,+N(y,R).toFixed(I)),g=(N,y)=>N+y,J=(N,y)=>N*y,M=(N,y)=>N/y,X=(N,y,R)=>le(g)(N,y,R),C=(N,y,R)=>le(J)(N,y,R),T=(N,y,R)=>le(M)(N,y,R),H=360,ie=2*Math.PI,G=3600,Z=60,w=180*G/Math.PI,ee=60*H*Z,oe=90*G,D=180*G,Q=String.fromCharCode(7501);function Ae(N){if(!1===(0,v.f)(N))throw new Error("Invalid Parameter");return N}function p(N,y){const R=10**y;return Math.round(N*R)/R}function E(N){const y=parseFloat(N.toString().replace(Math.trunc(N).toString(),"0"))*Math.sign(N);return N<0?{fraction:y,integer:Math.ceil(N)}:{fraction:y,integer:Math.floor(N)}}var L,$,ue,ye,N;function Ue(N,y){switch(N){case L.north:return"SHORT"===y?"N":"North";case L.east:return"SHORT"===y?"E":"East";case L.south:return"SHORT"===y?"S":"South";case L.west:return"SHORT"===y?"W":"West"}}function ot(N,y,R){for(;N.length<R;)N=y+N;return N}function ut(N,y){return N-Math.floor(N/y)*y}function lt(N){switch(N){case $.truncated_degrees:case $.decimal_degrees:return H;case $.radians:return ie;case $.gradians:return 400;case $.seconds:return ee;case $.fractional_degree_minutes:return 60;case $.fractional_minute_seconds:return Z;default:throw new Error("Unnexpected evaluations")}}function At(N){switch(N.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return ue.north_azimuth;case"POLAR":return ue.polar;case"QUADRANT":return ue.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return ue.south_azimuth}throw new Error("Unsupported direction type")}function Le(N){switch(N.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return $.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return $.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return $.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return $.gradians}throw new Error("Unsupported units")}(N=L||(L={}))[N.north=0]="north",N[N.east=1]="east",N[N.south=2]="south",N[N.west=3]="west",function(N){N[N.decimal_degrees=1]="decimal_degrees",N[N.seconds=2]="seconds",N[N.degrees_minutes_seconds=3]="degrees_minutes_seconds",N[N.radians=4]="radians",N[N.gradians=5]="gradians",N[N.truncated_degrees=6]="truncated_degrees",N[N.fractional_degree_minutes=7]="fractional_degree_minutes",N[N.fractional_minute_seconds=8]="fractional_minute_seconds"}($||($={})),function(N){N[N.north_azimuth=1]="north_azimuth",N[N.polar=2]="polar",N[N.quadrant=3]="quadrant",N[N.south_azimuth=4]="south_azimuth"}(ue||(ue={})),function(N){N[N.meridian=0]="meridian",N[N.direction=1]="direction"}(ye||(ye={}));class Me{constructor(y,R,I){this.m_degrees=y,this.m_minutes=R,this.m_seconds=I}getField(y){switch(y){case $.decimal_degrees:case $.truncated_degrees:return this.m_degrees;case $.fractional_degree_minutes:return this.m_minutes;case $.seconds:case $.fractional_minute_seconds:return this.m_seconds;default:throw new Error("Unnexpected evaluation")}}static secondsToDMS(y){const R=E(y).fraction;let I=E(y).integer;const te=Math.floor(I/G);I-=te*G;const ce=Math.floor(I/Z);return I-=ce*Z,new Me(te,ce,I+R)}static numberToDms(y){const R=E(y).fraction,I=E(y).integer,te=C(E(100*R).fraction,100),ce=E(100*R).integer;return new Me(I,ce,te)}format(y,R){let I=p(this.m_seconds,R),te=this.m_minutes,ce=this.m_degrees;if(y===$.seconds||y===$.fractional_minute_seconds)Z<=I&&(I-=Z,++te),60<=te&&(te=0,++ce),H<=ce&&(ce=0);else if(y===$.fractional_degree_minutes)I=0,te=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ce=this.m_degrees,60<=te&&(te=0,++ce),H<=ce&&(ce=0);else if(y===$.decimal_degrees||y===$.truncated_degrees){const W=T(this.m_seconds,G),se=T(this.m_minutes,60);ce=Math.round(this.m_degrees+se+W),te=0,I=0}return new Me(ce,te,I)}static dmsToSeconds(y,R,I){return y*G+R*Z+I}}class Nt{constructor(y,R,I){this.meridian=y,this.angle=R,this.direction=I}fetchAzimuth(y){return y===ye.meridian?this.meridian:this.direction}}class Be{constructor(y){this.m_angle=y}static createFromAngleAndDirection(y,R){return new Be(new Re(Be._convertDirectionFormat(y.extractAngularUnits($.seconds),R,ue.north_azimuth)))}getAngle(y){const R=this.m_angle.extractAngularUnits($.seconds);switch(y){case ue.north_azimuth:case ue.south_azimuth:case ue.polar:return new Re(Be._convertDirectionFormat(R,ue.north_azimuth,y));case ue.quadrant:{const I=Be.secondsNorthAzimuthToQuadrant(R);return new Re(I.angle)}}}getMeridian(y){const R=this.m_angle.extractAngularUnits($.seconds);switch(y){case ue.north_azimuth:return L.north;case ue.south_azimuth:return L.south;case ue.polar:return L.east;case ue.quadrant:return Be.secondsNorthAzimuthToQuadrant(R).meridian}}getDirection(y){const R=this.m_angle.extractAngularUnits($.seconds);switch(y){case ue.north_azimuth:return L.east;case ue.south_azimuth:return L.west;case ue.polar:return L.north;case ue.quadrant:return Be.secondsNorthAzimuthToQuadrant(R).direction}}static secondsNorthAzimuthToQuadrant(y){const R=y<=oe||y>=972e3?L.north:L.south,I=R===L.north?Math.min(ee-y,y):Math.abs(y-D);return new Nt(R,I,y>D?L.west:L.east)}static createFromAngleMeridianAndDirection(y,R,I){return new Be(new Re(Be.secondsQuadrantToNorthAzimuth(y.extractAngularUnits($.seconds),R,I)))}static secondsQuadrantToNorthAzimuth(y,R,I){return R===L.north?I===L.east?y:ee-y:I===L.east?D-y:D+y}static _convertDirectionFormat(y,R,I){let te=0;switch(R){case ue.north_azimuth:te=y;break;case ue.polar:te=oe-y;break;case ue.quadrant:throw new Error("Unnexpected evaluation");case ue.south_azimuth:te=y+D}let ce=0;switch(I){case ue.north_azimuth:ce=te;break;case ue.polar:ce=oe-te;break;case ue.quadrant:throw new Error("Unnexpected evaluation");case ue.south_azimuth:ce=te-D}return ce=function _(N,y){return N%y}(ce,ee),ce<0?ee+ce:ce}}function xt(N,y,R){let I=null;switch(y){case $.decimal_degrees:I=C(N,G);break;case $.seconds:I=N;break;case $.gradians:I=C(N,3240);break;case $.radians:I=C(N,w);break;default:throw new Error("Unnexpected evaluation")}switch(R){case $.decimal_degrees:return T(I,G);case $.seconds:return I;case $.gradians:return T(I,3240);case $.radians:return I/w;default:throw new Error("Unnexpected evaluation")}}class Re{constructor(y){this.m_seconds=y}static createFromAngleAndUnits(y,R){return new Re(xt(y,R,$.seconds))}extractAngularUnits(y){return xt(this.m_seconds,$.seconds,$e(y))}static createFromDegreesMinutesSeconds(y,R,I){return new Re(X(X(C(y,G),C(R,Z)),I))}}function $e(N){switch(N){case $.decimal_degrees:case $.truncated_degrees:case $.degrees_minutes_seconds:return $.decimal_degrees;case $.gradians:return $.gradians;case $.fractional_degree_minutes:return $.fractional_degree_minutes;case $.radians:return $.radians;case $.seconds:case $.fractional_minute_seconds:return $.seconds}}class ct{constructor(y,R,I,te){this.m_view=y,this.m_angle=R,this.m_merdian=I,this.m_direction=te,this.m_dms=null,this.m_formatted_dms=null}static createFromStringAndBearing(y,R,I){return new ct(y,R.getAngle(I),R.getMeridian(I),R.getDirection(I))}fetchAngle(){return this.m_angle}fetchMeridian(){return this.m_merdian}fetchDirection(){return this.m_direction}fetchView(){return this.m_view}fetchDms(){return null===this.m_dms&&this._calculateDms(),this.m_dms}fetchFormattedDms(){return null===this.m_formatted_dms&&this._calculateDms(),this.m_formatted_dms}_calculateDms(){let y=null,R=$.truncated_degrees,I=0;for(let te=0;te<this.m_view.length;te++){const ce=this.m_view[te];switch(ce){case"m":y=ze(this.m_view,te,ce),R=R===$.truncated_degrees?$.fractional_degree_minutes:R,te=y.newpos;continue;case"s":y=ze(this.m_view,te,ce),R=$.fractional_minute_seconds,I=I<y.rounding?y.rounding:I,te=y.newpos;continue;default:continue}}this.m_dms=Me.secondsToDMS(this.m_angle.extractAngularUnits($.seconds)),this.m_formatted_dms=Me.secondsToDMS(this.m_angle.extractAngularUnits($.seconds)).format(R,I)}}function It(N,y,R,I,te){let ce=null;switch(y){case $.decimal_degrees:case $.radians:case $.gradians:return ce=ut(p(N.extractAngularUnits(y),I),lt(y)),ot(ce.toFixed(I),"0",R+I+(I>0?1:0));case $.truncated_degrees:case $.fractional_degree_minutes:return ce=ut(te.fetchFormattedDms().getField(y),lt(y)),ot(ce.toFixed(I),"0",R+I+(I>0?1:0));case $.fractional_minute_seconds:return ce=ut(p(te.fetchDms().getField(y),I),lt(y)),ot(ce.toFixed(I),"0",R+I+(I>0?1:0));default:throw new Error("Unnexepected evaluation")}}function ht(N){switch(N.toUpperCase().trim()){case"N":case"NORTH":return L.north;case"E":case"EAST":return L.east;case"S":case"SOUTH":return L.south;case"W":case"WEST":return L.west}return null}function Ve(N){const y=parseFloat(N);if((0,v.j)(y)){if(isNaN(y))throw new Error("Invalid conversion");return y}throw new Error("Invalid conversion")}function nt(N,y,R){const I=R===ue.quadrant;let te=null,ce=null,W=0,se=0,de=0;if(I){if(N.length<2)throw new Error("Conversion Error");de=1;const Ce=function Ie(N){switch((0,v.t)(N)){case 1:return{first:L.north,second:L.east};case 2:return{first:L.south,second:L.east};case 3:return{first:L.south,second:L.west};case 4:return{first:L.north,second:L.west}}return null}((0,v.d)(N[N.length-1]));if(Ce?(te=Ce.first,ce=Ce.second):(W=1,te=ht((0,v.d)(N[0])),ce=ht((0,v.d)(N[N.length-1]))),null===te||null===ce)throw new Error("Invalid Conversion")}switch(y){case $.decimal_degrees:case $.radians:case $.gradians:if(0===N.length)throw new Error("Invalid Conversion");return I?Be.createFromAngleMeridianAndDirection(Re.createFromAngleAndUnits(Ve(N[W]),$e(y)),te,ce):Be.createFromAngleAndDirection(Re.createFromAngleAndUnits(Ve(N[W]),$e(y)),R);case $.degrees_minutes_seconds:if(se=N.length-de-W,3===se){const Ce=Re.createFromDegreesMinutesSeconds(Ve(N[W]),Ve(N[W+1]),Ve(N[W+2]));return I?Be.createFromAngleMeridianAndDirection(Ce,te,ce):Be.createFromAngleAndDirection(Ce,R)}if(1===se){const Ce=Ve(N[W]),ve=Me.numberToDms(Ce),Oe=Re.createFromDegreesMinutesSeconds(ve.m_degrees,ve.m_minutes,ve.m_seconds);return I?Be.createFromAngleMeridianAndDirection(Oe,te,ce):Be.createFromAngleAndDirection(Oe,R)}}throw new Error("Conversion Error")}function ze(N,y,R){const I={padding:0,rounding:0,newpos:y};let te=!1;for(;y<N.length;){const ce=N[y];if(ce===R)te?I.rounding++:I.padding++,y++;else{if("."!==ce)break;te=!0,y++}}return I.newpos=y-1,I}function Qe(N,y,R){const I={escaped:"",newpos:y};for(y++;y<N.length;){const te=N[y];if(y++,"]"===te)break;I.escaped+=te}return I.newpos=y-1,I}function mt(N,y,R){if(!(y instanceof b.Z))throw new Error("Invalid Parameter");if(!1===y.hasField("directionType"))throw new Error("Invalid Parameter - Missing directionType");if(!1===y.hasField("angleType"))throw new Error("Invalid Parameter - Missing directionType");const I=At(Ae(y.field("directiontype"))),te=function Tt(N,y,R){if((0,v.j)(N))return function vt(N,y,R){if(R===ue.quadrant)throw new Error("Conversion error");if(y===$.degrees_minutes_seconds){const I=Me.numberToDms(N);return Be.createFromAngleAndDirection(Re.createFromDegreesMinutesSeconds(I.m_degrees,I.m_minutes,I.m_seconds),R)}return Be.createFromAngleAndDirection(Re.createFromAngleAndUnits(N,$e(y)),R)}((0,v.t)(N),y,R);if((0,v.f)(N))return nt(function We(N){const y=[" ","-","/","'",'"',"\\","^","\xb0",Q,"\t","\r","\n","*"];let R="";for(let I=0;I<N.length;I++){const te=N.charAt(I);-1!==y.indexOf(te)?R+="RRSPLITRRSPLITRR":R+=te}return R.split("RRSPLITRRSPLITRR").filter(I=>""!==I)}(N),y,R);if((0,v.a)(N))return nt(N,y,R);if((0,v.b)(N))return nt(N.toArray(),y,R);throw new Error("Conversion Error")}(N,Le(Ae(y.field("angletype"))),I);if(!(R instanceof b.Z))throw new Error("Invalid Parameter");if(!1===R.hasField("directionType"))throw new Error("Invalid Parameter - Missing directionType");if(!1===R.hasField("outputType"))throw new Error("Invalid Parameter - Missing directionType");const ce=At(Ae(R.field("directiontype"))),W=R.hasField("angleType")?Le(Ae(R.field("angletype"))):null,se=Ae(R.field("outputType")).toUpperCase().trim();if(!ce||!se)throw new Error("Conversion error");if(!(W||"TEXT"===se&&R.hasField("format")))throw new Error("Invalid unit");switch(se){case"VALUE":return ce===ue.quadrant||W===$.degrees_minutes_seconds?function rt(N,y,R){const I=N.getAngle(y);if(y===ue.quadrant&&R===$.degrees_minutes_seconds){const te=Me.secondsToDMS(I.extractAngularUnits($.seconds));return[Ue(N.getMeridian(y),"SHORT"),te.m_degrees,te.m_minutes,te.m_seconds,Ue(N.getDirection(y),"SHORT")]}if(R===$.degrees_minutes_seconds){const te=Me.secondsToDMS(I.extractAngularUnits($.seconds));return[te.m_degrees,te.m_minutes,te.m_seconds]}return y===ue.quadrant?[Ue(N.getMeridian(y),"SHORT"),I.extractAngularUnits(R),Ue(N.getDirection(y),"SHORT")]:[I.extractAngularUnits(R)]}(te,ce,W):function ft(N,y,R){const I=$e(R);if(I&&R!==$.degrees_minutes_seconds)return N.getAngle(y).extractAngularUnits(I);throw new Error("Conversion Error")}(te,ce,W);case"TEXT":{let de="";return R.hasField("format")&&(de=(0,v.d)(R.field("format"))),null!==de&&""!==de||(de=function it(N,y){let R="";switch(N){case $.decimal_degrees:R=y===ue.quadrant?"DD.DD\xb0":"DDD.DD\xb0";break;case $.degrees_minutes_seconds:R=y===ue.quadrant?"dd\xb0 mm' ss\"":"ddd\xb0 mm' ss.ss\"";break;case $.radians:R="R.RR";break;case $.gradians:R="GGG.GG"+Q;break;default:throw new Error("Conversion error")}return y===ue.quadrant&&(R="p "+R+" b"),R}(W,ce)),function dt(N,y,R){let I="",te=null,ce=null;const W=ct.createFromStringAndBearing(y,N,R),se={D:$.decimal_degrees,d:$.truncated_degrees,m:$.fractional_degree_minutes,s:$.fractional_minute_seconds,R:$.radians,G:$.gradians};for(let de=0;de<y.length;de++){const Ce=y[de];switch(Ce){case"[":te=Qe(y,de),I+=te.escaped,de=te.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":te=ze(y,de,Ce),ce=N.getAngle(R),I+=It(ce,se[Ce],te.padding,te.rounding,W),de=te.newpos;continue;case"P":case"p":I+=Ue(W.fetchMeridian(),"p"===Ce?"SHORT":"LONG");continue;case"B":case"b":I+=Ue(W.fetchDirection(),"b"===Ce?"SHORT":"LONG");continue;default:I+=Ce}}return I}(te,de,ce)}default:throw new Error("Invalid Parameter")}}const Je=2654435761,Xe=2246822519,pt=3266489917,Ge=668265263,Bt=374761393;function Ot(N){const y=[];for(let R=0,I=N.length;R<I;R++){let te=N.charCodeAt(R);te<128?y.push(te):te<2048?y.push(192|te>>6,128|63&te):te<55296||te>=57344?y.push(224|te>>12,128|te>>6&63,128|63&te):(R++,te=65536+((1023&te)<<10|1023&N.charCodeAt(R)),y.push(240|te>>18,128|te>>12&63,128|te>>6&63,128|63&te))}return new Uint8Array(y)}class $t{constructor(y){this.seed=y,this.totallen=0,this.bufs=[],this.init()}init(){return this.bufs=[],this.totallen=0,this}updateFloatArray(y){const R=[];for(const I of y)isNaN(I)?R.push("NaN"):R.push(I===1/0?"Infinity":I===-1/0?"-Infinity":0===I?"0":I.toString(16));this.update(Ot(R.join("")))}updateIntArray(y){const R=Int32Array.from(y);this.update(new Uint8Array(R.buffer))}updateUint8Array(y){this.update(Uint8Array.from(y))}updateWithString(y){return this.update(Ot(y))}update(y){return this.bufs.push(y),this.totallen+=y.length,this}digest(){const y=new Uint8Array(this.totallen);let R=0;for(const I of this.bufs)y.set(I,R),R+=I.length;return this.init(),this._xxHash32(y,this.seed)}_xxHash32(y,R=0){const I=y;let te=R+Bt&4294967295,ce=0;if(I.length>=16){const se=[R+Je+Xe&4294967295,R+Xe&4294967295,R+0&4294967295,R-Je&4294967295],de=y,Ce=de.length-16;let ve=0;for(ce=0;(4294967280&ce)<=Ce;ce+=4){let et=se[ve]+((de[ce+0]+(de[ce+1]<<8))*Xe+((de[ce+2]+(de[ce+3]<<8))*Xe<<16))&4294967295;et=et<<13|et>>>19,se[ve]=(65535&et)*Je+((et>>>16)*Je<<16)&4294967295,ve=ve+1&3}te=(se[0]<<1|se[0]>>>31)+(se[1]<<7|se[1]>>>25)+(se[2]<<12|se[2]>>>20)+(se[3]<<18|se[3]>>>14)&4294967295}te=te+y.length&4294967295;const W=y.length-4;for(;ce<=W;ce+=4)te=te+((I[ce+0]+(I[ce+1]<<8))*pt+((I[ce+2]+(I[ce+3]<<8))*pt<<16))&4294967295,te=te<<17|te>>>15,te=(65535&te)*Ge+((te>>>16)*Ge<<16)&4294967295;for(;ce<I.length;++ce)te+=I[ce]*Bt,te=te<<11|te>>>21,te=(65535&te)*Je+((te>>>16)*Je<<16)&4294967295;return te^=te>>>15,te=((65535&te)*Xe&4294967295)+((te>>>16)*Xe<<16),te^=te>>>13,te=((65535&te)*pt&4294967295)+((te>>>16)*pt<<16),te^=te>>>16,te<0?te+4294967296:te}}var Qt=q(2004),qt=q(72854),en=q(49672),_t=q(37118),Dt=q(55214),Ct=q(65234);function gt(N,y){if(N.x===y.x&&N.y===y.y){if(N.hasZ){if(N.z!==y.z)return!1}else if(y.hasZ)return!1;if(N.hasM){if(N.m!==y.m)return!1}else if(y.hasM)return!1;return!0}return!1}function ke(N,y,R){if(null!==N)if((0,v.a)(N)){if(y.updateUint8Array([61]),R.map.has(N)){const I=R.map.get(N);y.updateIntArray([61237541^I])}else{R.map.set(N,R.currentLength++);for(const I of N)ke(I,y,R);R.map.delete(N),R.currentLength--}y.updateUint8Array([199])}else if((0,v.b)(N)){if(y.updateUint8Array([61]),R.map.has(N)){const I=R.map.get(N);y.updateIntArray([61237541^I])}else{R.map.set(N,R.currentLength++);for(const I of N.toArray())ke(I,y,R);R.map.delete(N),R.currentLength--}y.updateUint8Array([199])}else{if((0,v.o)(N))return y.updateIntArray([N.getTime()]),void y.updateUint8Array([241]);if((0,v.f)(N))return y.updateIntArray([N.length]),y.updateWithString(N),void y.updateUint8Array([41]);if((0,v.i)(N))y.updateUint8Array([!0===N?1:0,113]);else{if((0,v.j)(N))return y.updateFloatArray([N]),void y.updateUint8Array([173]);if(N instanceof fe.Z)throw new Error("Type not supported in Hash");if(N instanceof Y.Z)throw new Error("Type not supported in Hash");if(!(N instanceof b.Z)){if((0,v.k)(N))throw new Error("Type not supported in Hash");if(N instanceof en.Z)return y.updateIntArray([3833836621]),y.updateIntArray([0]),y.updateFloatArray([N.x]),y.updateIntArray([1]),y.updateFloatArray([N.y]),N.hasZ&&(y.updateIntArray([2]),y.updateFloatArray([N.z])),N.hasM&&(y.updateIntArray([3]),y.updateFloatArray([N.m])),y.updateIntArray([3765347959]),void ke(N.spatialReference.wkid,y,R);if(N instanceof _t.Z){y.updateIntArray([1266616829]);for(let I=0;I<N.rings.length;I++){const te=N.rings[I],ce=[];let W=null,se=null;for(let de=0;de<te.length;de++){const Ce=N.getPoint(I,de);if(0===de)W=Ce;else if(gt(se,Ce))continue;se=Ce,de===te.length-1&&gt(W,Ce)||ce.push(Ce)}y.updateIntArray([1397116793,ce.length]);for(let de=0;de<ce.length;de++){const Ce=ce[de];y.updateIntArray([3962308117,de]),ke(Ce,y,R),y.updateIntArray([2716288009])}y.updateIntArray([2278822459])}return y.updateIntArray([3878477243]),void ke(N.spatialReference.wkid,y,R)}if(N instanceof Dt.Z){y.updateIntArray([4106883559]);for(let I=0;I<N.paths.length;I++){const te=N.paths[I];y.updateIntArray([1397116793,te.length]);for(let ce=0;ce<te.length;ce++)y.updateIntArray([3962308117,ce]),ke(N.getPoint(I,ce),y,R),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}return y.updateIntArray([2568784753]),void ke(N.spatialReference.wkid,y,R)}if(N instanceof qt.Z){y.updateIntArray([588535921,N.points.length]);for(let I=0;I<N.points.length;I++){const te=N.getPoint(I);y.updateIntArray([I]),ke(te,y,R)}return y.updateIntArray([1700171621]),void ke(N.spatialReference.wkid,y,R)}if(N instanceof Qt.Z)return y.updateIntArray([3483648373]),y.updateIntArray([0]),y.updateFloatArray([N.xmax]),y.updateIntArray([1]),y.updateFloatArray([N.xmin]),y.updateIntArray([2]),y.updateFloatArray([N.ymax]),y.updateIntArray([3]),y.updateFloatArray([N.ymin]),N.hasZ&&(y.updateIntArray([4]),y.updateFloatArray([N.zmax]),y.updateIntArray([5]),y.updateFloatArray([N.zmin])),N.hasM&&(y.updateIntArray([6]),y.updateFloatArray([N.mmax]),y.updateIntArray([7]),y.updateFloatArray([N.mmin])),y.updateIntArray([3622027469]),void ke(N.spatialReference.wkid,y,R);if(N instanceof Ct.Z)return y.updateIntArray([14]),null!=N.wkid&&y.updateIntArray([N.wkid]),void(N.wkt&&y.updateWithString(N.wkt));throw(0,v.c)(N)||(0,v.q)(N)||(0,v.r)(N),new Error("Type not supported in Hash")}if(y.updateUint8Array([223]),R.map.has(N)){const I=R.map.get(N);y.updateIntArray([61237541^I])}else{R.map.set(N,R.currentLength++);for(const I of N.keys())y.updateIntArray([I.length]),y.updateWithString(I),y.updateUint8Array([251]),ke(N.field(I),y,R),y.updateUint8Array([239]);R.map.delete(N),R.currentLength--}y.updateUint8Array([73])}}else y.updateUint8Array([0,139])}function Rt(N,y){N.portal=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,1,1),new Y.Z((0,v.d)(W[0]))})},N.trim=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,1,1),(0,v.d)(W[0]).trim()})},N.tohex=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,1,1);const se=(0,v.t)(W[0]);return isNaN(se)?se:se.toString(16)})},N.upper=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,1,1),(0,v.d)(W[0]).toUpperCase()})},N.proper=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,1,2);let se=1;2===W.length&&"firstword"===(0,v.d)(W[1]).toLowerCase()&&(se=2);const de=/\s/,Ce=(0,v.d)(W[0]);let ve="",Oe=!0;for(let qe=0;qe<Ce.length;qe++){let Pe=Ce[qe];de.test(Pe)?1===se&&(Oe=!0):Pe.toUpperCase()!==Pe.toLowerCase()&&(Oe?(Pe=Pe.toUpperCase(),Oe=!1):Pe=Pe.toLowerCase()),ve+=Pe}return ve})},N.lower=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,1,1),(0,v.d)(W[0]).toLowerCase()})},N.guid=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,0,1),W.length>0)switch((0,v.d)(W[0]).toLowerCase()){case"digits":return(0,v.O)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,v.O)();case"digits-hyphen-braces":return"{"+(0,v.O)()+"}";case"digits-hyphen-parentheses":return"("+(0,v.O)()+")"}return"{"+(0,v.O)()+"}"})},N.console=function(R,I){return y(R,I,function(te,ce,W){return 0===W.length||R.console((0,v.d)(1===W.length?W[0]:W)),v.v})},N.mid=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,2,3);let se=(0,v.t)(W[1]);if(isNaN(se))return"";if(se<0&&(se=0),2===W.length)return(0,v.d)(W[0]).substr(se);let de=(0,v.t)(W[2]);return isNaN(de)?"":(de<0&&(de=0),(0,v.d)(W[0]).substr(se,de))})},N.find=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,2,3);let se=0;if(W.length>2){if(se=(0,v.t)((0,v.C)(W[2],0)),isNaN(se))return-1;se<0&&(se=0)}return(0,v.d)(W[1]).indexOf((0,v.d)(W[0]),se)})},N.left=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,2,2);let se=(0,v.t)(W[1]);return isNaN(se)?"":(se<0&&(se=0),(0,v.d)(W[0]).substr(0,se))})},N.right=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,2,2);let se=(0,v.t)(W[1]);return isNaN(se)?"":(se<0&&(se=0),(0,v.d)(W[0]).substr(-1*se,se))})},N.split=function(R,I){return y(R,I,function(te,ce,W){let se;(0,v.p)(W,2,4);let de=(0,v.t)((0,v.C)(W[2],-1));const Ce=(0,v.z)((0,v.C)(W[3],!1));if(-1===de||null===de||!0===Ce?se=(0,v.d)(W[0]).split((0,v.d)(W[1])):(isNaN(de)&&(de=-1),de<-1&&(de=-1),se=(0,v.d)(W[0]).split((0,v.d)(W[1]),de)),!1===Ce)return se;const ve=[];for(let Oe=0;Oe<se.length&&!(-1!==de&&ve.length>=de);Oe++)""!==se[Oe]&&void 0!==se[Oe]&&ve.push(se[Oe]);return ve})},N.text=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,1,2),(0,v.u)(W[0],W[1])})},N.concatenate=function(R,I){return y(R,I,function(te,ce,W){const se=[];if(W.length<1)return"";if((0,v.a)(W[0])){const de=(0,v.C)(W[2],"");for(let Ce=0;Ce<W[0].length;Ce++)se[Ce]=(0,v.u)(W[0][Ce],de);return se.join(W.length>1?W[1]:"")}if((0,v.b)(W[0])){const de=(0,v.C)(W[2],"");for(let Ce=0;Ce<W[0].length();Ce++)se[Ce]=(0,v.u)(W[0].get(Ce),de);return se.join(W.length>1?W[1]:"")}for(let de=0;de<W.length;de++)se[de]=(0,v.u)(W[de]);return se.join("")})},N.reverse=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),(0,v.a)(W[0])){const se=W[0].slice(0);return se.reverse(),se}if((0,v.b)(W[0])){const se=W[0].toArray().slice(0);return se.reverse(),se}throw new Error("Invalid Parameter")})},N.replace=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,3,4);const se=(0,v.d)(W[0]),de=(0,v.d)(W[1]),Ce=(0,v.d)(W[2]);return 4!==W.length||(0,v.z)(W[3])?(0,v.M)(se,de,Ce):se.replace(de,Ce)})},N.schema=function(R,I){return y(R,I,function(te,ce,W){if((0,v.k)(W[0])){const se=(0,v.P)(W[0]);return se?b.Z.convertObjectToArcadeDictionary(se):null}throw new Error("Invalid Parameter")})},N.subtypes=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),(0,v.k)(W[0])){const se=(0,v.Q)(W[0]);return se?b.Z.convertObjectToArcadeDictionary(se):null}throw new Error("Invalid Parameter")})},N.subtypecode=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),(0,v.k)(W[0])){const se=(0,v.Q)(W[0]);if(!se)return null;if(se.subtypeField&&W[0].hasField(se.subtypeField)){const de=W[0].field(se.subtypeField);for(const Ce of se.subtypes)if(Ce.code===de)return Ce.code;return null}return null}throw new Error("Invalid Parameter")})},N.subtypename=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),(0,v.k)(W[0])){const se=(0,v.Q)(W[0]);if(!se)return"";if(se.subtypeField&&W[0].hasField(se.subtypeField)){const de=W[0].field(se.subtypeField);for(const Ce of se.subtypes)if(Ce.code===de)return Ce.name;return""}return""}throw new Error("Invalid Parameter")})},N.gdbversion=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),(0,v.k)(W[0]))return W[0].gdbVersion();throw new Error("Invalid Parameter")})},N.domain=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,2,3),(0,v.k)(W[0])){const se=(0,v.T)(W[0],(0,v.d)(W[1]),void 0===W[2]?void 0:(0,v.t)(W[2]));return se&&se.domain?b.Z.convertObjectToArcadeDictionary("coded-value"===se.domain.type||"codedValue"===se.domain.type?{type:"codedValue",name:se.domain.name,dataType:pe.yE[se.field.type],codedValues:se.domain.codedValues.map(de=>({name:de.name,code:de.code}))}:{type:"range",name:se.domain.name,dataType:pe.yE[se.field.type],min:se.domain.min,max:se.domain.max}):null}throw new Error("Invalid Parameter")})},N.domainname=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,2,4),(0,v.k)(W[0]))return(0,v.U)(W[0],(0,v.d)(W[1]),W[2],void 0===W[3]?void 0:(0,v.t)(W[3]));throw new Error("Invalid Parameter")})},N.domaincode=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,2,4),(0,v.k)(W[0]))return(0,v.V)(W[0],(0,v.d)(W[1]),W[2],void 0===W[3]?void 0:(0,v.t)(W[3]));throw new Error("Invalid Parameter")})},N.urlencode=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),null===W[0])return"";if(W[0]instanceof b.Z){let se="";for(const de of W[0].keys()){const Ce=W[0].field(de);""!==se&&(se+="&"),se+=null===Ce?encodeURIComponent(de)+"=":encodeURIComponent(de)+"="+encodeURIComponent(Ce)}return se}return encodeURIComponent((0,v.d)(W[0]))})},N.hash=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,1,1);const se=new $t(0);return ke(W[0],se,{map:new Map,currentLength:0}),se.digest()})},N.convertdirection=function(R,I){return y(R,I,function(te,ce,W){return(0,v.p)(W,3,3),mt(W[0],W[1],W[2])})},N.fromjson=function(R,I){return y(R,I,function(te,ce,W){if((0,v.p)(W,1,1),!1===(0,v.f)(W[0]))throw new Error("Invalid Parameter");return b.Z.convertJsonToArcade(JSON.parse((0,v.d)(W[0])))})},N.expects=function(R,I){return y(R,I,function(te,ce,W){if(W.length<1)throw new Error("Function called with wrong number of Parameters");return v.v})},N.tocharcode=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,1,2);const se=(0,v.t)((0,v.C)(W[1],0)),de=(0,v.d)(W[0]);if(0===de.length&&1===W.length)return null;if(de.length<=se||se<0)throw new Error("Illegal argument");return de.charCodeAt(se)})},N.tocodepoint=function(R,I){return y(R,I,function(te,ce,W){(0,v.p)(W,1,2);const se=(0,v.t)((0,v.C)(W[1],0)),de=(0,v.d)(W[0]);if(0===de.length&&1===W.length)return null;if(de.length<=se||se<0)throw new Error("Illegal argument");return de.codePointAt(se)})},N.fromcharcode=function(R,I){return y(R,I,function(te,ce,W){if(W.length<1)throw new Error("Function called with wrong number of Parameters");const se=W.map(de=>Math.trunc((0,v.t)(de))).filter(de=>de>=0&&de<=65535);return 0===se.length?null:String.fromCharCode.apply(null,se)})},N.fromcodepoint=function(R,I){return y(R,I,function(te,ce,W){if(W.length<1)throw new Error("Function called with wrong number of Parameters");let se;try{se=W.map(de=>Math.trunc((0,v.t)(de))).filter(de=>de<=1114111&&de>>>0===de)}catch(de){return null}return 0===se.length?null:String.fromCodePoint.apply(null,se)})}}},27187:(Te,we,q)=>{q.d(we,{r1:()=>le,Lz:()=>v,EI:()=>fe,SV:()=>b});var Y=q(2004);function fe(g){if(void 0===g)return null;if("number"==typeof g)return g;let S=g.toLowerCase();switch(S=S.replace(/\s/g,""),S=S.replace(/-/g,""),S){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109413;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nm":case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function b(g){if(null===g)return null;switch(g.type){case"polygon":case"multipoint":case"polyline":return g.extent;case"point":return new Y.Z({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference});case"extent":return g}return null}function v(g){if(void 0===g)return null;if("number"==typeof g)return g;let S=g.toLowerCase();switch(S=S.replace(/\s/g,""),S=S.replace(/-/g,""),S){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9035;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nm":case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function le(g){if(null===g)return null;const S=g.clone();return void 0!==g.cache._geVersion&&(S.cache._geVersion=g.cache._geVersion),S}},19927:(Te,we,q)=>{q.d(we,{gW:()=>pe,AA:()=>D,Kq:()=>H,mb:()=>T,Vf:()=>V,dN:()=>Q,H5:()=>Z,w8:()=>C,bV:()=>B,UA:()=>re,FS:()=>z});const Y={all:{min:"2",max:"2"},none:{min:"2",max:"2"},any:{min:"2",max:"2"},reduce:{min:"2",max:"3"},map:{min:"2",max:"2"},filter:{min:"2",max:"2"},fromcodepoint:{min:"1",max:"*"},fromcharcode:{min:"1",max:"*"},tocodepoint:{min:"1",max:"2"},tocharcode:{min:"1",max:"2"},concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(const p in Y)Y[p].fmin=Y[p].min,Y[p].fmax=Y[p].max;const fe=["featureset","getuser","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","attachments","featuresetbyportalitem"],b=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","simplify","multiparttosinglepart"];function v(p){return"string"==typeof p||p instanceof String}function pe(p,_){const E=Y[p.name.toLowerCase()];void 0===E?Y[p.name.toLowerCase()]="sync"===_?{min:p.min,max:p.max}:{fmin:p.min,fmax:p.max}:"sync"===_?(E.min=p.min,E.max=p.max):(E.fmin=p.min,E.fmax=p.max)}function le(p,_){return"0"!==p.min&&_.length<Number(p.min)||"*"!==p.max&&_.length>Number(p.max)?-2:1}function g(p,_,E){if(null!==E.localScope&&void 0!==E.localScope[p.toLowerCase()]){const L=E.localScope[p.toLowerCase()];if("FormulaFunction"===L.type)return void 0===L.signature&&(L.signature={min:"0",max:"*"}),le(L.signature,_);if("any"===L.type)return void 0===L.signature&&(L.signature={min:"0",max:"*"}),le(L.signature,_)}if(void 0!==E.globalScope[p.toLowerCase()]){const L=E.globalScope[p.toLowerCase()];if("FormulaFunction"===L.type)return void 0===L.signature&&(L.signature={min:"0",max:"*"}),le(L.signature,_);if("any"===L.type)return void 0===L.signature&&(L.signature={min:"0",max:"*"}),le(L.signature,_)}return-1}function S(p,_){if(p)for(const E of p)J(E,_)}function J(p,_){if(p&&!1!==_(p))switch(p.type){case"ArrayExpression":S(p.elements,_);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":J(p.left,_),J(p.right,_);break;case"BlockStatement":case"Program":S(p.body,_);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":J(p.callee,_),S(p.arguments,_);break;case"ExpressionStatement":J(p.expression,_);break;case"ForInStatement":J(p.left,_),J(p.right,_),J(p.body,_);break;case"ForStatement":J(p.init,_),J(p.test,_),J(p.update,_),J(p.body,_);break;case"FunctionDeclaration":J(p.id,_),S(p.params,_),J(p.body,_);break;case"IfStatement":J(p.test,_),J(p.consequent,_),J(p.alternate,_);break;case"MemberExpression":J(p.object,_),J(p.property,_);break;case"ObjectExpression":S(p.properties,_);break;case"Property":J(p.key,_),J(p.value,_);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":J(p.argument,_);break;case"VariableDeclaration":S(p.declarations,_);break;case"VariableDeclarator":J(p.id,_),J(p.init,_);break;case"TemplateLiteral":S(p.expressions,_),S(p.quasis,_)}}function M(p,_=!0){let E=Z(p,"SYNTAX","UNREOGNISED");try{switch(p.type){case"VariableDeclarator":return"Identifier"!==p.id.type?Z(p,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==p.init?M(p.init,!1):"";case"VariableDeclaration":for(let L=0;L<p.declarations.length;L++)if(E=M(p.declarations[L],_),""!==E)return E;return"";case"ForInStatement":if(E=M(p.left,_),""!==E)return E;if("VariableDeclaration"===p.left.type){if(p.left.declarations.length>1)return Z(p,"SYNTAX","ONLY1VAR");if(null!==p.left.declarations[0].init)return Z(p,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==p.left.type)return Z(p,"SYNTAX","LEFTNOTVAR");return E=M(p.right,_),""!==E?E:(E=M(p.body,_),""!==E?E:"");case"ForStatement":return null!==p.test&&(E=M(p.test,_),""!==E)||null!==p.init&&(E=M(p.init,_),""!==E)||null!==p.update&&(E=M(p.update,_),""!==E)||null!==p.body&&(E=M(p.body,_),""!==E)?E:"";case"ContinueStatement":case"EmptyStatement":case"BreakStatement":case"Literal":case"TemplateElement":return"";case"IfStatement":return E=M(p.test,_),""!==E||null!==p.consequent&&(E=M(p.consequent,!1),""!==E)||null!==p.alternate&&(E=M(p.alternate,!1),""!==E)?E:"";case"BlockStatement":{const L=[];for(let $=0;$<p.body.length;$++)"EmptyStatement"!==p.body[$].type&&L.push(p.body[$]);p.body=L;for(let $=0;$<p.body.length;$++)if(E=M(p.body[$],_),""!==E)return E;return""}case"FunctionDeclaration":return!1===_?Z(p,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==p.id.type?Z(p,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):M(p.body,!1);case"ReturnStatement":return null!==p.argument?M(p.argument,_):"";case"UpdateExpression":return"Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type?Z(p,"SYNTAX","ASSIGNMENTTOVARSONLY"):M(p.argument,_);case"AssignmentExpression":if("Identifier"!==p.left.type&&"MemberExpression"!==p.left.type)return Z(p,"SYNTAX","ASSIGNMENTTOVARSONLY");if(E=M(p.left,_),""!==E)return E;switch(p.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:return Z(p,"SYNTAX","OPERATORNOTRECOGNISED")}return M(p.right,!1);case"ExpressionStatement":return M(p.expression,!1);case"Identifier":E="";break;case"MemberExpression":return E=M(p.object,_),""!==E?E:!0===p.computed?M(p.property,_):"";case"CallExpression":if("Identifier"!==p.callee.type)return Z(p,"SYNTAX","ONLYNODESSUPPORTED");E="";for(let L=0;L<p.arguments.length;L++)if(E=M(p.arguments[L],_),""!==E)return E;return"";case"UnaryExpression":E=M(p.argument,_);break;case"BinaryExpression":if(E=M(p.left,_),""!==E||(E=M(p.right,_),""!==E))return E;switch(p.operator){case"|":case"&":case">>":case"<<":case">>>":case"^":case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":break;default:return Z(p,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"LogicalExpression":if(E=M(p.left,_),""!==E||(E=M(p.right),""!==E))return E;switch(p.operator){case"&&":case"||":break;default:return Z(p,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"ArrayExpression":E="";for(let L=0;L<p.elements.length;L++)if(E=M(p.elements[L],_),""!==E)return E;return E;case"TemplateLiteral":E="";for(let L=0;L<p.quasis.length;L++)if(E=M(p.quasis[L],_),""!==E)return E;for(let L=0;L<p.expressions.length;L++)if(E=M(p.expressions[L],_),""!==E)return E;return E;case"ObjectExpression":E="";for(let L=0;L<p.properties.length;L++){if(E="",null!==p.properties[L].key&&("Literal"!==p.properties[L].key.type&&"Identifier"!==p.properties[L].key.type&&(E=Z(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===p.properties[L].key.type)){const $=p.properties[L].key,ue="value"in $?$.value:null;"string"==typeof ue||ue instanceof String||(E=Z(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===E&&(E=M(p.properties[L],_)),""!==E)return E}return E;case"Property":return"Literal"!==p.key.type&&"Identifier"!==p.key.type?Z(p,"SYNTAX","ONLYLITERAL"):("Identifier"!==p.key.type&&(E=M(p.key,_),""!==E)||(E=M(p.value,_)),E);default:return E}return E}catch(L){throw L}}function X(p,_){let E=Z(p,"SYNTAX","UNREOGNISED"),L=null,$="";try{switch(p.type){case"VariableDeclarator":{const ue=null===p.init?"":X(p.init,_);return""!==ue?ue:("Identifier"===p.id.type&&(null===_.localScope?_.globalScope[p.id.name.toLowerCase()]={type:"any"}:_.localScope[p.id.name.toLowerCase()]={type:"any"}),"")}case"FunctionDeclaration":return L=K(p.id.name.toLowerCase(),p),$=function ie(p,_){const E={globalScope:_.globalScope,localScope:{}};for(let L=0;L<p.params.length;L++)E.localScope[p.params[L].name.toLowerCase()]={type:"any"};return X(p.body,E)}(p,_),""!==$?$:null!==_.localScope?Z(p,"SYNTAX","GLOBALFUNCTIONSONLY"):(L.isnative=!1,_.globalScope[p.id.name.toLowerCase()]={type:"FormulaFunction",signature:[L]},"");case"VariableDeclaration":E="";for(let ue=0;ue<p.declarations.length;ue++)if(E=X(p.declarations[ue],_),""!==E)return E;return E;case"IfStatement":return E=X(p.test,_),""!==E?E:"AssignmentExpression"===p.test.type||"UpdateExpression"===p.test.type?Z(p.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):null!==p.consequent&&(E=X(p.consequent,_),""!==E)||null!==p.alternate&&(E=X(p.alternate,_),""!==E)?E:"";case"EmptyStatement":case"BreakStatement":case"ContinueStatement":case"Literal":case"TemplateElement":return"";case"BlockStatement":for(let ue=0;ue<p.body.length;ue++)if(E=X(p.body[ue],_),""!==E)return E;return"";case"ReturnStatement":return null!==p.argument?X(p.argument,_):"";case"ForInStatement":if("VariableDeclaration"===p.left.type){if(p.left.declarations.length>1)return Z(p,"SYNTAX","ONLY1VAR");if(null!==p.left.declarations[0].init)return Z(p,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==p.left.type)return Z(p,"SYNTAX","LEFTNOTVAR");return E=X(p.left,_),""!==E?E:(E=X(p.right,_),""!==E?E:(E=X(p.body,_),""!==E?E:""));case"ForStatement":return null!==p.init&&(E=X(p.init,_),""!==E)||null!==p.test&&(E=X(p.test,_),""!==E)||null!==p.body&&(E=X(p.body,_),""!==E)||null!==p.update&&(E=X(p.update,_),""!==E)?E:"";case"UpdateExpression":{if("Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type)return Z(p,"SYNTAX","ASSIGNMENTTOVARSONLY");let ue=!1;return"MemberExpression"===p.argument.type?X(p.argument,_):(null!==_.localScope&&void 0!==_.localScope[p.argument.name.toLowerCase()]&&(ue=!0),void 0!==_.globalScope[p.argument.name.toLowerCase()]&&(ue=!0),!1===ue?"Identifier "+p.argument.name+" has not been declared.":"")}case"AssignmentExpression":{if("Identifier"!==p.left.type&&"MemberExpression"!==p.left.type)return Z(p,"SYNTAX","ASSIGNMENTTOVARSONLY");let ue=X(p.right,_);if(""!==ue)return ue;let ye=!1;return"MemberExpression"===p.left.type?(ue=X(p.left,_),""!==ue?ue:""):(null!==_.localScope&&void 0!==_.localScope[p.left.name.toLowerCase()]&&(ye=!0),void 0!==_.globalScope[p.left.name.toLowerCase()]&&(ye=!0),!1===ye?"Identifier "+p.left.name+" has not been declared.":"")}case"ExpressionStatement":return X(p.expression,_);case"Identifier":{const ue=p.name.toLowerCase();if(null!==_.localScope&&void 0!==_.localScope[ue])return"";E=void 0!==_.globalScope[ue]?"":Z(p,"SYNTAX","VARIABLENOTFOUND");break}case"MemberExpression":return E=X(p.object,_),""!==E?E:!0===p.computed?X(p.property,_):"";case"CallExpression":{if("Identifier"!==p.callee.type)return Z(p,"SYNTAX","ONLYNODESSUPPORTED");E="";for(let ye=0;ye<p.arguments.length;ye++)if(E=X(p.arguments[ye],_),""!==E)return E;const ue=g(p.callee.name,p.arguments,_);-1===ue&&(E=Z(p,"SYNTAX","NOTFOUND")),-2===ue&&(E=Z(p,"SYNTAX","WRONGSIGNATURE"));break}case"UnaryExpression":E=X(p.argument,_);break;case"BinaryExpression":return E=X(p.left,_),""!==E?E:(E=X(p.right,_),""!==E?E:"");case"LogicalExpression":return E=X(p.left,_),""!==E?E:"AssignmentExpression"===p.left.type||"UpdateExpression"===p.left.type?Z(p.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):(E=X(p.right,_),""!==E?E:"AssignmentExpression"===p.right.type||"UpdateExpression"===p.right.type?Z(p.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"");case"ArrayExpression":E="";for(let ue=0;ue<p.elements.length;ue++)if(E=X(p.elements[ue],_),""!==E)return E;return E;case"TemplateLiteral":E="";for(let ue=0;ue<p.quasis.length;ue++)if(E=X(p.quasis[ue],_),""!==E)return E;for(let ue=0;ue<p.expressions.length;ue++)if(E=X(p.expressions[ue],_),""!==E)return E;return E;case"ObjectExpression":E="";for(let ue=0;ue<p.properties.length;ue++){if(E="",null!==p.properties[ue].key&&("Literal"!==p.properties[ue].key.type&&"Identifier"!==p.properties[ue].key.type&&(E=Z(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===p.properties[ue].key.type)){const ye=p.properties[ue].key,Ue="value"in ye?ye.value:null;"string"==typeof Ue||Ue instanceof String||(E=Z(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===E&&(E=X(p.properties[ue],_)),""!==E)return E}return E;case"Property":return"Literal"!==p.key.type&&"Identifier"!==p.key.type?Z(p,"SYNTAX","ONLYLITERAL"):("Identifier"!==p.key.type&&(E=X(p.key,_),""!==E)||(E=X(p.value,_)),E);default:return E}return E}catch(ue){throw ue}}function B(p,_){let E=!1;const L=_.toLowerCase();return J(p,$=>!E&&("Identifier"===$.type&&$.name&&$.name.toLowerCase()===L&&(E=!0),!0)),E}function C(p,_){let E=!1;const L=_.toLowerCase();return J(p,$=>!(E||"CallExpression"===$.type&&"Identifier"===$.callee.type&&$.callee.name&&$.callee.name.toLowerCase()===L&&(E=!0,1))),E}function T(p){const _=[];return J(p,E=>"MemberExpression"!==E.type||"Identifier"!==E.object.type||(!1===E.computed&&E.object&&E.object.name&&E.property&&"Identifier"===E.property.type&&E.property.name?_.push(E.object.name.toLowerCase()+"."+E.property.name.toLowerCase()):E.object&&E.object.name&&E.property&&"Literal"===E.property.type&&"string"==typeof E.property.value&&_.push(E.object.name.toLowerCase()+"."+E.property.value.toString().toLowerCase()),!1)),_}function H(p){const _=[];return J(p,E=>{if("CallExpression"===E.type){if("Identifier"===E.callee.type&&"expects"===E.callee.name.toLowerCase()){let L="";for(let $=0;$<(E.arguments||[]).length;$++)0===$?"Identifier"===E.arguments[$].type&&(L=E.arguments[$].name.toLowerCase()):L&&"Literal"===E.arguments[$].type&&v(E.arguments[$].value)&&_.push(L+"."+E.arguments[$].value.toLowerCase());return!1}if("Identifier"===E.callee.type&&["domainname","domaincode","domain","haskey"].indexOf(E.callee.name.toLowerCase())>-1&&E.arguments.length>=2){let L="";return"Identifier"===E.arguments[0].type&&(L=E.arguments[0].name.toLowerCase()),L&&"Literal"===E.arguments[1].type&&v(E.arguments[1].value)&&_.push(L+"."+E.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==E.type||"Identifier"!==E.object.type||(!1===E.computed&&E.object&&E.object.name&&E.property&&"Identifier"===E.property.type&&E.property.name?_.push(E.object.name.toLowerCase()+"."+E.property.name.toLowerCase()):E.object&&E.object.name&&E.property&&"Literal"===E.property.type&&"string"==typeof E.property.value&&_.push(E.object.name.toLowerCase()+"."+E.property.value.toString().toLowerCase()),!1)}),_}function K(p,_){const E=[];if(null!=_.params)for(let L=0;L<_.params.length;L++)E.push("any");return{name:p,return:"any",params:E}}function G(p,_,E,L){const $={};null==p&&(p={}),null==E&&(E={}),$.infinity={type:"any"},$.textformatting={type:"any"},$.pi={type:"any"};for(const ue in _)"sync"===L&&void 0!==_[ue].min?$[ue]={type:"FormulaFunction",signature:{min:_[ue].min,max:_[ue].max}}:"sync"!==L&&void 0!==_[ue].fmin&&($[ue]={type:"FormulaFunction",signature:{min:_[ue].fmin,max:_[ue].fmax}});for(let ue=0;ue<E.length;ue++){const ye=E[ue];$[ye.name]={type:"FormulaFunction",signature:ye}}for(const ue in p)$[ue]=p[ue],$[ue].type="any";return $}function z(p,_,E="async",L=Y){const $={globalScope:G(_.vars,L,_.customFunctions,E),localScope:null};return X(p.body[0].body,$)}function re(p){return"BlockStatement"!==p.body[0].body.type?"Invalid formula content.":M(p.body[0].body)}function Z(p,_,E){let L="";switch(_){case"SYNTAX":default:L="Syntax Error: ";break;case"RUNTIME":L="Runtime Error: "}try{switch(p.type){case"IfStatement":switch(E){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":L+=" Assignments not be made in logical tests";break;case"CANNOT_USE_NONBOOLEAN_IN_CONDITION":L+=" Non Boolean used as Condition"}break;case"UpdateExpression":case"AssignmentExpression":switch(E){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":L+=" Assignments not be made in logical tests";break;case"ASSIGNMENTTOVARSONLY":L+=" Assignments can only be made to identifiers"}break;case"ExpressionStatement":L+=" Assignments can only be made to identifiers";break;case"FunctionDeclaration":switch(E){case"GLOBALFUNCTIONSONLY":L+=" Functions cannot be declared as variables";break;case"FUNCTIONMUSTHAVEIDENTIFIER":L+=" Function Definition must have an identifier"}break;case"VariableDeclaration":L+=" Only 1 variable can be declared at a time";break;case"VariableDeclarator":switch(E){case"FUNCTIONVARIABLEDECLARATOR":L+=" Functions cannot be declared as variables";break;case"VARIABLEMUSTHAVEIDENTIFIER":L+=" Variable Definition must have an identifier"}break;case"Identifier":L+=" Identifier Not Found. ",L+=p.name;break;case"ObjectExpression":"OBJECTPROPERTYMUSTBESTRING"===E&&(L+=" Property name must be a string");break;case"ForStatement":"CANNOT_USE_NONBOOLEAN_IN_CONDITION"===E&&(L+=" Non Boolean used as Condition");break;case"ForInStatement":switch(E){case"ONLY1VAR":L+=" Can only declare 1 var for use with IN";break;case"CANNOTDECLAREVAL":L+=" Can only declare value for use with IN";break;case"LEFTNOVAR":L+="Must provide a variable to iterate with.";break;case"VARIABLENOTDECLARED":L+="Variable must be declared before it is used..";break;case"CANNOTITERATETHISTYPE":L+="This type cannot be used in an IN loop"}break;case"MemberExpression":switch(E){case"PROPERTYNOTFOUND":L+="Cannot find member property. ",L+=!1===p.computed&&"Identifier"===p.property.type?p.property.name:"";break;case"OUTOFBOUNDS":L+="Out of Bounds. ",L+=!1===p.computed&&"Identifier"===p.property.type?p.property.name:"";break;case"NOTFOUND":L+="Cannot call member method on null. ",L+=!1===p.computed&&"Identifier"===p.property.type?p.property.name:"";break;case"INVALIDTYPE":L+="Cannot call member property on object of this type. ",L+=!1===p.computed&&"Identifier"===p.property.type?p.property.name:""}break;case"Property":"ONLYLITERAL"===E&&(L+="Property names must be literals or identifiers");break;case"Literal":break;case"CallExpression":switch(E){case"WRONGSIGNATURE":L+="Function signature does not match: ",L+="Identifier"===p.callee.type?p.callee.name:"";break;case"ONLYNODESUPPORTED":L+="Functions must be declared.",L+="Identifier"===p.callee.type?p.callee.name:"";break;case"NOTAFUNCTION":L+="Not a Function: ",L+="Identifier"===p.callee.type?p.callee.name:"";break;case"NOTFOUND":L+="Function Not Found: "+("Identifier"===p.callee.type?p.callee.name:"")}break;case"UnaryExpression":switch(E){case"NOTSUPPORTEDUNARYOPERATOR":L+="Operator "+p.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case"NOTSUPPORTEDTYPE":L+="Unary operator "+p.operator+" cannot be used with this argument."}case"BinaryExpression":"OPERATORNOTRECOGNISED"===E&&(L+="Binary Operator not recognised "+p.operator);break;case"LogicalExpression":switch(E){case"ONLYBOOLEAN":L+="Operator "+p.operator+" cannot be used. Only || or && are allowed values";break;case"ONLYORORAND":L+="Logical Expression "+p.operator+" being applied to parameters that are not boolean."}break;case"ArrayExpression":"FUNCTIONCONTEXTILLEGAL"===E&&(L+=" Cannot Put Function inside Array.");break;default:L+="Expression contains unrecognised code structures."}}catch($){throw $}return L}function w(p,_,E){return{line:p.loc.start.line,character:p.loc.start.column,reason:Z(p,_,E)}}function oe(p,_,E,L,$=!0){if(null===p)throw new Error("Unnexpexted Expression Syntax");let ue=null;try{switch(p.type){case"VariableDeclarator":return"Identifier"!==p.id.type?L.push(w(p,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(p.id.name.toLowerCase(),null===_.localScope?_.globalScope[p.id.name.toLowerCase()]={type:"any"}:_.localScope[p.id.name.toLowerCase()]={type:"any"}),void(null!==p.init&&oe(p.init,_,E,L,$));case"FunctionDeclaration":return!1===$&&L.push(w(p,"SYNTAX","GLOBALFUNCTIONSONLY")),"Identifier"!==p.id.type&&L.push(w(p,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER")),ue=K("",p),function ee(p,_,E,L){const $={globalScope:_.globalScope,localScope:{}};for(let ue=0;ue<p.params.length;ue++)$.localScope[p.params[ue].name.toLowerCase()]={type:"any"};oe(p.body,$,E,L,!1)}(p,_,E,L),null!==_.localScope&&L.push(w(p,"SYNTAX","GLOBALFUNCTIONSONLY")),ue.isnative=!1,void("Identifier"===p.id.type&&(_.globalScope[p.id.name.toLowerCase()]={type:"FormulaFunction",signature:[ue]}));case"VariableDeclaration":for(let ye=0;ye<p.declarations.length;ye++)oe(p.declarations[ye],_,E,L,$);return;case"IfStatement":return null!==p.test&&(oe(p.test,_,E,L,$),"AssignmentExpression"!==p.test.type&&"UpdateExpression"!==p.test.type||L.push(w(p.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))),null!==p.consequent&&oe(p.consequent,_,E,L,$),void(null!==p.alternate&&oe(p.alternate,_,E,L,$));case"EmptyStatement":case"BreakStatement":case"ContinueStatement":case"Literal":case"TemplateElement":return;case"BlockStatement":if(null!==p.body)for(let ye=0;ye<p.body.length;ye++)oe(p.body[ye],_,E,L,$);return;case"ReturnStatement":return void(null!==p.argument&&oe(p.argument,_,E,L,$));case"ForInStatement":return"VariableDeclaration"===p.left.type?(p.left.declarations.length>1&&L.push(w(p,"SYNTAX","ONLY1VAR")),null!==p.left.declarations[0].init&&L.push(w(p,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==p.left.type&&L.push(w(p,"SYNTAX","LEFTNOTVAR")),oe(p.left,_,E,L,$),oe(p.right,_,E,L,$),void oe(p.body,_,E,L,$);case"ForStatement":return null!==p.init&&oe(p.init,_,E,L,$),null!==p.test&&oe(p.test,_,E,L,$),null!==p.body&&oe(p.body,_,E,L,$),void(null!==p.update&&oe(p.update,_,E,L,$));case"UpdateExpression":if("Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type)L.push(w(p,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===p.argument.type){let ye=!1;!1===E&&(null!==_.localScope&&void 0!==_.localScope[p.argument.name.toLowerCase()]&&(ye=!0),void 0!==_.globalScope[p.argument.name.toLowerCase()]&&(ye=!0),!1===ye&&L.push({line:null===p?0:p.loc.start.line,character:null===p?0:p.loc.start.column,reason:"Identifier "+p.argument.name+" has not been declared."}))}"MemberExpression"===p.argument.type&&oe(p.argument,_,E,L,$)}return;case"AssignmentExpression":{switch("Identifier"!==p.left.type&&"MemberExpression"!==p.left.type&&L.push(w(p,"SYNTAX","ASSIGNMENTTOVARSONLY")),p.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:L.push(w(p,"SYNTAX","OPERATORNOTRECOGNISED"))}oe(p.right,_,E,L,$);let ye=!1;return"Identifier"===p.left.type&&(null!==_.localScope&&void 0!==_.localScope[p.left.name.toLowerCase()]&&(ye=!0),void 0!==_.globalScope[p.left.name.toLowerCase()]&&(ye=!0),!1===E&&!1===ye&&L.push({line:null===p?0:p.loc.start.line,character:null===p?0:p.loc.start.column,reason:"Identifier "+p.left.name+" has not been declared."})),void("MemberExpression"===p.left.type&&oe(p.left,_,E,L,$))}case"ExpressionStatement":return void oe(p.expression,_,E,L,$);case"Identifier":{const ye=p.name.toLowerCase();if(null!==_.localScope&&void 0!==_.localScope[ye]||void 0!==_.globalScope[ye])return;!1===E&&L.push(w(p,"SYNTAX","VARIABLENOTFOUND"));break}case"MemberExpression":return oe(p.object,_,E,L,$),void(!0===p.computed&&oe(p.property,_,E,L,$));case"CallExpression":"Identifier"!==p.callee.type&&L.push(w(p,"SYNTAX","ONLYNODESSUPPORTED"));for(let ye=0;ye<p.arguments.length;ye++)oe(p.arguments[ye],_,E,L,$);if("Identifier"===p.callee.type){const ye=g(p.callee.name,p.arguments,_);!1===E&&-1===ye&&L.push(w(p,"SYNTAX","NOTFOUND")),-2===ye&&L.push(w(p,"SYNTAX","WRONGSIGNATURE"))}return;case"UnaryExpression":return void oe(p.argument,_,E,L,$);case"BinaryExpression":switch(oe(p.left,_,E,L,$),oe(p.right,_,E,L,$),p.operator){case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"<<":case">>":case">>>":break;default:L.push(w(p,"SYNTAX","OPERATORNOTRECOGNISED"))}return;case"LogicalExpression":switch(p.operator){case"&&":case"||":break;default:L.push(w(p,"SYNTAX","OPERATORNOTRECOGNISED"))}return oe(p.left,_,E,L,$),"AssignmentExpression"!==p.left.type&&"UpdateExpression"!==p.left.type||L.push(w(p,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")),oe(p.right,_,E,L,$),void("AssignmentExpression"!==p.right.type&&"UpdateExpression"!==p.right.type||L.push(w(p,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));case"ArrayExpression":for(let ye=0;ye<p.elements.length;ye++)oe(p.elements[ye],_,E,L,$);return;case"TemplateLiteral":for(let ye=0;ye<p.quasis.length;ye++)oe(p.quasis[ye],_,E,L,$);for(let ye=0;ye<p.expressions.length;ye++)oe(p.expressions[ye],_,E,L,$);return;case"ObjectExpression":for(let ye=0;ye<p.properties.length;ye++)oe(p.properties[ye],_,E,L,$);return;case"Property":return"Literal"!==p.key.type&&"Identifier"!==p.key.type&&L.push(w(p,"SYNTAX","ONLYLITERAL")),"Literal"===p.key.type&&oe(p.key,_,E,L,$),void oe(p.value,_,E,L,$);default:L.push(w(p,"SYNTAX","UNRECOGNISED"))}return}catch(ye){L.push({line:null===p?0:p.loc.start.line,character:null===p?0:p.loc.start.column,reason:"Unnexpected Syntax"})}}function D(p,_,E,L="async",$=Y){const ue=[];if("BlockStatement"!==p.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];null==_&&(_={vars:{},customFunctions:[]});const ye={globalScope:G(_.vars,$,_.customFunctions,L),localScope:null};try{oe(p.body[0].body,ye,E,ue)}catch(Ue){}return ue}function V(p){const _=[];return J(p,E=>("CallExpression"===E.type&&"Identifier"===E.callee.type&&_.push(E.callee.name.toLowerCase()),!0)),_}function Q(p,_=[]){let E=null;if(void 0===p.usesFeatureSet){null===E&&(E=V(p)),p.usesFeatureSet=!1;for(let L=0;L<E.length;L++)fe.indexOf(E[L])>-1&&(p.usesFeatureSet=!0,p.isAsync=!0);if(!1===p.usesFeatureSet&&_&&_.length>0)for(const L of _)if(B(p,L)){p.usesFeatureSet=!0,p.isAsync=!0;break}}if(void 0===p.usesGeometry){p.usesGeometry=!1,null===E&&(E=V(p));for(let L=0;L<E.length;L++)b.indexOf(E[L])>-1&&(p.usesGeometry=!0)}}},67525:(Te,we,q)=>{q.d(we,{A:()=>le});var Y=q(7652),fe=q(98362),b=q(47562),v=q(10699);const le=Object.freeze({__proto__:null,registerFunctions:function pe(g){function S(M,X){if(X instanceof Y.Z)return g.arcadeCustomFunctionHandler(X);if(X instanceof b.N)return(...B)=>X.fn(M,{preparsed:!0,arguments:B});if(X instanceof b.S)return(...B)=>{if(B.length!==X.paramCount)throw new Error("Invalid parameters");return X.fn(...B)};throw new Error("Invalid Parameter")}function J(M){if(M instanceof fe.Z)return M.toArray();if((0,b.a)(M))return M;throw new Error("Invalid Parameter")}g.functions.array=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,1,2);const H=(0,b.t)(T[0]);if(isNaN(H)||!1===(0,b.B)(H))throw new Error("Invalid Parameter");const K=(0,b.C)(T[1],null),ie=new Array(H);return ie.fill(K),ie})},g.functions.front=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,1,1),(0,b.b)(T[0])){if(T[0].length()<=0)throw new Error("Array is empty");return T[0].get(0)}if((0,b.a)(T[0])){if(T[0].length<=0)throw new Error("Array is empty");return T[0][0]}throw new Error("Invalid Parameter")})},g.functions.back=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,1,1),(0,b.b)(T[0])){if(T[0].length()<=0)throw new Error("Array is empty");return T[0].get(T[0].length()-1)}if((0,b.a)(T[0])){if(T[0].length<=0)throw new Error("Array is empty");return T[0][T[0].length-1]}throw new Error("Invalid Parameter")})},g.functions.push=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,1,2),(0,b.a)(T[0]))return T[0][T[0].length]=T[1],T[0].length;throw new Error("Invalid Parameter")})},g.functions.pop=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,1,1),(0,b.a)(T[0])){if(T[0].length<=0)throw new Error("Array is empty");const H=T[0][T[0].length-1];return T[0].length=T[0].length-1,H}throw new Error("Invalid Parameter")})},g.functions.erase=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,2,2),(0,b.a)(T[0])){let H=(0,b.t)(T[1]);if(isNaN(H)||!1===(0,b.B)(H))throw new Error("Invalid Parameter");const K=T[0];if(K.length<=0)throw new Error("Array is empty");if(H<0&&(H=K.length+H),H<0)throw new Error("Element not found");if(H>=K.length)throw new Error("Index is greater than array");return K.splice(H,1),b.v}throw new Error("Invalid Parameter")})},g.functions.insert=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,3,3),(0,b.a)(T[0])){const H=(0,b.t)(T[1]);if(isNaN(H)||!1===(0,b.B)(H))throw new Error("Invalid Parameter");const K=T[2],ie=T[0];if(H>ie.length)throw new Error("Index is greater than array");if(H<0&&H<-1*ie.length)throw new Error("Index is greater than array");return H===ie.length?(ie[H]=K,b.v):(ie.splice(H,0,K),b.v)}throw new Error("Invalid Parameter")})},g.functions.resize=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,2,3),(0,b.a)(T[0])){const H=(0,b.t)(T[1]);if(isNaN(H)||!1===(0,b.B)(H))throw new Error("Invalid Parameter");if(H<0)throw new Error("Size cannot be negative");const K=(0,b.C)(T[2],null),ie=T[0];if(ie.length>=H)return ie.length=H,b.v;const G=ie.length;ie.length=H;for(let z=G;z<ie.length;z++)ie[z]=K;return b.v}throw new Error("Invalid Parameter")})},g.functions.includes=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,2,2),(0,b.a)(T[0])){const H=T[1];return T[0].findIndex(K=>(0,b.e)(K,H))>-1}if((0,b.b)(T[0])){const H=T[1];return T[0].toArray().findIndex(K=>(0,b.e)(K,H))>-1}throw new Error("Invalid Parameter")})},g.functions.slice=function(M,X){return g.standardFunction(M,X,function(B,C,T){if((0,b.p)(T,1,3),(0,b.a)(T[0])){const H=(0,b.t)((0,b.C)(T[1],0)),K=(0,b.t)((0,b.C)(T[2],T[0].length));if(isNaN(H)||!1===(0,b.B)(H))throw new Error("Invalid Parameter");if(isNaN(K)||!1===(0,b.B)(K))throw new Error("Invalid Parameter");return T[0].slice(H,K)}if((0,b.b)(T[0])){const H=T[0],K=(0,b.t)((0,b.C)(T[1],0)),ie=(0,b.t)((0,b.C)(T[2],H.length()));if(isNaN(K)||!1===(0,b.B)(K))throw new Error("Invalid Parameter");if(isNaN(ie)||!1===(0,b.B)(ie))throw new Error("Invalid Parameter");return H.toArray().slice(K,ie)}throw new Error("Invalid Parameter")})},g.functions.splice=function(M,X){return g.standardFunction(M,X,function(B,C,T){const H=[];for(let K=0;K<T.length;K++)(0,b.a)(T[K])?H.push(...T[K]):(0,b.b)(T[K])?H.push(...T[K].toArray()):H.push(T[K]);return H})},"sync"===g.mode&&(g.functions.any=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]);for(const ie of K){const G=H(ie);if((0,b.i)(G)&&!0===G)return!0}return!1})},g.functions.all=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]);for(const ie of K)if(!0!==H(ie))return!1;return!0})},g.functions.none=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]);for(const ie of K)if(!0===H(ie))return!1;return!0})},g.functions.reduce=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,3);const H=S(M,T[1]),K=J(T[0]);return 2===T.length?0===K.length?null:K.reduce((ie,G)=>{const z=H(ie,G);return void 0!==z&&z!==b.v?z:null}):K.reduce((ie,G)=>{const z=H(ie,G);return void 0!==z&&z!==b.v?z:null},T[2])})},g.functions.map=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie=[];for(const G of K){const z=H(G);ie.push(void 0!==z&&z!==b.v?z:null)}return ie})},g.functions.filter=function(M,X){return g.standardFunction(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie=[];for(const G of K)!0===H(G)&&ie.push(G);return ie})}),"async"===g.mode&&(g.functions.any=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie={result:!1};return K.reduce((G,z,re)=>G.then(Z=>{if(re>0&&!0===Z&&(ie.result=!0),!0===ie.result)return(0,v.DB)(!0);const w=H(z);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve(!1)).then(G=>(!0===G&&(ie.result=!0),ie.result))})},g.functions.all=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie={result:!0};return K.reduce((G,z,re)=>G.then(Z=>{if(re>0&&!0!==Z&&(ie.result=!1),!1===ie.result)return(0,v.DB)(!1);const w=H(z);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve(!0)).then(G=>(!0!==G&&(ie.result=!1),ie.result))})},g.functions.none=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie={result:!0};return K.reduce((G,z,re)=>G.then(Z=>{if(re>0&&!0===Z&&(ie.result=!1),!1===ie.result)return(0,v.DB)(!0);const w=H(z);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve(!1)).then(G=>(!0===G&&(ie.result=!1),ie.result))})},g.functions.filter=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie=[];return K.reduce((G,z,re)=>G.then(Z=>{re>0&&!0===Z&&ie.push(K[re-1]);const w=H(z);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve(!1)).then(G=>(!0===G&&K.length>0&&ie.push(K[K.length-1]),ie))})},g.functions.reduce=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,3);const H=S(M,T[1]),K=J(T[0]);let ie=null;if(T.length>2){const G=(0,b.C)(T[2],null);ie=K.reduce((z,re)=>z.then(Z=>{void 0!==Z&&Z!==b.v||(Z=null);const w=H(Z,re);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve(G))}else{if(0===K.length)return null;ie=K.reduce((G,z,re)=>{if(re<=1){const Z=H(G,z);return(0,v.y8)(Z)?Z:(0,v.DB)(Z)}return G.then(Z=>{void 0!==Z&&Z!==b.v||(Z=null);const w=H(Z,z);return(0,v.y8)(w)?w:(0,v.DB)(w)})})}return ie.then(G=>void 0!==G&&G!==b.v?G:null)})},g.functions.map=function(M,X){return g.standardFunctionAsync(M,X,function(B,C,T){(0,b.p)(T,2,2);const H=S(M,T[1]),K=J(T[0]),ie={result:[]};return K.reduce((G,z,re)=>G.then(Z=>{re>0&&ie.result.push(void 0!==Z&&Z!==b.v?Z:null);const w=H(z);return(0,v.y8)(w)?w:(0,v.DB)(w)}),Promise.resolve()).then(G=>(K.length>0&&ie.result.push(void 0!==G&&G!==b.v?G:null),ie.result))})})}})},75068:(Te,we,q)=>{q.r(we),q.d(we,{Dictionary:()=>b.Z,arcade:()=>Hr,arcadeFeature:()=>v.Z,convertFeatureLayerToFeatureSet:()=>ri,convertMapToFeatureSetCollection:()=>ii,convertServiceUrlToWorkspace:()=>ni,createExecContext:()=>Vr,createFeature:()=>Wr,createFunction:()=>Yr,createSyntaxTree:()=>yt,dependsOnView:()=>qr,enableFeatureSetOperations:()=>oi,enableGeometryOperations:()=>ai,evalSyntaxTree:()=>Jr,executeAsyncFunction:()=>$r,executeFunction:()=>Xr,extractFieldNames:()=>Qr,getViewInfo:()=>ti,hasGeometryFunctions:()=>fi,hasGeometryOperations:()=>mi,hasVariable:()=>ei,loadScriptDependencies:()=>si,updateExecContext:()=>Kr});var Y=q(37780),fe=q(22386),b=q(6729),v=q(42275),pe=q(5371),le=q(26685),g=q(47562),S=q(19927),J=q(67525),M=q(84228),X=q(24499),B=q(63461),C=q(53840),T=q(97536),H=q(31975),K=q(10699),ie=q(2004),G=q(21674),z=q(72854),re=q(49672),Z=q(37118),w=q(55214),ee=q(65234);function D(h,u,f){try{return f(h,null,u.arguments)}catch(d){throw d}}function V(h){return h instanceof Error?(0,K.d1)(h):(0,K.d1)(new Error(h))}function Q(h,u){try{switch(u.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function At(h,u){let f=null===u.init?null:Q(h,u.init);f===g.v&&(f=null);const d=u.id.name.toLowerCase();if(null!==h.localScope){if(void 0!==h.localScope[d])return"lscope['"+d+"']="+f+"; ";if(void 0!==h.localScope._SymbolsMap[d])return"lscope['"+h.localScope._SymbolsMap[d]+"']="+f+"; ";{const m=it(h);return h.localScope._SymbolsMap[d]=m,h.mangleMap[d]=m,"lscope['"+m+"']="+f+"; "}}if(void 0!==h.globalScope[d])return"gscope['"+d+"']="+f+"; ";if(void 0!==h.globalScope._SymbolsMap[d])return"gscope['"+h.globalScope._SymbolsMap[d]+"']="+f+"; ";{const m=it(h);return h.globalScope._SymbolsMap[d]=m,h.mangleMap[d]=m,"gscope['"+m+"']="+f+"; "}}(h,u);case"VariableDeclaration":return function lt(h,u){const f=[];for(let d=0;d<u.declarations.length;d++)f.push(Q(h,u.declarations[d]));return f.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(h,u);case"BlockStatement":return Ue(h,u);case"FunctionDeclaration":return function ut(h,u){const f=u.id.name.toLowerCase(),d={isAsync:h.isAsync,spatialReference:h.spatialReference,console:h.console,lrucache:h.lrucache,interceptor:h.interceptor,services:h.services,symbols:h.symbols,mangleMap:h.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:h.depthCounter+1,globalScope:h.globalScope};if(d.depthCounter>64)throw new Error("Exceeded maximum function depth");let m="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let O=0;O<u.params.length;O++){const ne=u.params[O].name.toLowerCase(),ae=it(h);d.localScope._SymbolsMap[ne]=ae,d.mangleMap[ne]=ae,m+="lscope['"+ae+"']=arguments["+O.toString()+"];\n"}if(!0===h.isAsync?(m+="return lang.__awaiter(this, void 0, void 0, function* () {\n",m+=Ue(d,u.body)+"\n return lastStatement; ",m+="});  }",m+=", runtimeCtx),"+u.params.length+")",m+="\n lastStatement = lc.voidOperation; \n"):(m+=Ue(d,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")",m+="\n lastStatement = lc.voidOperation; \n"),void 0!==h.globalScope[f])return"gscope['"+f+"']="+m;if(void 0!==h.globalScope._SymbolsMap[f])return"gscope['"+h.globalScope._SymbolsMap[f]+"']="+m;{const O=it(h);return h.globalScope._SymbolsMap[f]=O,h.mangleMap[f]=O,"gscope['"+O+"']="+m}}(h,u);case"ReturnStatement":return function ot(h,u){return null===u.argument?"return lc.voidOperation":"return "+Q(h,u.argument)}(h,u);case"IfStatement":return function ye(h,u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new Error((0,S.H5)(u.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const f=Q(h,u.test),d=ze(h);let m="var "+d+" = "+f+";\n if ("+d+" === true) {\n"+ue(h,u.consequent)+"\n }\n";return m+=null!==u.alternate?"else if ("+d+"===false)   { \n"+ue(h,u.alternate)+"}\n":"else if ("+d+"===false) { \n lastStatement = lc.voidOperation;\n }\n",m+="else { lang.error({type: '"+u.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n",m}(h,u);case"ExpressionStatement":return function $(h,u){return"AssignmentExpression"===u.expression.type?"lastStatement = lc.voidOperation; "+Q(h,u.expression)+"; \n ":"lastStatement = "+Q(h,u.expression)+"; "}(h,u);case"AssignmentExpression":return function L(h,u){const f=Q(h,u.right);let d=null,m="";if("MemberExpression"===u.left.type)return d=Q(h,u.left.object),m=!0===u.left.computed?Q(h,u.left.property):"'"+u.left.property.name+"'","lang.assignmember("+d+","+m+",'"+u.operator+"',"+f+")";if(d=u.left.name.toLowerCase(),null!==h.localScope){if(void 0!==h.localScope[d])return"lscope['"+d+"']=lang.assign("+f+",'"+u.operator+"', lscope['"+d+"'])";if(void 0!==h.localScope._SymbolsMap[d])return"lscope['"+h.localScope._SymbolsMap[d]+"']=lang.assign("+f+",'"+u.operator+"', lscope['"+h.localScope._SymbolsMap[d]+"'])"}if(void 0!==h.globalScope[d])return"gscope['"+d+"']=lang.assign("+f+",'"+u.operator+"', gscope['"+d+"'])";if(void 0!==h.globalScope._SymbolsMap[d])return"gscope['"+h.globalScope._SymbolsMap[d]+"']=lang.assign("+f+",'"+u.operator+"', gscope['"+h.globalScope._SymbolsMap[d]+"'])";throw new Error("Variable not recognised")}(h,u);case"UpdateExpression":return function E(h,u){let f=null,d="";if("MemberExpression"===u.argument.type)return f=Q(h,u.argument.object),d=!0===u.argument.computed?Q(h,u.argument.property):"'"+u.argument.property.name+"'","lang.memberupdate("+f+","+d+",'"+u.operator+"',"+u.prefix+")";if(f=u.argument.name.toLowerCase(),null!==h.localScope){if(void 0!==h.localScope[f])return"lang.update(lscope, '"+f+"','"+u.operator+"',"+u.prefix+")";if(void 0!==h.localScope._SymbolsMap[f])return"lang.update(lscope, '"+h.localScope._SymbolsMap[f]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==h.globalScope[f])return"lang.update(gscope, '"+f+"','"+u.operator+"',"+u.prefix+")";if(void 0!==h.globalScope._SymbolsMap[f])return"lang.update(gscope, '"+h.globalScope._SymbolsMap[f]+"','"+u.operator+"',"+u.prefix+")";throw new Error("Variable not recognised")}(h,u);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function Re(h,u){try{const f=[];let d=0;for(const m of u.quasis)f.push(m.value?JSON.stringify(m.value.cooked):JSON.stringify("")),!1===m.tail&&(f.push(u.expressions[d]?"lang.castString(lang.aCheck("+Q(h,u.expressions[d])+", 'TemplateLiteral'))":""),d++);return"(["+f.join(",")+"]).join('')"}catch(f){throw f}}(h,u);case"TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case"ForStatement":return function _(h,u){let f="lastStatement = lc.voidOperation; \n";null!==u.init&&(f+=Q(h,u.init)+"; ");const d=ze(h),m=ze(h);return f+="var "+d+" = true; ",f+="\n do { ",null!==u.update&&(f+=" if ("+d+"===false) {\n "+Q(h,u.update)+"  \n}\n "+d+"=false; \n"),null!==u.test&&(f+="var "+m+" = "+Q(h,u.test)+"; ",f+="if ("+m+"===false) { break; } else if ("+m+"!==true) { lang.error({type: '"+u.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n"),f+=Q(h,u.body),null!==u.update&&(f+="\n "+Q(h,u.update)),f+="\n"+d+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",f}(h,u);case"ForInStatement":return function p(h,u){const f=ze(h),d=ze(h),m=ze(h);let O="var "+f+" = "+Q(h,u.right)+";\n";"VariableDeclaration"===u.left.type&&(O+=Q(h,u.left));let ne="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:u.left.name;ne=ne.toLowerCase();let ae="";return null!==h.localScope&&(void 0!==h.localScope[ne]?ae="lscope['"+ne+"']":void 0!==h.localScope._SymbolsMap[ne]&&(ae="lscope['"+h.localScope._SymbolsMap[ne]+"']")),""===ae&&(void 0!==h.globalScope[ne]?ae="gscope['"+ne+"']":void 0!==h.globalScope._SymbolsMap[ne]&&(ae="gscope['"+h.globalScope._SymbolsMap[ne]+"']")),O+="if ("+f+"===null) {  lastStatement = lc.voidOperation; }\n ",O+="else if (lc.isArray("+f+") || lc.isString("+f+")) {",O+="var "+d+"="+f+".length; \n",O+="for(var "+m+"=0; "+m+"<"+d+"; "+m+"++) {\n",O+=ae+"="+m+";\n",O+=Q(h,u.body),O+="\n}\n",O+=" lastStatement = lc.voidOperation; \n",O+=" \n}\n",O+="else if (lc.isImmutableArray("+f+")) {",O+="var "+d+"="+f+".length(); \n",O+="for(var "+m+"=0; "+m+"<"+d+"; "+m+"++) {\n",O+=ae+"="+m+";\n",O+=Q(h,u.body),O+="\n}\n",O+=" lastStatement = lc.voidOperation; \n",O+=" \n}\n",O+="else if (( "+f+" instanceof lang.Dictionary) || ( "+f+" instanceof lang.Feature)) {",O+="var "+d+"="+f+".keys(); \n",O+="for(var "+m+"=0; "+m+"<"+d+".length; "+m+"++) {\n",O+=ae+"="+d+"["+m+"];\n",O+=Q(h,u.body),O+="\n}\n",O+=" lastStatement = lc.voidOperation; \n",O+=" \n}\n",h.isAsync&&(O+="else if (lc.isFeatureSet("+f+")) {",O+="var "+d+"="+f+".iterator(runtimeCtx.abortSignal); \n",O+="for(var "+m+"=lang. graphicToFeature( yield "+d+".next(),"+f+"); "+m+"!=null; "+m+"=lang. graphicToFeature( yield "+d+".next(),"+f+")) {\n",O+=ae+"="+m+";\n",O+=Q(h,u.body),O+="\n}\n",O+=" lastStatement = lc.voidOperation; \n",O+=" \n}\n"),O+="else { lastStatement = lc.voidOperation; } \n",O}(h,u);case"Identifier":return function It(h,u){try{const f=u.name.toLowerCase();if(null!==h.localScope){if(void 0!==h.localScope[f])return"lscope['"+f+"']";if(void 0!==h.localScope._SymbolsMap[f])return"lscope['"+h.localScope._SymbolsMap[f]+"']"}if(void 0!==h.globalScope[f])return"gscope['"+f+"']";if(void 0!==h.globalScope._SymbolsMap[f])return"gscope['"+h.globalScope._SymbolsMap[f]+"']";throw new Error((0,S.H5)(u,"RUNTIME","VARIABLENOTFOUND"))}catch(f){throw f}}(h,u);case"MemberExpression":return function Nt(h,u){try{let f;return f=!0===u.computed?Q(h,u.property):"'"+u.property.name+"'","lang.member("+Q(h,u.object)+","+f+")"}catch(f){throw f}}(h,u);case"Literal":return null==u.value?"null":JSON.stringify(u.value);case"ThisExpression":case"ConditionalExpression":case"Array":throw new Error((0,S.H5)(u,"RUNTIME","NOTSUPPORTED"));case"CallExpression":return function vt(h,u){try{if("Identifier"!==u.callee.type)throw new Error((0,S.H5)(u,"RUNTIME","ONLYNODESSUPPORTED"));const f=u.callee.name.toLowerCase();let d="";if(null!==h.localScope&&(void 0!==h.localScope[f]?d="lscope['"+f+"']":void 0!==h.localScope._SymbolsMap[f]&&(d="lscope['"+h.localScope._SymbolsMap[f]+"']")),""===d&&(void 0!==h.globalScope[f]?d="gscope['"+f+"']":void 0!==h.globalScope._SymbolsMap[f]&&(d="gscope['"+h.globalScope._SymbolsMap[f]+"']")),""!==d){let m="[";for(let O=0;O<u.arguments.length;O++)O>0&&(m+=", "),m+=Q(h,u.arguments[O]);return m+="]",h.isAsync?"(yield lang.callfunc("+d+","+m+",runtimeCtx) )":"lang.callfunc("+d+","+m+",runtimeCtx)"}throw new Error((0,S.H5)(u,"RUNTIME","NOTFOUND"))}catch(f){throw f}}(h,u);case"UnaryExpression":return function Be(h,u){try{return"lang.unary("+Q(h,u.argument)+",'"+u.operator+"')"}catch(f){throw f}}(h,u);case"BinaryExpression":return function $e(h,u){try{return"lang.binary("+Q(h,u.left)+","+Q(h,u.right)+",'"+u.operator+"')"}catch(f){throw f}}(h,u);case"LogicalExpression":return function ct(h,u){try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new Error((0,S.H5)(u.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new Error((0,S.H5)(u.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("&&"===u.operator||"||"===u.operator)return"(lang.logicalCheck("+Q(h,u.left)+") "+u.operator+" lang.logicalCheck("+Q(h,u.right)+"))";throw new Error((0,S.H5)(u,"RUNTIME","ONLYORORAND"))}catch(f){throw f}}(h,u);case"ArrayExpression":return function xt(h,u){try{const f=[];for(let d=0;d<u.elements.length;d++)f.push("Literal"===u.elements[d].type?Q(h,u.elements[d]):"lang.aCheck("+Q(h,u.elements[d])+",'ArrayExpression')");return"["+f.join(",")+"]"}catch(f){throw f}}(h,u);case"ObjectExpression":return function he(h,u){let f="lang.dictionary([";for(let d=0;d<u.properties.length;d++){const m=u.properties[d];d>0&&(f+=","),f+="lang.strCheck("+("Identifier"===m.key.type?"'"+m.key.name+"'":Q(h,m.key))+",'ObjectExpression'),lang.aCheck("+Q(h,m.value)+", 'ObjectExpression')"}return f+="])",f}(h,u);case"Property":return function Ae(h,u){throw new Error("Should not get here")}();default:throw new Error((0,S.H5)(u,"RUNTIME","UNREOGNISED"))}}catch(f){throw f}}function ue(h,u){return"BlockStatement"===u.type?Q(h,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?Q(h,u)+"; ":"UpdateExpression"===u.type?"lastStatement = "+Q(h,u)+"; ":"ExpressionStatement"===u.type?Q(h,u):"ObjectExpression"===u.type?"lastStatement = "+Q(h,u)+"; ":Q(h,u)+"; "}function Ue(h,u){let f="";for(let d=0;d<u.body.length;d++)f+="ReturnStatement"===u.body[d].type||"BreakStatement"===u.body[d].type||"ContinueStatement"===u.body[d].type?Q(h,u.body[d])+"; \n":"UpdateExpression"===u.body[d].type||"ObjectExpression"===u.body[d].type?"lastStatement = "+Q(h,u.body[d])+"; \n":Q(h,u.body[d])+" \n";return f}let Le=0;const Ie={};function ht(h){return null===h?"":(0,g.a)(h)||(0,g.b)(h)?"Array":(0,g.o)(h)?"Date":(0,g.f)(h)?"String":(0,g.i)(h)?"Boolean":(0,g.j)(h)?"Number":h instanceof fe.Z?"Attachment":h instanceof Y.Z?"Portal":h instanceof b.Z?"Dictionary":(0,g.k)(h)?"Feature":h instanceof re.Z?"Point":h instanceof Z.Z?"Polygon":h instanceof w.Z?"Polyline":h instanceof z.Z?"Multipoint":h instanceof ie.Z?"Extent":(0,g.c)(h)?"Function":(0,g.q)(h)?"FeatureSet":(0,g.r)(h)?"FeatureSetCollection":h===g.v?"":"number"==typeof h&&isNaN(h)?"Number":"Unrecognised Type"}function Ve(h,u,f,d){try{if((0,g.e)(u[f],d))return u[f+1];{const O=u.length-f;return 1===O?u[f]:2===O?null:3===O?u[f+2]:Ve(h,u,f+2,d)}}catch(m){throw m}}function nt(h,u,f,d){try{if(!0===d)return u[f+1];if(u.length-f==3)return u[f+2];{const m=u[f+2];if(!1===(0,g.i)(m))throw new Error("WHEN needs boolean test conditions");return nt(h,u,f+2,m)}}catch(m){throw m}}function We(h,u){const f=h.length,d=Math.floor(f/2);return 0===f?[]:1===f?[h[0]]:function Tt(h,u,f){const d=[];for(;h.length>0||u.length>0;)if(h.length>0&&u.length>0){let m=f(h[0],u[0]);isNaN(m)&&(m=0),m<=0?(d.push(h[0]),h=h.slice(1)):(d.push(u[0]),u=u.slice(1))}else h.length>0?(d.push(h[0]),h=h.slice(1)):u.length>0&&(d.push(u[0]),u=u.slice(1));return d}(We(h.slice(0,d),u),We(h.slice(d,f),u),u)}function ft(h,u){try{const f=h.length,d=Math.floor(f/2);if(0===f)return(0,K.DB)([]);if(1===f)return(0,K.DB)([h[0]]);const m=[ft(h.slice(0,d),u),ft(h.slice(d,f),u)];return(0,K.$6)(m).then(O=>rt(O[0],O[1],u,[]))}catch(f){return(0,K.d1)(f)}}function rt(h,u,f,d){return(0,K.Ue)((m,O)=>{const ne=d;h.length>0||u.length>0?h.length>0&&u.length>0?f(h[0],u[0]).then(ae=>{try{isNaN(ae)&&(ae=1),ae<=0?(ne.push(h[0]),h=h.slice(1)):(ne.push(u[0]),u=u.slice(1)),rt(h,u,f,d).then(De=>{m(De)},O)}catch(De){O(De)}},O):h.length>0?(ne.push(h[0]),rt(h=h.slice(1),u,f,d).then(ae=>{m(ae)},O)):u.length>0&&(ne.push(u[0]),u=u.slice(1),rt(h,u,f,d).then(ae=>{m(ae)},O)):m(d)})}function it(h){return h.symbols.symbolCounter++,"_T"+h.symbols.symbolCounter.toString()}function ze(h){return h.symbols.symbolCounter++,"_Tvar"+h.symbols.symbolCounter.toString()}(0,M.r)(Ie,D),(0,H.r)(Ie,D),(0,C.r)(Ie,D),(0,X.r)(Ie,D),(0,T.r)(Ie,D),Ie.typeof=function(h,u){return D(h,u,function(f,d,m){(0,g.p)(m,1,1);const O=ht(m[0]);if("Unrecognised Type"===O)throw new Error("Unrecognised Type");return O})},Ie.iif=function(h,u){try{return D(h,u,function(f,d,m){if((0,g.p)(m,3,3),!1===(0,g.i)(m[0]))throw new Error("IF Function must have a boolean test condition");return m[0]?m[1]:m[2]})}catch(f){throw f}},Ie.decode=function(h,u){try{return D(h,u,function(f,d,m){if(m.length<2)throw new Error("Missing Parameters");if(2===m.length)return m[1];if((m.length-1)%2==0)throw new Error("Must have a default value result.");return Ve(h,m,1,m[0])})}catch(f){throw f}},Ie.when=function(h,u){try{return D(h,u,function(f,d,m){if(m.length<3)throw new Error("Missing Parameters");if(m.length%2==0)throw new Error("Must have a default value result.");const O=m[0];if(!1===(0,g.i)(O))throw new Error("WHEN needs boolean test conditions");return nt(h,m,0,O)})}catch(f){throw f}},Ie.top=function(h,u){return D(h,u,function(f,d,m){if((0,g.p)(m,2,2),(0,g.a)(m[0]))return(0,g.t)(m[1])>=m[0].length?m[0].slice(0):m[0].slice(0,(0,g.t)(m[1]));if((0,g.b)(m[0]))return(0,g.t)(m[1])>=m[0].length()?m[0].slice(0):m[0].slice(0,(0,g.t)(m[1]));throw new Error("Top cannot accept this parameter type")})},Ie.first=function(h,u){return D(h,u,function(f,d,m){return(0,g.p)(m,1,1),(0,g.a)(m[0])?0===m[0].length?null:m[0][0]:(0,g.b)(m[0])?0===m[0].length()?null:m[0].get(0):null})},Ie.sort=function(h,u){return D(h,u,function(f,d,m){(0,g.p)(m,1,2);let O=m[0];if((0,g.b)(O)&&(O=O.toArray()),!1===(0,g.a)(O))throw new Error("Illegal Argument");if(m.length>1){if(!1===(0,g.c)(m[1]))throw new Error("Illegal Argument");let ne=O;const ae=function(De,ge){return Ct.callfunc(m[1],[De,ge],f)};return h.isAsync?ft(ne,ae):(ne=We(ne,function(De,ge){return ae(De,ge)}),ne)}{let ne=O;if(0===ne.length)return[];const ae={};for(let Ee=0;Ee<ne.length;Ee++){const xe=ht(ne[Ee]);""!==xe&&(ae[xe]=!0)}if(!0===ae.Array||!0===ae.Dictionary||!0===ae.Feature||!0===ae.Point||!0===ae.Polygon||!0===ae.Polyline||!0===ae.Multipoint||!0===ae.Extent||!0===ae.Function)return ne.slice(0);let De=0,ge="";for(const Ee in ae)De++,ge=Ee;return ne=De>1||"String"===ge?We(ne,function(Ee,xe){if(null==Ee||Ee===g.v)return null==xe||xe===g.v?0:1;if(null==xe||xe===g.v)return-1;const He=(0,g.d)(Ee),Ye=(0,g.d)(xe);return He<Ye?-1:He===Ye?0:1}):"Number"===ge?We(ne,function(Ee,xe){return Ee-xe}):"Boolean"===ge?We(ne,function(Ee,xe){return Ee===xe?0:xe?-1:1}):"Date"===ge?We(ne,function(Ee,xe){return xe-Ee}):ne.slice(0),ne}})};const Qe={};for(const h in Ie)Qe[h]=new g.N(Ie[h]);(0,B.registerFunctions)(Ie,D);for(const h in Ie)Ie[h]=new g.N(Ie[h]);const dt=function(){};dt.prototype=Ie;const mt=function(){};function Je(h,u,f){const d={};h||(h={}),f||(f={}),d._SymbolsMap={},d.textformatting=1,d.infinity=1,d.pi=1;for(const m in u)d[m]=1;for(const m in f)d[m]=1;for(const m in h)d[m]=1;return d}function Ge(h,u){const f={mode:u,compiled:!0,functions:{},signatures:[],failDefferred:V,standardFunction:D,standardFunctionAsync:D,evaluateIdentifier:_t};for(let d=0;d<h.length;d++)h[d].registerFunctions(f);if("sync"===u){for(const d in f.functions)Ie[d]=new g.N(f.functions[d]),dt.prototype[d]=Ie[d];for(let d=0;d<f.signatures.length;d++)(0,S.gW)(f.signatures[d],"sync")}else{for(const d in f.functions)Qe[d]=new g.N(f.functions[d]),mt.prototype[d]=Qe[d];for(let d=0;d<f.signatures.length;d++)(0,S.gW)(f.signatures[d],"async")}}function _t(h,u){const f=u.name;if("_SymbolsMap"===f)throw"Illegal";if(h.localStack.length>0){if("_t"!==f.substr(0,2).toLowerCase()&&void 0!==h.localStack[h.localStack.length-1][f])return h.localStack[h.localStack.length-1][f];const m=h.mangleMap[f];if(void 0!==m&&void 0!==h.localStack[h.localStack.length-1][m])return h.localStack[h.localStack.length-1][m]}if("_t"!==f.substr(0,2).toLowerCase()&&void 0!==h.globalScope[f]||1===h.globalScope._SymbolsMap[f])return h.globalScope[f];const d=h.mangleMap[f];return void 0!==d?h.globalScope[d]:void 0}mt.prototype=Qe,Ge([J.A],"sync"),Ge([J.A],"async");let Dt=0;const Ct={error(h,u,f){throw new Error((0,S.H5)(h,u,f))},__awaiter:(h,u,f,d)=>(0,K.Ue)((m,O)=>{function ne(ge){try{De(d.next(ge))}catch(Ee){O(Ee)}}function ae(ge){try{De(d.throw(ge))}catch(Ee){O(Ee)}}function De(ge){ge.done?m(ge.value):ge.value&&ge.value.then?ge.value.then(ne,ae):(Dt++,Dt%100==0?setTimeout(()=>{Dt=0,ne(ge.value)},0):ne(ge.value))}De((d=d.apply(h,u||[])).next())}),functionDepthchecker:(h,u)=>function(){if(u.depthCounter++,u.localStack.push([]),u.depthCounter>64)throw new Error("Exceeded maximum function depth");const f=h.apply(this,arguments);return(0,K.y8)(f)?f.then(d=>(u.depthCounter--,u.localStack.length=u.localStack.length-1,d)):(u.depthCounter--,u.localStack.length=u.localStack.length-1,f)},castString:h=>(0,g.d)(h),aCheck(h,u){if((0,g.c)(h))throw new Error((0,S.H5)({type:u},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return h===g.v?null:h},Dictionary:b.Z,Feature:v.Z,dictionary(h){const u={};for(let d=0;d<h.length;d+=2){if((0,g.c)(h[d+1]))throw new Error("Illegal Argument");if(!1===(0,g.f)(h[d]))throw new Error("Illegal Argument");u[h[d].toString()]=h[d+1]===g.v?null:h[d+1]}const f=new b.Z(u);return f.immutable=!1,f},strCheck(h){if(!1===(0,g.f)(h))throw new Error("Illegal Argument");return h},unary(h,u){if((0,g.i)(h)){if("!"===u)return!h;if("-"===u)return-1*(0,g.t)(h);if("+"===u)return 1*(0,g.t)(h);if("~"===u)return~(0,g.t)(h);throw new Error((0,S.H5)({type:"UnaryExpression",operator:u,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===u)return-1*(0,g.t)(h);if("+"===u)return 1*(0,g.t)(h);if("~"===u)return~(0,g.t)(h);throw new Error((0,S.H5)({type:"UnaryExpression",operator:u,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))},logicalCheck(h){if(!1===(0,g.i)(h))throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return h},logical(h,u,f){if((0,g.i)(h)&&(0,g.i)(u))switch(f){case"||":return h||u;case"&&":return h&&u;default:throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))}throw new Error((0,S.H5)({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))},binary(h,u,f){switch(f){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,g.h)((0,g.t)(h),(0,g.t)(u),f);case"==":case"=":return(0,g.e)(h,u);case"!=":return!(0,g.e)(h,u);case"<":case">":case"<=":case">=":return(0,g.g)(h,u,f);case"+":return(0,g.f)(h)||(0,g.f)(u)?(0,g.d)(h)+(0,g.d)(u):(0,g.t)(h)+(0,g.t)(u);case"-":return(0,g.t)(h)-(0,g.t)(u);case"*":return(0,g.t)(h)*(0,g.t)(u);case"/":return(0,g.t)(h)/(0,g.t)(u);case"%":return(0,g.t)(h)%(0,g.t)(u);default:throw new Error((0,S.H5)({type:"BinaryExpression",operator:f,left:h,right:u},"RUNTIME","OPERATORNOTRECOGNISED"))}},assign(h,u,f){switch(u){case"=":return h===g.v?null:h;case"/=":return(0,g.t)(f)/(0,g.t)(h);case"*=":return(0,g.t)(f)*(0,g.t)(h);case"-=":return(0,g.t)(f)-(0,g.t)(h);case"+=":return(0,g.f)(f)||(0,g.f)(h)?(0,g.d)(f)+(0,g.d)(h):(0,g.t)(f)+(0,g.t)(h);case"%=":return(0,g.t)(f)%(0,g.t)(h);default:throw new Error((0,S.H5)({type:"AssignmentExpression",operator:u,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"))}},update(h,u,f,d){const m=(0,g.t)(h[u]);return h[u]="++"===f?m+1:m-1,!1===d?m:"++"===f?m+1:m-1},graphicToFeature:(h,u)=>null===h?null:v.Z.createFromGraphicLikeObject(h.geometry,h.attributes,u),memberupdate(h,u,f,d){let m;if((0,g.a)(h)){if(!(0,g.j)(u))throw new Error("Invalid Parameter");if(u<0&&(u=h.length+u),u<0||u>=h.length)throw new Error("Assignment outside of array bounds");m=(0,g.t)(h[u]),h[u]="++"===f?m+1:m-1}else if(h instanceof b.Z){if(!1===(0,g.f)(u))throw new Error("Dictionary accessor must be a string");if(!0!==h.hasField(u))throw new Error("Invalid Parameter");m=(0,g.t)(h.field(u)),h.setField(u,"++"===f?m+1:m-1)}else{if(!(0,g.k)(h))throw(0,g.b)(h)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.f)(u))throw new Error("Feature accessor must be a string");if(!0!==h.hasField(u))throw new Error("Invalid Parameter");m=(0,g.t)(h.field(u)),h.setField(u,"++"===f?m+1:m-1)}return!1===d?m:"++"===f?m+1:m-1},assignmember(h,u,f,d){if((0,g.a)(h)){if(!(0,g.j)(u))throw new Error("Invalid Parameter");if(u<0&&(u=h.length+u),u<0||u>h.length)throw new Error("Assignment outside of array bounds");if(u===h.length){if("="!==f)throw new Error("Invalid Parameter");h[u]=this.assign(d,f,h[u])}else h[u]=this.assign(d,f,h[u])}else if(h instanceof b.Z){if(!1===(0,g.f)(u))throw new Error("Dictionary accessor must be a string");if(!0===h.hasField(u))h.setField(u,this.assign(d,f,h.field(u)));else{if("="!==f)throw new Error("Invalid Parameter");h.setField(u,this.assign(d,f,null))}}else{if(!(0,g.k)(h))throw(0,g.b)(h)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.f)(u))throw new Error("Feature accessor must be a string");if(!0===h.hasField(u))h.setField(u,this.assign(d,f,h.field(u)));else{if("="!==f)throw new Error("Invalid Parameter");h.setField(u,this.assign(d,f,null))}}},member(h,u){if(null===h)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(h instanceof b.Z||(0,g.k)(h)){if((0,g.f)(u))return h.field(u);throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(h instanceof G.Z){if((0,g.f)(u))return function Me(h,u,f){let d;switch(u=u.toLowerCase()){case"hasz":{const m=h.hasZ;return void 0!==m&&m}case"hasm":{const m=h.hasM;return void 0!==m&&m}case"spatialreference":{let m=h.spatialReference._arcadeCacheId;if(void 0===m){let ne=!0;Object.freeze&&Object.isFrozen(h.spatialReference)&&(ne=!1),ne&&(Le++,h.spatialReference._arcadeCacheId=Le,m=Le)}const O=new b.Z({wkt:h.spatialReference.wkt,wkid:h.spatialReference.wkid});return void 0!==m&&(O._arcadeCacheId="SPREF"+m.toString()),O}}switch(h.type){case"extent":switch(u){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const m=h[u];return void 0!==m?m:null}case"type":return"Extent"}break;case"polygon":switch(u){case"rings":return d=h.cache._arcadeCacheId,void 0===d&&(Le++,d=Le,h.cache._arcadeCacheId=d),new pe.Z(h.rings,h.spatialReference,!0===h.hasZ,!0===h.hasM,d);case"type":return"Polygon"}break;case"point":switch(u){case"x":case"y":case"z":case"m":return void 0!==h[u]?h[u]:null;case"type":return"Point"}break;case"polyline":switch(u){case"paths":return d=h.cache._arcadeCacheId,void 0===d&&(Le++,d=Le,h.cache._arcadeCacheId=d),new pe.Z(h.paths,h.spatialReference,!0===h.hasZ,!0===h.hasM,d);case"type":return"Polyline"}break;case"multipoint":switch(u){case"points":return d=h.cache._arcadeCacheId,void 0===d&&(Le++,d=Le,h.cache._arcadeCacheId=d),new le.Z(h.points,h.spatialReference,!0===h.hasZ,!0===h.hasM,d,1);case"type":return"Multipoint"}}throw new Error((0,S.H5)(f,"RUNTIME","PROPERTYNOTFOUND"))}(h,u,"MemberExpression");throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,g.a)(h)){if((0,g.j)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=h.length+u),u>=h.length||u<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return h[u]}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,g.f)(h)){if((0,g.j)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=h.length+u),u>=h.length||u<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return h[u]}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if((0,g.b)(h)){if((0,g.j)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=h.length()+u),u>=h.length()||u<0)throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return h.get(u)}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}throw new Error((0,S.H5)({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))},callfunc(h,u,f){return h instanceof g.N?h.fn(f,{arguments:u,preparsed:!0}):h instanceof g.S?h.fn.apply(this,u):h.apply(this,u)}};function gt(h){console.log(h)}function ke(h,u=null,f=!1){null===u&&(u={vars:{},customfunctions:{}});const d={isAsync:f,globalScope:Je(u.vars,f?Qe:Ie,u.customfunctions),localScope:null,mangleMap:{},console:gt,lrucache:u.lrucache,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let m=Q(d,h.body[0].body);""===m&&(m="lc.voidOperation; ");let O="";O=f?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+m+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+m+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const ne={lc:g.l,lang:Ct,mangles:d.mangleMap,postProcess(ae){if(ae instanceof g.R&&(ae=ae.value),ae instanceof g.I&&(ae=ae.value),ae===g.v&&(ae=null),ae===g.m)throw new Error("Cannot return BREAK");if(ae===g.n)throw new Error("Cannot return CONTINUE");if((0,g.c)(ae))throw new Error("Cannot return FUNCTION");return ae},prepare(ae,De){let ge=ae.spatialReference;null==ge&&(ge=new ee.Z({wkid:102100}));const Ee=function Xe(h,u,f){const d=f?new mt:new dt;h||(h={}),u||(u={});const m=new b.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});m.immutable=!1,d._SymbolsMap={textformatting:1,infinity:1,pi:1},d.textformatting=m,d.infinity=Number.POSITIVE_INFINITY,d.pi=Math.PI;for(const O in u)d[O]=u[O],d._SymbolsMap[O]=1;for(const O in h)d._SymbolsMap[O]=1,d[O]=h[O]&&"esri.Graphic"===h[O].declaredClass?v.Z.createFromGraphic(h[O]):h[O];return d}(ae.vars,ae.customfunctions,De);return{localStack:[],isAsync:De,mangleMap:this.mangles,spatialReference:ge,globalScope:Ee,abortSignal:null==ae.abortSignal?{aborted:!1}:ae.abortSignal,localScope:null,services:ae.services,console:ae.console?ae.console:gt,lrucache:ae.lrucache,interceptor:ae.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return new Function("context","spatialReference",O).bind(ne)}var N=q(7652);function R(h,u,f){try{return!0===u.preparsed?f(h,null,u.arguments):f(h,u,function y(h,u){const f=[];for(let d=0;d<u.arguments.length;d++)f.push(I(h,u.arguments[d]));return f}(h,u))}catch(d){throw d}}function I(h,u){try{switch(u.type){case"EmptyStatement":return g.v;case"VariableDeclarator":return function Hn(h,u){let f=null===u.init?null:I(h,u.init);if(f===g.v&&(f=null),"Identifier"!==u.id.type)throw new Error("Can only assign a regular variable");const d=u.id.name.toLowerCase();return null!==h.localScope?h.localScope[d]={value:f,valueset:!0,node:u.init}:h.globalScope[d]={value:f,valueset:!0,node:u.init},g.v}(h,u);case"VariableDeclaration":return function Lt(h,u){for(let f=0;f<u.declarations.length;f++)I(h,u.declarations[f]);return g.v}(h,u);case"BlockStatement":return function kt(h,u){let f=g.v;for(let d=0;d<u.body.length;d++)if(f=I(h,u.body[d]),f instanceof g.R||f===g.m||f===g.n)return f;return f}(h,u);case"FunctionDeclaration":return function Ut(h,u){const f=u.id.name.toLowerCase();return h.globalScope[f]={valueset:!0,node:null,value:new N.Z(u,h)},g.v}(h,u);case"ReturnStatement":return function et(h,u){if(null===u.argument)return new g.R(g.v);const f=I(h,u.argument);return new g.R(f)}(h,u);case"IfStatement":return function Pe(h,u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new Error((0,S.H5)(u.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const f=I(h,u.test);if(!0===f)return I(h,u.consequent);if(!1===f)return null!==u.alternate?I(h,u.alternate):g.v;throw new Error((0,S.H5)(u,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}(h,u);case"ExpressionStatement":return function qe(h,u){if("AssignmentExpression"===u.expression.type||"UpdateExpression"===u.expression.type)return I(h,u.expression);if("CallExpression"===u.expression.type){const f=I(h,u.expression);return f===g.v?g.v:new g.I(f)}{const f=I(h,u.expression);return f===g.v?g.v:new g.I(f)}}(h,u);case"AssignmentExpression":return function Oe(h,u){const f=I(h,u.right);let d=null,m="";if("MemberExpression"===u.left.type){if(d=I(h,u.left.object),!0===u.left.computed?m=I(h,u.left.property):"Identifier"===u.left.property.type&&(m=u.left.property.name),(0,g.a)(d)){if(!(0,g.j)(m))throw new Error("Invalid Parameter");if(m<0&&(m=d.length+m),m<0||m>d.length)throw new Error("Assignment outside of array bounds");if(m===d.length){if("="!==u.operator)throw new Error("Invalid Parameter");d[m]=ve(f,u.operator,d[m],u)}else d[m]=ve(f,u.operator,d[m],u)}else if(d instanceof b.Z){if(!1===(0,g.f)(m))throw new Error("Dictionary accessor must be a string");if(!0===d.hasField(m))d.setField(m,ve(f,u.operator,d.field(m),u));else{if("="!==u.operator)throw new Error("Invalid Parameter");d.setField(m,ve(f,u.operator,null,u))}}else{if(!(0,g.k)(d))throw(0,g.b)(d)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.f)(m))throw new Error("Feature accessor must be a string");if(!0===d.hasField(m))d.setField(m,ve(f,u.operator,d.field(m),u));else{if("="!==u.operator)throw new Error("Invalid Parameter");d.setField(m,ve(f,u.operator,null,u))}}return g.v}if(d=u.left.name.toLowerCase(),null!==h.localScope&&void 0!==h.localScope[d])return h.localScope[d]={value:ve(f,u.operator,h.localScope[d].value,u),valueset:!0,node:u.right},g.v;if(void 0!==h.globalScope[d])return h.globalScope[d]={value:ve(f,u.operator,h.globalScope[d].value,u),valueset:!0,node:u.right},g.v;throw new Error("Variable not recognised")}(h,u);case"UpdateExpression":return function Ce(h,u){let f,d=null,m="";if("MemberExpression"===u.argument.type){if(d=I(h,u.argument.object),!0===u.argument.computed?m=I(h,u.argument.property):"Identifier"===u.argument.property.type&&(m=u.argument.property.name),(0,g.a)(d)){if(!(0,g.j)(m))throw new Error("Invalid Parameter");if(m<0&&(m=d.length+m),m<0||m>=d.length)throw new Error("Assignment outside of array bounds");f=(0,g.t)(d[m]),d[m]="++"===u.operator?f+1:f-1}else if(d instanceof b.Z){if(!1===(0,g.f)(m))throw new Error("Dictionary accessor must be a string");if(!0!==d.hasField(m))throw new Error("Invalid Parameter");f=(0,g.t)(d.field(m)),d.setField(m,"++"===u.operator?f+1:f-1)}else{if(!(0,g.k)(d))throw(0,g.b)(d)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,g.f)(m))throw new Error("Feature accessor must be a string");if(!0!==d.hasField(m))throw new Error("Invalid Parameter");f=(0,g.t)(d.field(m)),d.setField(m,"++"===u.operator?f+1:f-1)}return!1===u.prefix?f:"++"===u.operator?f+1:f-1}if(d="Identifier"===u.argument.type?u.argument.name.toLowerCase():"",!d)throw new Error("Invalid identifier");if(null!==h.localScope&&void 0!==h.localScope[d])return f=(0,g.t)(h.localScope[d].value),h.localScope[d]={value:"++"===u.operator?f+1:f-1,valueset:!0,node:u},!1===u.prefix?f:"++"===u.operator?f+1:f-1;if(void 0!==h.globalScope[d])return f=(0,g.t)(h.globalScope[d].value),h.globalScope[d]={value:"++"===u.operator?f+1:f-1,valueset:!0,node:u},!1===u.prefix?f:"++"===u.operator?f+1:f-1;throw new Error("Variable not recognised")}(h,u);case"BreakStatement":return g.m;case"ContinueStatement":return g.n;case"TemplateElement":return function Wn(h,u){return u.value?u.value.cooked:""}(0,u);case"TemplateLiteral":return function Kn(h,u){let f="",d=0;for(const m of u.quasis)f+=m.value?m.value.cooked:"",!1===m.tail&&(f+=u.expressions[d]?(0,g.d)(I(h,u.expressions[d])):"",d++);return f}(h,u);case"ForStatement":return function se(h,u){null!==u.init&&I(h,u.init);const f={testResult:!0,lastAction:g.v};do{de(h,u,f)}while(!0===f.testResult);return f.lastAction instanceof g.R?f.lastAction:g.v}(h,u);case"ForInStatement":return function W(h,u){const f=I(h,u.right);"VariableDeclaration"===u.left.type&&I(h,u.left);let d=null,m="";if("VariableDeclaration"===u.left.type){const O=u.left.declarations[0].id;"Identifier"===O.type&&(m=O.name)}else"Identifier"===u.left.type&&(m=u.left.name);if(!m)throw new Error((0,S.H5)(u,"RUNTIME","INVALIDVARIABLE"));if(m=m.toLowerCase(),null!==h.localScope&&void 0!==h.localScope[m]&&(d=h.localScope[m]),null===d&&void 0!==h.globalScope[m]&&(d=h.globalScope[m]),null===d)throw new Error((0,S.H5)(u,"RUNTIME","VARIABLENOTDECLARED"));if((0,g.a)(f)||(0,g.f)(f)){const O=f.length;for(let ne=0;ne<O;ne++){d.value=ne;const ae=I(h,u.body);if(ae===g.m)break;if(ae instanceof g.R)return ae}return g.v}if((0,g.b)(f)){for(let O=0;O<f.length();O++){d.value=O;const ne=I(h,u.body);if(ne===g.m)break;if(ne instanceof g.R)return ne}return g.v}if(!(f instanceof b.Z||(0,g.k)(f)))return g.v;{const O=f.keys();for(let ne=0;ne<O.length;ne++){d.value=O[ne];const ae=I(h,u.body);if(ae===g.m)break;if(ae instanceof g.R)return ae}}}(h,u);case"Identifier":return nn(h,u);case"MemberExpression":return function zn(h,u){try{const f=I(h,u.object);if(null===f)throw new Error((0,S.H5)(u,"RUNTIME","NOTFOUND"));if(!1===u.computed){if("Identifier"===u.property.type){if(f instanceof b.Z||(0,g.k)(f))return f.field(u.property.name);if(f instanceof G.Z)return tn(f,u.property.name,u)}throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}{let d=I(h,u.property);if(f instanceof b.Z||(0,g.k)(f)){if((0,g.f)(d))return f.field(d);throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}if(f instanceof G.Z){if((0,g.f)(d))return tn(f,d,u);throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}if((0,g.a)(f)){if((0,g.j)(d)&&isFinite(d)&&Math.floor(d)===d){if(d<0&&(d=f.length+d),d>=f.length||d<0)throw new Error((0,S.H5)(u,"RUNTIME","OUTOFBOUNDS"));return f[d]}throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}if((0,g.f)(f)){if((0,g.j)(d)&&isFinite(d)&&Math.floor(d)===d){if(d<0&&(d=f.length+d),d>=f.length||d<0)throw new Error((0,S.H5)(u,"RUNTIME","OUTOFBOUNDS"));return f[d]}throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}if((0,g.b)(f)){if((0,g.j)(d)&&isFinite(d)&&Math.floor(d)===d){if(d<0&&(d=f.length()+d),d>=f.length()||d<0)throw new Error((0,S.H5)(u,"RUNTIME","OUTOFBOUNDS"));return f.get(d)}throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}throw new Error((0,S.H5)(u,"RUNTIME","INVALIDTYPE"))}}catch(f){throw f}}(h,u);case"Literal":return u.value;case"CallExpression":return function Jn(h,u){try{if("Identifier"!==u.callee.type)throw new Error((0,S.H5)(u,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==h.localScope&&void 0!==h.localScope[u.callee.name.toLowerCase()]){const f=h.localScope[u.callee.name.toLowerCase()];if(f.value instanceof g.N)return f.value.fn(h,u);if(f.value instanceof N.Z)return un(h,u,f.value.definition);throw new Error((0,S.H5)(u,"RUNTIME","NOTAFUNCTION"))}if(void 0!==h.globalScope[u.callee.name.toLowerCase()]){const f=h.globalScope[u.callee.name.toLowerCase()];if(f.value instanceof g.N)return f.value.fn(h,u);if(f.value instanceof N.Z)return un(h,u,f.value.definition);throw new Error((0,S.H5)(u,"RUNTIME","NOTAFUNCTION"))}throw new Error((0,S.H5)(u,"RUNTIME","NOTFOUND"))}catch(f){throw f}}(h,u);case"UnaryExpression":return function Gn(h,u){try{const f=I(h,u.argument);if((0,g.i)(f)){if("!"===u.operator)return!f;if("-"===u.operator)return-1*(0,g.t)(f);if("+"===u.operator)return 1*(0,g.t)(f);if("~"===u.operator)return~(0,g.t)(f);throw new Error((0,S.H5)(u,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("~"===u.operator)return~(0,g.t)(f);if("-"===u.operator)return-1*(0,g.t)(f);if("+"===u.operator)return 1*(0,g.t)(f);throw new Error((0,S.H5)(u,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}catch(f){throw f}}(h,u);case"BinaryExpression":return function Yn(h,u){try{const f=[I(h,u.left),I(h,u.right)],d=f[0],m=f[1];switch(u.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,g.h)((0,g.t)(d),(0,g.t)(m),u.operator);case"==":return(0,g.e)(d,m);case"!=":return!(0,g.e)(d,m);case"<":case">":case"<=":case">=":return(0,g.g)(d,m,u.operator);case"+":return(0,g.f)(d)||(0,g.f)(m)?(0,g.d)(d)+(0,g.d)(m):(0,g.t)(d)+(0,g.t)(m);case"-":return(0,g.t)(d)-(0,g.t)(m);case"*":return(0,g.t)(d)*(0,g.t)(m);case"/":return(0,g.t)(d)/(0,g.t)(m);case"%":return(0,g.t)(d)%(0,g.t)(m);default:throw new Error((0,S.H5)(u,"RUNTIME","OPERATORNOTRECOGNISED"))}}catch(f){throw f}}(h,u);case"LogicalExpression":return function Vn(h,u){try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new Error((0,S.H5)(u.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new Error((0,S.H5)(u.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));const f=I(h,u.left);if((0,g.i)(f))switch(u.operator){case"||":if(!0===f)return f;{const d=I(h,u.right);if((0,g.i)(d))return d;throw new Error((0,S.H5)(u,"RUNTIME","ONLYORORAND"))}case"&&":if(!1===f)return f;{const d=I(h,u.right);if((0,g.i)(d))return d;throw new Error((0,S.H5)(u,"RUNTIME","ONLYORORAND"))}default:throw new Error((0,S.H5)(u,"RUNTIME","ONLYORORAND"))}throw new Error((0,S.H5)(u,"RUNTIME","ONLYBOOLEAN"))}catch(f){throw f}}(h,u);case"ArrayExpression":return function jn(h,u){try{const f=[];for(let d=0;d<u.elements.length;d++){const m=I(h,u.elements[d]);if((0,g.c)(m))throw new Error((0,S.H5)(u,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));f.push(m===g.v?null:m)}return f}catch(f){throw f}}(h,u);case"ObjectExpression":return function te(h,u){const f={};for(let m=0;m<u.properties.length;m++){const O=I(h,u.properties[m]);if((0,g.c)(O.value))throw new Error("Illegal Argument");if(!1===(0,g.f)(O.key))throw new Error("Illegal Argument");f[O.key.toString()]=O.value===g.v?null:O.value}const d=new b.Z(f);return d.immutable=!1,d}(h,u);case"Property":return function ce(h,u){return{key:"Identifier"===u.key.type?u.key.name:I(h,u.key),value:I(h,u.value)}}(h,u);default:throw new Error((0,S.H5)(u,"RUNTIME","UNREOGNISED"))}}catch(f){throw f}}function de(h,u,f){if(null!==u.test){if(f.testResult=I(h,u.test),!1===f.testResult)return;if(!0!==f.testResult)throw new Error((0,S.H5)(u,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}f.lastAction=I(h,u.body),f.lastAction!==g.m?f.lastAction instanceof g.R?f.testResult=!1:null!==u.update&&I(h,u.update):f.testResult=!1}function ve(h,u,f,d){switch(u){case"=":return h===g.v?null:h;case"/=":return(0,g.t)(f)/(0,g.t)(h);case"*=":return(0,g.t)(f)*(0,g.t)(h);case"-=":return(0,g.t)(f)-(0,g.t)(h);case"+=":return(0,g.f)(f)||(0,g.f)(h)?(0,g.d)(f)+(0,g.d)(h):(0,g.t)(f)+(0,g.t)(h);case"%=":return(0,g.t)(f)%(0,g.t)(h);default:throw new Error((0,S.H5)(d,"RUNTIME","OPERATORNOTRECOGNISED"))}}let Ke=0;function tn(h,u,f){let d;switch(u=u.toLowerCase()){case"hasz":{const m=h.hasZ;return void 0!==m&&m}case"hasm":{const m=h.hasM;return void 0!==m&&m}case"spatialreference":{let m=h.spatialReference._arcadeCacheId;if(void 0===m){let ne=!0;Object.freeze&&Object.isFrozen(h.spatialReference)&&(ne=!1),ne&&(Ke++,h.spatialReference._arcadeCacheId=Ke,m=Ke)}const O=new b.Z({wkt:h.spatialReference.wkt,wkid:h.spatialReference.wkid});return void 0!==m&&(O._arcadeCacheId="SPREF"+m.toString()),O}}switch(h.type){case"extent":switch(u){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const m=h[u];return void 0!==m?m:null}case"type":return"Extent"}break;case"polygon":switch(u){case"rings":return d=h.cache._arcadeCacheId,void 0===d&&(Ke++,d=Ke,h.cache._arcadeCacheId=d),new pe.Z(h.rings,h.spatialReference,!0===h.hasZ,!0===h.hasM,d);case"type":return"Polygon"}break;case"point":switch(u){case"x":case"y":case"z":case"m":return void 0!==h[u]?h[u]:null;case"type":return"Point"}break;case"polyline":switch(u){case"paths":return d=h.cache._arcadeCacheId,void 0===d&&(Ke++,d=Ke,h.cache._arcadeCacheId=d),new pe.Z(h.paths,h.spatialReference,!0===h.hasZ,!0===h.hasM,d);case"type":return"Polyline"}break;case"multipoint":switch(u){case"points":return d=h.cache._arcadeCacheId,void 0===d&&(Ke++,d=Ke,h.cache._arcadeCacheId=d),new le.Z(h.points,h.spatialReference,!0===h.hasZ,!0===h.hasM,d,1);case"type":return"Multipoint"}}throw new Error((0,S.H5)(f,"RUNTIME","PROPERTYNOTFOUND"))}function nn(h,u){let f;try{const d=u.name.toLowerCase();if(null!==h.localScope&&void 0!==h.localScope[d])return f=h.localScope[d],!0===f.valueset||(f.value=I(h,f.node),f.valueset=!0),f.value;if(void 0!==h.globalScope[d])return f=h.globalScope[d],!0===f.valueset||(f.value=I(h,f.node),f.valueset=!0),f.value;throw new Error((0,S.H5)(u,"RUNTIME","VARIABLENOTFOUND"))}catch(d){throw d}}const _e={};function rn(h){return null==h?"":(0,g.a)(h)||(0,g.b)(h)?"Array":(0,g.o)(h)?"Date":(0,g.f)(h)?"String":(0,g.i)(h)?"Boolean":(0,g.j)(h)?"Number":h instanceof fe.Z?"Attachment":h instanceof Y.Z?"Portal":h instanceof b.Z?"Dictionary":(0,g.k)(h)?"Feature":h instanceof re.Z?"Point":h instanceof Z.Z?"Polygon":h instanceof w.Z?"Polyline":h instanceof z.Z?"Multipoint":h instanceof ie.Z?"Extent":(0,g.c)(h)?"Function":(0,g.q)(h)?"FeatureSet":(0,g.r)(h)?"FeatureSetCollection":h===g.v?"":"number"==typeof h&&isNaN(h)?"Number":"Unrecognised Type"}function sn(h,u,f,d){try{const m=I(h,u.arguments[f]);if((0,g.e)(m,d))return I(h,u.arguments[f+1]);{const O=u.arguments.length-f;return 1===O?I(h,u.arguments[f]):2===O?null:3===O?I(h,u.arguments[f+2]):sn(h,u,f+2,d)}}catch(m){throw m}}function an(h,u,f,d){try{if(!0===d)return I(h,u.arguments[f+1]);if(u.arguments.length-f==3)return I(h,u.arguments[f+2]);{const m=I(h,u.arguments[f+2]);if(!1===(0,g.i)(m))throw new Error("WHEN needs boolean test conditions");return an(h,u,f+2,m)}}catch(m){throw m}}function tt(h,u){const f=h.length,d=Math.floor(f/2);return 0===f?[]:1===f?[h[0]]:function Xn(h,u,f){const d=[];for(;h.length>0||u.length>0;)if(h.length>0&&u.length>0){let m=f(h[0],u[0]);isNaN(m)&&(m=0),m<=0?(d.push(h[0]),h=h.slice(1)):(d.push(u[0]),u=u.slice(1))}else h.length>0?(d.push(h[0]),h=h.slice(1)):u.length>0&&(d.push(u[0]),u=u.slice(1));return d}(tt(h.slice(0,d),u),tt(h.slice(d,f),u),u)}function on(h,u,f){try{const d=h.body;if(f.length!==h.params.length)throw new Error("Invalid Parameter calls to function.");for(let O=0;O<f.length;O++)u.localScope[h.params[O].name.toLowerCase()]={value:f[O],valueset:!0,node:null};const m=I(u,d);if(m instanceof g.R)return m.value;if(m===g.m)throw new Error("Cannot Break from a Function");if(m===g.n)throw new Error("Cannot Continue from a Function");return m instanceof g.I?m.value:m}catch(d){throw d}}function un(h,u,f){return R(h,u,function(d,m,O){const ne={spatialReference:h.spatialReference,globalScope:h.globalScope,depthCounter:h.depthCounter+1,console:h.console,lrucache:h.lrucache,interceptor:h.interceptor,localScope:{}};if(ne.depthCounter>64)throw new Error("Exceeded maximum function depth");return on(f,ne,O)})}function ln(h){return function(){const f={spatialReference:h.context.spatialReference,console:h.context.console,lrucache:h.context.lrucache,interceptor:h.context.interceptor,localScope:{},depthCounter:h.context.depthCounter+1,globalScope:h.context.globalScope};if(f.depthCounter>64)throw new Error("Exceeded maximum function depth");return on(h.definition,f,arguments)}}(0,M.r)(_e,R),(0,H.r)(_e,R),(0,C.r)(_e,R),(0,X.r)(_e,R),(0,T.r)(_e,R),(0,B.registerFunctions)(_e,R),_e.typeof=function(h,u){return R(h,u,function(f,d,m){(0,g.p)(m,1,1);const O=rn(m[0]);if("Unrecognised Type"===O)throw new Error("Unrecognised Type");return O})},_e.iif=function(h,u){try{(0,g.p)(null===u.arguments?[]:u.arguments,3,3);const f=I(h,u.arguments[0]);if(!1===(0,g.i)(f))throw new Error("IF Function must have a boolean test condition");const d=I(h,u.arguments[1]),m=I(h,u.arguments[2]);return!0===f?d:m}catch(f){throw f}},_e.decode=function(h,u){try{if(u.arguments.length<2)throw new Error("Missing Parameters");if(2===u.arguments.length)return I(h,u.arguments[1]);if((u.arguments.length-1)%2==0)throw new Error("Must have a default value result.");return sn(h,u,1,I(h,u.arguments[0]))}catch(f){throw f}},_e.when=function(h,u){try{if(u.arguments.length<3)throw new Error("Missing Parameters");if(u.arguments.length%2==0)throw new Error("Must have a default value result.");const f=I(h,u.arguments[0]);if(!1===(0,g.i)(f))throw new Error("WHEN needs boolean test conditions");return an(h,u,0,f)}catch(f){throw f}},_e.top=function(h,u){return R(h,u,function(f,d,m){if((0,g.p)(m,2,2),(0,g.a)(m[0]))return(0,g.t)(m[1])>=m[0].length?m[0].slice(0):m[0].slice(0,(0,g.t)(m[1]));if((0,g.b)(m[0]))return(0,g.t)(m[1])>=m[0].length()?m[0].slice(0):m[0].slice(0,(0,g.t)(m[1]));throw new Error("Top cannot accept this parameter type")})},_e.first=function(h,u){return R(h,u,function(f,d,m){return(0,g.p)(m,1,1),(0,g.a)(m[0])?0===m[0].length?null:m[0][0]:(0,g.b)(m[0])?0===m[0].length()?null:m[0].get(0):null})},_e.sort=function(h,u){return R(h,u,function(f,d,m){(0,g.p)(m,1,2);let O=m[0];if((0,g.b)(O)&&(O=O.toArray()),!1===(0,g.a)(O))throw new Error("Illegal Argument");if(m.length>1){if(!1===(0,g.c)(m[1]))throw new Error("Illegal Argument");let ne=O;const ae=ln(m[1]);return ne=tt(ne,function(De,ge){return ae(De,ge)}),ne}{let ne=O;if(0===ne.length)return[];const ae={};for(let Ee=0;Ee<ne.length;Ee++){const xe=rn(ne[Ee]);""!==xe&&(ae[xe]=!0)}if(!0===ae.Array||!0===ae.Dictionary||!0===ae.Feature||!0===ae.Point||!0===ae.Polygon||!0===ae.Polyline||!0===ae.Multipoint||!0===ae.Extent||!0===ae.Function)return ne.slice(0);let De=0,ge="";for(const Ee in ae)De++,ge=Ee;return ne=De>1||"String"===ge?tt(ne,function(Ee,xe){if(null==Ee||Ee===g.v)return null==xe||xe===g.v?0:1;if(null==xe||xe===g.v)return-1;const He=(0,g.d)(Ee),Ye=(0,g.d)(xe);return He<Ye?-1:He===Ye?0:1}):"Number"===ge?tt(ne,function(Ee,xe){return Ee-xe}):"Boolean"===ge?tt(ne,function(Ee,xe){return Ee===xe?0:xe?-1:1}):"Date"===ge?tt(ne,function(Ee,xe){return xe-Ee}):ne.slice(0),ne}})};for(const h in _e)_e[h]={value:new g.N(_e[h]),valueset:!0,node:null};const Et=function(){};function $n(h,u){const f=new Et;h||(h={}),u||(u={});const d=new b.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});d.immutable=!1,f.textformatting={value:d,valueset:!0,node:null};for(const m in u)f[m]={value:new g.N(u[m]),native:!0,valueset:!0,node:null};for(const m in h)f[m]=h[m]&&"esri.Graphic"===h[m].declaredClass?{value:v.Z.createFromGraphic(h[m]),valueset:!0,node:null}:{value:h[m],valueset:!0,node:null};return f}function Qn(h){console.log(h)}function cn(h){const u={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:R,evaluateIdentifier:nn,arcadeCustomFunctionHandler:ln};for(let f=0;f<h.length;f++)h[f].registerFunctions(u);for(const f in u.functions)_e[f]={value:new g.N(u.functions[f]),valueset:!0,node:null},Et.prototype[f]=_e[f];for(let f=0;f<u.signatures.length;f++)(0,S.gW)(u.signatures[f],"async")}function hn(h,u){let f=u.spatialReference;null==f&&(f=new ee.Z({wkid:102100}));let d=I({spatialReference:f,globalScope:$n(u.vars,u.customfunctions),localScope:null,console:u.console?u.console:Qn,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:1},h.body[0].body);if(d instanceof g.R&&(d=d.value),d instanceof g.I&&(d=d.value),d===g.v&&(d=null),d===g.m)throw new Error("Cannot return BREAK");if(d===g.n)throw new Error("Cannot return CONTINUE");if(d instanceof N.Z)throw new Error("Cannot return FUNCTION");if(d instanceof g.N)throw new Error("Cannot return FUNCTION");return d}(Et.prototype=_e).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Et.prototype.pi={value:Math.PI,valueset:!0,node:null},cn([J.A]);class tr{constructor(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}insertInnerComments(u,f){if("BlockStatement"===u.type&&0===u.body.length){const d=[];for(let m=this.leading.length-1;m>=0;--m){const O=this.leading[m];f.end.offset>=O.start&&(d.unshift(O.comment),this.leading.splice(m,1),this.trailing.splice(m,1))}d.length&&(u.innerComments=d)}}findTrailingComments(u){let f=[];if(this.trailing.length>0){for(let m=this.trailing.length-1;m>=0;--m){const O=this.trailing[m];O.start>=u.end.offset&&f.unshift(O.comment)}return this.trailing.length=0,f}const d=this.stack[this.stack.length-1];if(d&&d.node.trailingComments){const m=d.node.trailingComments[0];m&&m.range[0]>=u.end.offset&&(f=d.node.trailingComments,delete d.node.trailingComments)}return f}findLeadingComments(u){const f=[];let d;for(;this.stack.length>0;){const m=this.stack[this.stack.length-1];if(!(m&&m.start>=u.start.offset))break;d=m.node,this.stack.pop()}if(d){for(let m=(d.leadingComments?d.leadingComments.length:0)-1;m>=0;--m){const O=d.leadingComments[m];O.range[1]<=u.start.offset&&(f.unshift(O),d.leadingComments.splice(m,1))}return d.leadingComments&&0===d.leadingComments.length&&delete d.leadingComments,f}for(let m=this.leading.length-1;m>=0;--m){const O=this.leading[m];O.start<=u.start.offset&&(f.unshift(O.comment),this.leading.splice(m,1))}return f}visitNode(u,f){if("Program"===u.type&&u.body.length>0)return;this.insertInnerComments(u,f);const d=this.findTrailingComments(f),m=this.findLeadingComments(f);m.length>0&&(u.leadingComments=m),d.length>0&&(u.trailingComments=d),this.stack.push({node:u,start:f.start.offset})}visitComment(u,f){if(this.comments.push(u),this.attach){const d={comment:{type:u.type,value:u.value,range:[f.start.offset,f.end.offset]},start:f.start.offset};u.loc&&(d.comment.loc=u.loc),this.leading.push(d),this.trailing.push(d)}}visit(u,f){"Line"===u.type||"Block"===u.type?this.visitComment(u,f):this.attach&&this.visitNode(u,f)}}function st(h,u){if(!h)throw new Error("ASSERT: "+u)}class nr{constructor(){this.errors=[],this.tolerant=!1}recordError(u){this.errors.push(u)}tolerate(u){if(!this.tolerant)throw u;this.recordError(u)}constructError(u,f){let d=new Error(u);try{throw d}catch(m){Object.create&&Object.defineProperty&&(d=Object.create(m),Object.defineProperty(d,"column",{value:f}))}return d}createError(u,f,d,m){const ne=this.constructError("Line "+f+": "+m,d);return ne.index=u,ne.lineNumber=f,ne.description=m,ne}throwError(u,f,d,m){throw this.createError(u,f,d,m)}tolerateError(u,f,d,m){const O=this.createError(u,f,d,m);if(!this.tolerant)throw O;this.recordError(O)}}class be{}class rr extends be{constructor(u,f){super(),this.type=u,this.value=f}}class ir extends be{constructor(u){super(),this.elements=u,this.type="ArrayExpression"}}const sr=["=","/=","*=","%=","+=","-="];class ar extends be{constructor(u,f,d){super(),this.operator=u,this.left=f,this.right=d,this.type="AssignmentExpression"}}const or=["||","&&"];class fn extends be{constructor(u,f,d){super(),this.operator=u,this.left=f,this.right=d,this.type=or.includes(u)?"LogicalExpression":"BinaryExpression"}}class dn extends be{constructor(u){super(),this.body=u,this.type="BlockStatement"}}class ur extends be{constructor(){super(...arguments),this.type="BreakStatement"}}class lr extends be{constructor(u,f){super(),this.callee=u,this.args=f,this.type="CallExpression",this.arguments=f}}class mn extends be{constructor(u,f){super(),this.object=u,this.property=f,this.type="MemberExpression",this.computed=!0}}class pn extends be{constructor(u,f){super(),this.object=u,this.property=f,this.type="MemberExpression",this.computed=!1}}class cr extends be{constructor(){super(...arguments),this.type="ContinueStatement"}}class Mt extends be{constructor(){super(...arguments),this.type="EmptyStatement"}}class Dn extends be{constructor(u){super(),this.expression=u,this.type="ExpressionStatement"}}class hr extends be{constructor(u,f,d){super(),this.left=u,this.right=f,this.body=d,this.type="ForInStatement",this.each=!1}}class fr extends be{constructor(u,f,d,m){super(),this.init=u,this.test=f,this.update=d,this.body=m,this.type="ForStatement"}}class dr extends be{constructor(u,f,d){super(),this.id=u,this.params=f,this.body=d,this.type="FunctionDeclaration",this.generator=!1,this.expression=!1,this.async=!1}}class at extends be{constructor(u){super(),this.name=u,this.type="Identifier"}}class mr extends be{constructor(u,f,d){super(),this.test=u,this.consequent=f,this.alternate=d,this.type="IfStatement"}}class Ft extends be{constructor(u,f){super(),this.value=u,this.raw=f,this.type="Literal"}}class pr extends be{constructor(u){super(),this.properties=u,this.type="ObjectExpression"}}class Dr extends be{constructor(u,f,d,m,O,ne){super(),this.kind=u,this.key=f,this.computed=d,this.value=m,this.method=O,this.shorthand=ne,this.type="Property"}}class gr extends be{constructor(u){super(),this.argument=u,this.type="ReturnStatement"}}class Er extends be{constructor(u){super(),this.body=u,this.type="Program"}}class gn extends be{constructor(u,f){super(),this.value=u,this.tail=f,this.type="TemplateElement"}}class yr extends be{constructor(u,f){super(),this.quasis=u,this.expressions=f,this.type="TemplateLiteral"}}class Ar extends be{constructor(u,f){super(),this.operator=u,this.argument=f,this.type="UnaryExpression",this.prefix=!0}}class En extends be{constructor(u,f,d){super(),this.operator=u,this.argument=f,this.prefix=d,this.type="UpdateExpression"}}class Pt extends be{constructor(u,f){super(),this.declarations=u,this.kind=f,this.type="VariableDeclaration"}}class xr extends be{constructor(u,f){super(),this.id=u,this.init=f,this.type="VariableDeclarator"}}const yn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Fe={fromCodePoint:h=>h<65536?String.fromCharCode(h):String.fromCharCode(55296+(h-65536>>10))+String.fromCharCode(56320+(h-65536&1023)),isWhiteSpace:h=>32===h||9===h||11===h||12===h||160===h||h>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(h)>=0,isLineTerminator:h=>10===h||13===h||8232===h||8233===h,isIdentifierStart:h=>36===h||95===h||h>=65&&h<=90||h>=97&&h<=122||92===h||h>=128&&yn.NonAsciiIdentifierStart.test(Fe.fromCodePoint(h)),isIdentifierPart:h=>36===h||95===h||h>=65&&h<=90||h>=97&&h<=122||h>=48&&h<=57||92===h||h>=128&&yn.NonAsciiIdentifierPart.test(Fe.fromCodePoint(h)),isDecimalDigit:h=>h>=48&&h<=57,isHexDigit:h=>h>=48&&h<=57||h>=65&&h<=70||h>=97&&h<=102,isOctalDigit:h=>h>=48&&h<=55};var me,h;(h=me||(me={}))[h.BooleanLiteral=1]="BooleanLiteral",h[h.EOF=2]="EOF",h[h.Identifier=3]="Identifier",h[h.Keyword=4]="Keyword",h[h.NullLiteral=5]="NullLiteral",h[h.NumericLiteral=6]="NumericLiteral",h[h.Punctuator=7]="Punctuator",h[h.StringLiteral=8]="StringLiteral",h[h.RegularExpression=9]="RegularExpression",h[h.Template=10]="Template";const Ze={};function An(h){return"0123456789abcdef".indexOf(h.toLowerCase())}function Zt(h){return"01234567".indexOf(h)}Ze[me.BooleanLiteral]="Boolean",Ze[me.EOF]="<end>",Ze[me.Identifier]="Identifier",Ze[me.Keyword]="Keyword",Ze[me.NullLiteral]="Null",Ze[me.NumericLiteral]="Numeric",Ze[me.Punctuator]="Punctuator",Ze[me.StringLiteral]="String",Ze[me.RegularExpression]="RegularExpression",Ze[me.Template]="Template";class Cr{constructor(u,f){this.source=u,this.errorHandler=f,this.trackComment=!1,this.isModule=!1,this.length=u.length,this.index=0,this.lineNumber=u.length>0?1:0,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(u){this.index=u.index,this.lineNumber=u.lineNumber,this.lineStart=u.lineStart,this.curlyStack=u.curlyStack}eof(){return this.index>=this.length}throwUnexpectedToken(u="Unexpected token ILLEGAL"){return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,u)}_tolerateUnexpectedToken(u="Unexpected token ILLEGAL"){this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,u)}_skipSingleLineComment(u){let f=[],d=0,m=null;for(this.trackComment&&(f=[],d=this.index-u,m={start:{line:this.lineNumber,column:this.index-this.lineStart-u},end:{line:0,column:0}});!this.eof();){const O=this.source.charCodeAt(this.index);if(++this.index,Fe.isLineTerminator(O))return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart-1},f.push({multiLine:!1,slice:[d+u,this.index-1],range:[d,this.index-1],loc:m})),13===O&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,f}return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},f.push({multiLine:!1,slice:[d+u,this.index],range:[d,this.index],loc:m})),f}_skipMultiLineComment(){const u=[];let f=0,d=null;for(this.trackComment&&(f=this.index-2,d={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});!this.eof();){const m=this.source.charCodeAt(this.index);if(Fe.isLineTerminator(m))13===m&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===m){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,d&&(d.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,slice:[f+2,this.index-2],range:[f,this.index],loc:d})),u;++this.index}else++this.index}return d&&(d.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,slice:[f+2,this.index],range:[f,this.index],loc:d})),this._tolerateUnexpectedToken(),u}scanComments(){let u=null;this.trackComment&&(u=[]);let f=0===this.index;for(;!this.eof();){let d=this.source.charCodeAt(this.index);if(Fe.isWhiteSpace(d))++this.index;else if(Fe.isLineTerminator(d))++this.index,13===d&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,f=!0;else if(47===d)if(d=this.source.charCodeAt(this.index+1),47===d){this.index+=2;const m=this._skipSingleLineComment(2);u&&(u=u.concat(m)),f=!0}else{if(42!==d)break;{this.index+=2;const m=this._skipMultiLineComment();u&&(u=u.concat(m))}}else if(f&&45===d){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;{this.index+=3;const m=this._skipSingleLineComment(3);u&&(u=u.concat(m))}}else{if(60!==d||this.isModule||"!--"!==this.source.slice(this.index+1,this.index+4))break;{this.index+=4;const m=this._skipSingleLineComment(4);u&&(u=u.concat(m))}}}return u}_isKeyword(u){switch((u=u.toLowerCase()).length){case 2:return"if"===u||"in"===u;case 3:return"var"===u||"for"===u;case 4:return"else"===u;case 5:return"break"===u;case 6:return"return"===u;case 8:return"function"===u||"continue"===u;default:return!1}}_codePointAt(u){let f=this.source.charCodeAt(u);if(f>=55296&&f<=56319){const d=this.source.charCodeAt(u+1);d>=56320&&d<=57343&&(f=1024*(f-55296)+d-56320+65536)}return f}_scanHexEscape(u){const f="u"===u?4:2;let d=0;for(let m=0;m<f;++m){if(this.eof()||!Fe.isHexDigit(this.source.charCodeAt(this.index)))return null;d=16*d+An(this.source[this.index++])}return String.fromCharCode(d)}_scanUnicodeCodePointEscape(){let u=this.source[this.index],f=0;for("}"===u&&this.throwUnexpectedToken();!this.eof()&&(u=this.source[this.index++],Fe.isHexDigit(u.charCodeAt(0)));)f=16*f+An(u);return(f>1114111||"}"!==u)&&this.throwUnexpectedToken(),Fe.fromCodePoint(f)}_getIdentifier(){const u=this.index++;for(;!this.eof();){const f=this.source.charCodeAt(this.index);if(92===f)return this.index=u,this._getComplexIdentifier();if(f>=55296&&f<57343)return this.index=u,this._getComplexIdentifier();if(!Fe.isIdentifierPart(f))break;++this.index}return this.source.slice(u,this.index)}_getComplexIdentifier(){let u,f=this._codePointAt(this.index),d=Fe.fromCodePoint(f);for(this.index+=d.length,92===f&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this._scanUnicodeCodePointEscape()):(u=this._scanHexEscape("u"),null!==u&&"\\"!==u&&Fe.isIdentifierStart(u.charCodeAt(0))||this.throwUnexpectedToken()),d=u);!this.eof()&&(f=this._codePointAt(this.index),Fe.isIdentifierPart(f));)u=Fe.fromCodePoint(f),d+=u,this.index+=u.length,92===f&&(d=d.substr(0,d.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this._scanUnicodeCodePointEscape()):(u=this._scanHexEscape("u"),null!==u&&"\\"!==u&&Fe.isIdentifierPart(u.charCodeAt(0))||this.throwUnexpectedToken()),d+=u);return d}_octalToDecimal(u){let f="0"!==u,d=Zt(u);return!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(f=!0,d=8*d+Zt(this.source[this.index++]),"0123".indexOf(u)>=0&&!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index))&&(d=8*d+Zt(this.source[this.index++]))),{code:d,octal:f}}_scanIdentifier(){let u;const f=this.index,d=92===this.source.charCodeAt(f)?this._getComplexIdentifier():this._getIdentifier();if(u=1===d.length?me.Identifier:this._isKeyword(d)?me.Keyword:"null"===d.toLowerCase()?me.NullLiteral:"true"===d.toLowerCase()||"false"===d.toLowerCase()?me.BooleanLiteral:me.Identifier,u!==me.Identifier&&f+d.length!==this.index){const m=this.index;this.index=f,this._tolerateUnexpectedToken("Keyword must not contain escaped characters"),this.index=m}return{type:u,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}}_scanPunctuator(){const u=this.index;let f=this.source[this.index];switch(f){case"(":case"{":"{"===f&&this.curlyStack.push("{"),++this.index;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;case"}":++this.index,this.curlyStack.pop();break;default:f=this.source.substr(this.index,4),">>>="===f?this.index+=4:(f=f.substr(0,3),"==="===f||"!=="===f||">>>"===f||"<<="===f||">>="===f||"**="===f?this.index+=3:(f=f.substr(0,2),"&&"===f||"||"===f||"=="===f||"!="===f||"+="===f||"-="===f||"*="===f||"/="===f||"++"===f||"--"===f||"<<"===f||">>"===f||"&="===f||"|="===f||"^="===f||"%="===f||"<="===f||">="===f||"=>"===f||"**"===f?this.index+=2:(f=this.source[this.index],"<>=!+-*%&|^/".indexOf(f)>=0&&++this.index)))}return this.index===u&&this.throwUnexpectedToken(),{type:me.Punctuator,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}_scanHexLiteral(u){let f="";for(;!this.eof()&&Fe.isHexDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];return 0===f.length&&this.throwUnexpectedToken(),Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:me.NumericLiteral,value:parseInt("0x"+f,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}_scanBinaryLiteral(u){let f="";for(;!this.eof();){const d=this.source[this.index];if("0"!==d&&"1"!==d)break;f+=this.source[this.index++]}if(0===f.length&&this.throwUnexpectedToken(),!this.eof()){const d=this.source.charCodeAt(this.index);(Fe.isIdentifierStart(d)||Fe.isDecimalDigit(d))&&this.throwUnexpectedToken()}return{type:me.NumericLiteral,value:parseInt(f,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}_scanOctalLiteral(u,f){let d="",m=!1;for(Fe.isOctalDigit(u.charCodeAt(0))?(m=!0,d="0"+this.source[this.index++]):++this.index;!this.eof()&&Fe.isOctalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];return m||0!==d.length||this.throwUnexpectedToken(),(Fe.isIdentifierStart(this.source.charCodeAt(this.index))||Fe.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:me.NumericLiteral,value:parseInt(d,8),octal:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}}_scanNumericLiteral(){const u=this.index;let f=this.source[u];st(Fe.isDecimalDigit(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point");let d="";if("."!==f){if(d=this.source[this.index++],f=this.source[this.index],"0"===d){if("x"===f||"X"===f)return++this.index,this._scanHexLiteral(u);if("b"===f||"B"===f)return++this.index,this._scanBinaryLiteral(u);if("o"===f||"O"===f)return this._scanOctalLiteral(f,u)}for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];f=this.source[this.index]}if("."===f){for(d+=this.source[this.index++];Fe.isDecimalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];f=this.source[this.index]}if("e"===f||"E"===f)if(d+=this.source[this.index++],f=this.source[this.index],"+"!==f&&"-"!==f||(d+=this.source[this.index++]),Fe.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Fe.isDecimalDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];else this.throwUnexpectedToken();return Fe.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:me.NumericLiteral,value:parseFloat(d),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}_scanStringLiteral(){const u=this.index;let f=this.source[u];st("'"===f||'"'===f,"String literal must starts with a quote"),++this.index;let d=!1,m="";for(;!this.eof();){let O=this.source[this.index++];if(O===f){f="";break}if("\\"===O)if(O=this.source[this.index++],O&&Fe.isLineTerminator(O.charCodeAt(0)))++this.lineNumber,"\r"===O&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(O){case"u":if("{"===this.source[this.index])++this.index,m+=this._scanUnicodeCodePointEscape();else{const ne=this._scanHexEscape(O);null===ne&&this.throwUnexpectedToken(),m+=ne}break;case"x":{const ne=this._scanHexEscape(O);null===ne&&this.throwUnexpectedToken("Invalid hexadecimal escape sequence"),m+=ne;break}case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;case"8":case"9":m+=O,this._tolerateUnexpectedToken();break;default:if(O&&Fe.isOctalDigit(O.charCodeAt(0))){const ne=this._octalToDecimal(O);d=ne.octal||d,m+=String.fromCharCode(ne.code)}else m+=O}else{if(Fe.isLineTerminator(O.charCodeAt(0)))break;m+=O}}return""!==f&&(this.index=u,this.throwUnexpectedToken()),{type:me.StringLiteral,value:m,octal:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}_scanTemplate(){let u="",f=!1;const d=this.index,m="`"===this.source[d];let O=!1,ne=2;for(++this.index;!this.eof();){let ae=this.source[this.index++];if("`"===ae){ne=1,O=!0,f=!0;break}if("$"===ae){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,f=!0;break}u+=ae}else if("\\"===ae)if(ae=this.source[this.index++],Fe.isLineTerminator(ae.charCodeAt(0)))++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ae){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":if("{"===this.source[this.index])++this.index,u+=this._scanUnicodeCodePointEscape();else{const De=this.index,ge=this._scanHexEscape(ae);null!==ge?u+=ge:(this.index=De,u+=ae)}break;case"x":{const De=this._scanHexEscape(ae);null===De&&this.throwUnexpectedToken("Invalid hexadecimal escape sequence"),u+=De;break}case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:"0"===ae?(Fe.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken("Octal literals are not allowed in template strings."),u+="\0"):Fe.isOctalDigit(ae.charCodeAt(0))?this.throwUnexpectedToken("Octal literals are not allowed in template strings."):u+=ae}else Fe.isLineTerminator(ae.charCodeAt(0))?(++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,u+="\n"):u+=ae}return f||this.throwUnexpectedToken(),m||this.curlyStack.pop(),{type:me.Template,value:this.source.slice(d+1,this.index-ne),cooked:u,head:m,tail:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}}_testRegExp(u,f){let m=u;f.indexOf("u")>=0&&(m=m.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(O,ne,ae)=>{const De=parseInt(ne||ae,16);return De>1114111&&this.throwUnexpectedToken("Invalid regular expression"),De<=65535?String.fromCharCode(De):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(m)}catch(O){this.throwUnexpectedToken("Invalid regular expression")}try{return new RegExp(u,f)}catch(O){return null}}_scanRegExpBody(){let u=this.source[this.index];st("/"===u,"Regular expression literal must start with a slash");let f=this.source[this.index++],d=!1,m=!1;for(;!this.eof();)if(u=this.source[this.index++],f+=u,"\\"===u)u=this.source[this.index++],Fe.isLineTerminator(u.charCodeAt(0))&&this.throwUnexpectedToken("Invalid regular expression: missing /"),f+=u;else if(Fe.isLineTerminator(u.charCodeAt(0)))this.throwUnexpectedToken("Invalid regular expression: missing /");else if(d)"]"===u&&(d=!1);else{if("/"===u){m=!0;break}"["===u&&(d=!0)}return m||this.throwUnexpectedToken("Invalid regular expression: missing /"),f.substr(1,f.length-2)}_scanRegExpFlags(){let u="",f="";for(;!this.eof();){let d=this.source[this.index];if(!Fe.isIdentifierPart(d.charCodeAt(0)))break;if(++this.index,"\\"!==d||this.eof())f+=d,u+=d;else if(d=this.source[this.index],"u"===d){++this.index;let m=this.index;const O=this._scanHexEscape("u");if(null!==O)for(f+=O,u+="\\u";m<this.index;++m)u+=this.source[m];else this.index=m,f+="u",u+="\\u";this._tolerateUnexpectedToken()}else u+="\\",this._tolerateUnexpectedToken()}return f}scanRegExp(){const u=this.index,f=this._scanRegExpBody(),d=this._scanRegExpFlags(),m=this._testRegExp(f,d);return{type:me.RegularExpression,value:"",pattern:f,flags:d,regex:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}lex(){if(this.eof())return{type:me.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const u=this.source.charCodeAt(this.index);return Fe.isIdentifierStart(u)?this._scanIdentifier():40===u||41===u||59===u?this._scanPunctuator():39===u||34===u?this._scanStringLiteral():46===u?Fe.isDecimalDigit(this.source.charCodeAt(this.index+1))?this._scanNumericLiteral():this._scanPunctuator():Fe.isDecimalDigit(u)?this._scanNumericLiteral():96===u||125===u&&"${"===this.curlyStack[this.curlyStack.length-1]?this._scanTemplate():u>=55296&&u<57343&&Fe.isIdentifierStart(this._codePointAt(this.index))?this._scanIdentifier():this._scanPunctuator()}}class Fr{constructor(u,f={},d){this.config={range:"boolean"==typeof f.range&&f.range,loc:"boolean"==typeof f.loc&&f.loc,source:null,tokens:"boolean"==typeof f.tokens&&f.tokens,comment:"boolean"==typeof f.comment&&f.comment,tolerant:"boolean"==typeof f.tolerant&&f.tolerant,globalReturn:!!f.globalReturn},this.config.loc&&f.source&&null!==f.source&&(this.config.source=String(f.source)),this.delegate=d,this.errorHandler=new nr,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new Cr(u,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:me.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}tolerateError(u,...f){const d=f.slice(),m=u.replace(/%(\d)/g,(De,ge)=>(st(ge<d.length,"Message reference must be in range"),d[ge]));this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,m)}unexpectedTokenError(u,f){let d,m=f||"Unexpected token %0";return u?(f||(m=u.type===me.EOF?"Unexpected end of input":u.type===me.Identifier?"Unexpected identifier":u.type===me.NumericLiteral?"Unexpected number":u.type===me.StringLiteral?"Unexpected string":u.type===me.Template?"Unexpected quasi %0":"Unexpected token %0"),d=u.value.toString()):d="ILLEGAL",m=m.replace("%0",d),u&&"number"==typeof u.lineNumber?this.errorHandler.createError(u.start,u.lineNumber,u.start-(this.lastMarker.index-this.lastMarker.column)+1,m):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,m)}throwUnexpectedToken(u,f){throw this.unexpectedTokenError(u,f)}tolerateUnexpectedToken(u,f){this.errorHandler.tolerate(this.unexpectedTokenError(u,f))}collectComments(){if(this.config.comment){const u=this.scanner.scanComments();if(u&&u.length>0&&this.delegate)for(let f=0;f<u.length;++f){const d=u[f],m=new rr(d.multiLine?"Block":"Line",this.scanner.source.slice(d.slice[0],d.slice[1]));this.config.range&&(m.range=d.range),this.config.loc&&(m.loc=d.loc),this.delegate(m,{start:{line:d.loc.start.line,column:d.loc.start.column,offset:d.range[0]},end:{line:d.loc.end.line,column:d.loc.end.column,offset:d.range[1]}})}}else this.scanner.scanComments()}peekAhead(u){const d=this.scanner.saveState();u.call(this,()=>(this.scanner.scanComments(),this.scanner.lex())),this.scanner.restoreState(d)}getTokenRaw(u){return this.scanner.source.slice(u.start,u.end)}convertToken(u){const f={type:Ze[u.type],value:this.getTokenRaw(u)};return this.config.range&&(f.range=[u.start,u.end]),this.config.loc&&(f.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),u.type===me.RegularExpression&&(f.regex={pattern:u.pattern,flags:u.flags}),f}nextToken(){const u=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);const f=this.scanner.lex();return this.hasLineTerminator=u.lineNumber!==f.lineNumber,this.lookahead=f,this.config.tokens&&f.type!==me.EOF&&this.tokens.push(this.convertToken(f)),u}createNode(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}startNode(u,f=0){let d=u.start-u.lineStart,m=u.lineNumber;return d<0&&(d+=f,m--),{index:u.start,line:m,column:d}}finalize(u,f){return this.config.range&&(f.range=[u.index,this.lastMarker.index]),this.config.loc&&(f.loc={start:{line:u.line,column:u.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(f.loc.source=this.config.source)),this.delegate&&this.delegate(f,{start:{line:u.line,column:u.column,offset:u.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}}),f}expect(u){const f=this.nextToken();f.type===me.Punctuator&&f.value===u||this.throwUnexpectedToken(f)}expectCommaSeparator(){if(this.config.tolerant){const u=this.lookahead;u.type===me.Punctuator&&","===u.value?this.nextToken():u.type===me.Punctuator&&";"===u.value?(this.nextToken(),this.tolerateUnexpectedToken(u)):this.tolerateUnexpectedToken(u,"Unexpected token %0")}else this.expect(",")}expectKeyword(u){const f=this.nextToken();f.type===me.Keyword&&f.value.toString().toLowerCase()===u.toLowerCase()||this.throwUnexpectedToken(f)}match(u){return this.lookahead.type===me.Punctuator&&this.lookahead.value===u}matchKeyword(u){return this.lookahead.type===me.Keyword&&this.lookahead.value.toLowerCase()===u.toLowerCase()}matchContextualKeyword(u){return this.lookahead.type===me.Identifier&&this.lookahead.value===u}matchAssign(){return this.lookahead.type===me.Punctuator&&sr.includes(this.lookahead.value)}isolateCoverGrammar(u){const f=this.context.isBindingElement,d=this.context.isAssignmentTarget,m=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;const O=u.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=f,this.context.isAssignmentTarget=d,this.context.firstCoverInitializedNameError=m,O}inheritCoverGrammar(u){const f=this.context.isBindingElement,d=this.context.isAssignmentTarget,m=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;const O=u.call(this);return this.context.isBindingElement=this.context.isBindingElement&&f,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d,this.context.firstCoverInitializedNameError=m||this.context.firstCoverInitializedNameError,O}consumeSemicolon(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===me.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)}parsePrimaryExpression(){const u=this.createNode();let f,d,m;switch(this.lookahead.type){case me.Identifier:f=this.finalize(u,new at(this.nextToken().value));break;case me.NumericLiteral:case me.StringLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),m=this.getTokenRaw(d),f=this.finalize(u,new Ft(d.value,m));break;case me.BooleanLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),m=this.getTokenRaw(d),f=this.finalize(u,new Ft("true"===d.value.toString().toLowerCase(),m));break;case me.NullLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),m=this.getTokenRaw(d),f=this.finalize(u,new Ft(null,m));break;case me.Template:f=this.parseTemplateLiteral();break;case me.Punctuator:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,f=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":f=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":f=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:f=this.throwUnexpectedToken(this.nextToken())}break;case me.Keyword:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,f=this.throwUnexpectedToken(this.nextToken());break;default:f=this.throwUnexpectedToken(this.nextToken())}return f}parseArrayInitializer(){const u=this.createNode(),f=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),f.push(null)):(f.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));return this.expect("]"),this.finalize(u,new ir(f))}parseObjectPropertyKey(){const u=this.createNode(),f=this.nextToken();let d;switch(f.type){case me.StringLiteral:case me.NumericLiteral:d=this.finalize(u,new Ft(f.value,this.getTokenRaw(f)));break;case me.Identifier:case me.BooleanLiteral:case me.NullLiteral:case me.Keyword:d=this.finalize(u,new at(f.value));break;default:d=this.throwUnexpectedToken(f)}return d}parseObjectProperty(){const u=this.createNode(),f=this.lookahead;let d=!1,O=!1,ne=null;if(f.type===me.Identifier){const ge=f.value;this.nextToken(),d=this.match("["),ne=this.finalize(u,new at(ge))}else this.match("*")?this.nextToken():(d=this.match("["),ne=this.parseObjectPropertyKey());ne||this.throwUnexpectedToken(this.lookahead);let ae=null;return this.match(":")?(this.nextToken(),ae=this.inheritCoverGrammar(this.parseAssignmentExpression)):f.type===me.Identifier?(O=!0,ae=this.finalize(u,new at(f.value))):this.throwUnexpectedToken(this.nextToken()),this.finalize(u,new Dr("init",ne,d,ae,!1,O))}parseObjectInitializer(){const u=this.createNode();this.expect("{");const f=[];for(;!this.match("}");)f.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(u,new pr(f))}parseTemplateHead(){st(this.lookahead.head,"Template literal must start with a template head");const u=this.createNode(),f=this.nextToken();return this.finalize(u,new gn({raw:f.value,cooked:f.cooked},f.tail))}parseTemplateElement(){this.lookahead.type!==me.Template&&this.throwUnexpectedToken();const u=this.createNode(),f=this.nextToken();return this.finalize(u,new gn({raw:f.value,cooked:f.cooked},f.tail))}parseTemplateLiteral(){const u=this.createNode(),f=[],d=[];let m=this.parseTemplateHead();for(d.push(m);!m.tail;)f.push(this.parseExpression()),m=this.parseTemplateElement(),d.push(m);return this.finalize(u,new yr(d,f))}parseGroupExpression(){this.expect("("),this.context.isBindingElement=!0;const u=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.expect(")"),this.context.isBindingElement=!1,u}parseArguments(){this.expect("(");const u=[];if(!this.match(")"))for(;;){const f=this.isolateCoverGrammar(this.parseAssignmentExpression);if(u.push(f),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),u}isIdentifierName(u){return u.type===me.Identifier||u.type===me.Keyword||u.type===me.BooleanLiteral||u.type===me.NullLiteral}parseIdentifierName(){const u=this.createNode(),f=this.nextToken();return this.isIdentifierName(f)||this.throwUnexpectedToken(f),this.finalize(u,new at(f.value))}parseLeftHandSideExpressionAllowCall(){const u=this.lookahead,f=this.context.allowIn;this.context.allowIn=!0;let d=this.inheritCoverGrammar(this.parsePrimaryExpression);for(;;)if(this.match("(")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;const m=this.parseArguments();d=this.finalize(this.startNode(u),new lr(d,m))}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");const m=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),d=this.finalize(this.startNode(u),new mn(d,m))}else{if(!this.match("."))break;{this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");const m=this.parseIdentifierName();d=this.finalize(this.startNode(u),new pn(d,m))}}return this.context.allowIn=f,d}parseLeftHandSideExpression(){st(this.context.allowIn,"callee of new expression always allow in keyword.");const u=this.startNode(this.lookahead);let f=this.inheritCoverGrammar(this.parsePrimaryExpression);for(;;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");const d=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),f=this.finalize(u,new mn(f,d))}else{if(!this.match("."))break;{this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");const d=this.parseIdentifierName();f=this.finalize(u,new pn(f,d))}}return f}parseUpdateExpression(){let u;const f=this.lookahead;if(this.match("++")||this.match("--")){const d=this.startNode(f),m=this.nextToken();u=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),u=this.finalize(d,new En(m.value,u,!0)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(u=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===me.Punctuator&&(this.match("++")||this.match("--"))){this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;const d=this.nextToken().value,m=!1;u=this.finalize(this.startNode(f),new En(d,u,m))}return u}parseUnaryExpression(){let u;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){const f=this.startNode(this.lookahead),d=this.nextToken();u=this.inheritCoverGrammar(this.parseUnaryExpression),u=this.finalize(f,new Ar(d.value,u)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else u=this.parseUpdateExpression();return u}binaryPrecedence(u){const f=u.value;let d;return d=u.type===me.Punctuator?this.operatorPrecedence[f]||0:u.type===me.Keyword&&this.context.allowIn&&"in"===f?12:0,d}parseBinaryExpression(){const u=this.lookahead;let f=this.inheritCoverGrammar(this.parseUnaryExpression);const d=this.lookahead;let m=this.binaryPrecedence(d);if(m>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;const O=[u,this.lookahead];let ne=f,ae=this.inheritCoverGrammar(this.parseUnaryExpression);const De=[ne,d.value,ae],ge=[m];for(;m=this.binaryPrecedence(this.lookahead),!(m<=0);){for(;De.length>2&&m<=ge[ge.length-1];){ae=De.pop();const He=De.pop();ge.pop(),ne=De.pop(),O.pop();const Ye=O[O.length-1],Xt=this.startNode(Ye,Ye.lineStart);De.push(this.finalize(Xt,new fn(He,ne,ae)))}De.push(this.nextToken().value),ge.push(m),O.push(this.lookahead),De.push(this.inheritCoverGrammar(this.parseUnaryExpression))}let Ee=De.length-1;f=De[Ee];let xe=O.pop();for(;Ee>1;){const He=O.pop();if(!He)break;const Xt=this.startNode(He,xe&&xe.lineStart);f=this.finalize(Xt,new fn(De[Ee-1],De[Ee-2],f)),Ee-=2,xe=He}}return f}parseAssignmentExpression(){const u=this.lookahead;let f=u,d=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError("Invalid left-hand side in assignment"),this.match("=")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),f=this.nextToken();const m=f.value,O=this.isolateCoverGrammar(this.parseAssignmentExpression);d=this.finalize(this.startNode(u),new ar(m,d,O)),this.context.firstCoverInitializedNameError=null}return d}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatementListItem(){let u;return this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,u=this.lookahead.type===me.Keyword&&"function"===this.lookahead.value?this.parseFunctionDeclaration():this.parseStatement(),u}parseBlock(){const u=this.createNode();this.expect("{");const f=[];for(;!this.match("}");)f.push(this.parseStatementListItem());return this.expect("}"),this.finalize(u,new dn(f))}parseObjectStatement(){const u=this.createNode(),f=this.parseObjectInitializer();return this.finalize(u,new Dn(f))}parseBlockOrObjectStatement(){let u="asObject"===this.context.curlyParsing;return"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(f=>{let d=f();d.type!==me.Identifier&&d.type!==me.StringLiteral||(d=f(),d.type===me.Punctuator&&":"===d.value&&(u=!0))}),u?this.parseObjectStatement():this.parseBlock()}parseVariableIdentifier(){const u=this.createNode(),f=this.nextToken();return f.type!==me.Identifier&&this.throwUnexpectedToken(f,"Identifier expected"),this.finalize(u,new at(f.value))}parseVariableDeclaration(u){const f=this.createNode(),d=this.parseVariableIdentifier();let m=null;return this.match("=")?(this.nextToken(),m=this.isolateCoverGrammar(this.parseAssignmentExpression)):"Identifier"===d.type||u.inFor||this.expect("="),this.finalize(f,new xr(d,m))}parseVariableDeclarationList(u){const f=[this.parseVariableDeclaration(u)];for(;this.match(",");)this.nextToken(),f.push(this.parseVariableDeclaration(u));return f}parseVariableStatement(){const u=this.createNode();this.expectKeyword("var");const f=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(u,new Pt(f,"var"))}parseEmptyStatement(){const u=this.createNode();return this.expect(";"),this.finalize(u,new Mt)}parseExpressionStatement(){const u=this.createNode(),f=this.parseExpression();return this.consumeSemicolon(),this.finalize(u,new Dn(f))}parseIfClause(){const u=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";const f=this.parseStatement();return this.context.curlyParsing=u,f}parseIfStatement(){const u=this.createNode();let f,d=null;this.expectKeyword("if"),this.expect("(");const m=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),f=this.finalize(this.createNode(),new Mt)):(this.expect(")"),f=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),d=this.parseIfClause())),this.finalize(u,new mr(m,f,d))}parseForStatement(){let u=null,f=null,d=null,m=null,O=null;const ne=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){const De=this.createNode();this.nextToken();const ge=this.context.allowIn;this.context.allowIn=!1;const Ee=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=ge,1===Ee.length&&this.matchKeyword("in")?(Ee[0].init&&this.tolerateError("%0 loop variable declaration may not have an initializer","for-in"),m=this.finalize(De,new Pt(Ee,"var")),this.nextToken(),O=this.parseExpression()):(u=this.finalize(De,new Pt(Ee,"var")),this.expect(";"))}else{const De=this.context.isBindingElement,ge=this.context.isAssignmentTarget,Ee=this.context.firstCoverInitializedNameError,xe=this.context.allowIn;this.context.allowIn=!1,u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=xe,this.matchKeyword("in")?(this.context.isAssignmentTarget&&"AssignmentExpression"!==u.type||this.tolerateError("Invalid left-hand side in for-in"),this.nextToken(),m=u,O=this.parseExpression(),u=null):(this.context.isBindingElement=De,this.context.isAssignmentTarget=ge,this.context.firstCoverInitializedNameError=Ee,this.expect(";"))}let ae;if(m||(this.match(";")||(f=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(d=this.isolateCoverGrammar(this.parseExpression))),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),ae=this.finalize(this.createNode(),new Mt);else{this.expect(")");const De=this.context.inIteration,ge=this.context.curlyParsing;this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",ae=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=ge,this.context.inIteration=De}return this.finalize(ne,m&&O?new hr(m,O,ae):new fr(u,f,d,ae))}parseContinueStatement(){const u=this.createNode();return this.expectKeyword("continue"),this.consumeSemicolon(),this.finalize(u,new cr)}parseBreakStatement(){const u=this.createNode();return this.expectKeyword("break"),this.consumeSemicolon(),this.finalize(u,new ur)}parseReturnStatement(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError("Illegal return statement");const u=this.createNode();this.expectKeyword("return");const f=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===me.EOF)&&this.lookahead.type!==me.StringLiteral&&this.lookahead.type!==me.Template?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(u,new gr(f))}parseStatement(){let u;switch(this.lookahead.type){case me.BooleanLiteral:case me.NullLiteral:case me.NumericLiteral:case me.StringLiteral:case me.Template:case me.Identifier:u=this.parseExpressionStatement();break;case me.Punctuator:{const f=this.lookahead.value;u="{"===f?this.parseBlockOrObjectStatement():"("===f?this.parseExpressionStatement():";"===f?this.parseEmptyStatement():this.parseExpressionStatement();break}case me.Keyword:switch(this.lookahead.value.toLowerCase()){case"break":u=this.parseBreakStatement();break;case"continue":u=this.parseContinueStatement();break;case"for":u=this.parseForStatement();break;case"function":u=this.parseFunctionDeclaration();break;case"if":u=this.parseIfStatement();break;case"return":u=this.parseReturnStatement();break;case"var":u=this.parseVariableStatement();break;default:u=this.parseExpressionStatement()}break;default:u=this.throwUnexpectedToken(this.lookahead)}return u}parseFunctionSourceElements(){const u=this.createNode();this.expect("{");const f=this.context.inIteration,d=this.context.inFunctionBody;this.context.inIteration=!1,this.context.inFunctionBody=!0;const m=[];for(;this.lookahead.type!==me.EOF&&!this.match("}");)m.push(this.parseStatementListItem());return this.expect("}"),this.context.inIteration=f,this.context.inFunctionBody=d,this.finalize(u,new dn(m))}parseFormalParameters(){const u=[];if(this.expect("("),!this.match(")"))for(;this.lookahead.type!==me.EOF&&(u.push(this.parseVariableIdentifier()),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),u}parseFunctionDeclaration(){const u=this.createNode();this.expectKeyword("function");const f=this.parseVariableIdentifier(),d=this.parseFormalParameters(),m=this.parseFunctionSourceElements();return this.finalize(u,new dr(f,d,m))}parseScript(){const u=this.createNode(),f=[];for(;this.lookahead.type!==me.EOF;)f.push(this.parseStatementListItem());return this.finalize(u,new Er(f))}}function xn(h,u,f){let d=null;const m=(ge,Ee)=>{f&&f(ge,Ee),d&&d.visit(ge,Ee)};let O="function"==typeof f?m:void 0,ne=!1;if(u){ne="boolean"==typeof u.comment&&u.comment;const ge="boolean"==typeof u.attachComment&&u.attachComment;(ne||ge)&&(d=new tr,d.attach=ge,u.comment=!0,O=m)}const ae=new Fr(h,u,O),De=ae.parseScript();return ne&&d&&(De.comments=d.comments),ae.config.tokens&&(De.tokens=ae.tokens),ae.config.tolerant&&(De.errors=ae.errorHandler.errors),De}function Cn(h,u=[]){const f=xn("function _() { "+h+"\n}");if(null==f.body)throw new Error("No formula provided.");if(0===f.body.length)throw new Error("No formula provided.");if(0===f.body.length)throw new Error("No formula provided.");if("BlockStatement"!==f.body[0].body.type)throw new Error("Invalid formula content.");const d=(0,S.UA)(f);if(""!==d)throw new Error(d);return(0,S.dN)(f,u),f}var Fn=q(8314);const vr=["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"];let wn=!1,Sn=!1,je=null,Ht=[];function bn(h,u){return!0===u.useAsync||!0===h.isAsync?function Or(h,u){if(null===je)throw new Error("Async Arcade must be enabled for this script");return(0,Fn.Z)("esri-csp-restrictions")?function(f){return je.executeScript(h,f)}:ke(h,u,!0)}(h,u):(0,Fn.Z)("esri-csp-restrictions")?function(f){return hn(h,f)}:ke(h,u)}function zt(h,u=[]){return Cn(h,u)}function Gt(h,u){if(!0===u.useAsync||!0===h.isAsync){if(null===je)throw new Error("Async Arcade must be enabled for this script");return je.executeScript(h,u)}return hn(h,u)}function wt(h,u){return function qn(h,u){return(0,S.bV)(h,u)}(h,u)}function Nn(h){return function Ir(h){return(0,S.Kq)(h)}(h)}function St(h,u=[]){return void 0===h.usesGeometry&&(0,S.dN)(h,u),!0===h.usesGeometry}let jt=null;function Yt(){return jt||(jt=(0,K.$6)([Promise.all([q.e(4918),q.e(8592),q.e(4766)]).then(q.bind(q,44766)),Promise.resolve().then(q.bind(q,63461))]).then(([h,u])=>(Sn=!0,u.setGeometryEngine(h),!0)),jt)}let Vt=null;function Wt(){return null!==Vt||(Vt=function Rt(){return q.e(8302).then(q.bind(q,38302)).then(h=>(Ge([h],"async"),!0))}().then(()=>Promise.all([q.e(8302),q.e(5039)]).then(q.bind(q,35039))).then(h=>{je=h;for(const u of Ht)je.extend(u),Ge(u,"async");return Ht=null,!0})),Vt}function In(){return wn}function vn(){return!!je}function Tn(){return Sn}let Kt=null;function Jt(){return Kt||(Kt=Wt().then(()=>(0,K.$6)([Promise.all([q.e(410),q.e(3482),q.e(5171)]).then(q.bind(q,85171)),Promise.all([q.e(410),q.e(3482),q.e(5171),q.e(2480)]).then(q.bind(q,82480)),Promise.all([q.e(410),q.e(3482),q.e(5978)]).then(q.bind(q,55978)),Promise.all([q.e(410),q.e(2543)]).then(q.bind(q,2543)),q.e(4198).then(q.bind(q,34198))]).then(([h,u,f,d,m])=>(Rn=h,je.extend([u,f,d,m]),Ge([u,f,d,m],"async"),wn=!0,!0))),Kt)}function Bn(h,u=[]){return void 0===h.usesFeatureSet&&(0,S.dN)(h,u),!0===h.usesFeatureSet}function On(h,u,f=[],d=!1){return(0,K.Ue)((m,O)=>{const ne="string"==typeof h?zt(h):h,ae=[];ne&&(!1===Tn()&&(St(ne)||d)&&ae.push(Yt()),!1===vn()&&(!0===ne.isAsync||u)&&ae.push(Wt()),!1===In()&&(Bn(ne)||function Zr(h,u){if(u){for(const f of u)if(wt(h,f))return!0;return!1}return!1}(ne,f))&&ae.push(Jt())),ae.length?(0,K.$6)(ae).then(()=>{m(!0)},O):m(!0)})}function _n(h){if(St(h))return!0;const u=(0,S.Vf)(h);let f=!1;for(let d=0;d<u.length;d++)if(vr.indexOf(u[d])>-1){f=!0;break}return f}let Rn=null;function bt(){return Rn}const Hr=Object.freeze({__proto__:null,compileScript:bn,extend:function _r(h){cn(h),Ge(h,"sync"),null===je?Ht.push(h):(Ge(h,"async"),je.extend(h))},parseScript:zt,validateScript:function Rr(h,u,f=""){return function Nr(h,u,f){return(0,S.FS)(h,u,f)}(h,u,f)},scriptCheck:function kr(h,u,f,d=""){return function Sr(h,u,f,d,m){const O=[],ae="function _() { \n"+h+"\n}";try{const De=xn(ae,{tolerant:!0,loc:!0,range:!0}),ge=De.errors;if(ge.length>0)for(let xe=0;xe<ge.length;xe++)O.push({line:ge[xe].lineNumber-2,character:ge[xe].column,reason:ge[xe].description});const Ee=(0,S.AA)(De,u,f,d,m);for(let xe=0;xe<Ee.length;xe++)Ee[xe].line=Ee[xe].line-2,Ee[xe].range&&(Ee[xe].range=[Ee[xe][0]-15,Ee[xe][1]-15]),Ee[xe].loc&&(Ee[xe].loc.start.line=Ee[xe].loc.start.line-2,Ee[xe].loc.end.line=Ee[xe].loc.end.line-2),O.push(Ee[xe])}catch(De){try{if("Unexpected token }"===De.description){const ge=ae.split("\n").length;De.lineNumber===ge?(De.index=ae.length-1,O.push({line:De.lineNumber-4,character:De.column,reason:"Unexpected end of script"})):(De.index=ae.length-1,O.push({line:De.lineNumber-2,character:De.column,reason:"Unexpected end of script"}))}else O.push({line:De.lineNumber-2,character:De.column,reason:De.description})}catch(ge){}}return O}(h,u,f,d)},parseAndExecuteScript:function Ur(h,u,f=[]){return Gt(Cn(h,f),u)},executeScript:Gt,referencesMember:wt,referencesFunction:function Lr(h,u){return function er(h,u){return(0,S.w8)(h,u)}(h,u)},extractFieldLiterals:function Mr(h,u=!1){return function br(h,u){return(0,S.mb)(h)}(h)},extractExpectedFieldLiterals:Nn,scriptUsesGeometryEngine:St,enableGeometrySupport:Yt,enableAsyncSupport:Wt,isFeatureSetSupportEnabled:In,isAsyncEnabled:vn,isGeometryEnabled:Tn,enableFeatureSetSupport:Jt,scriptUsesFeatureSet:Bn,scriptIsAsync:function Pr(h,u=[]){return void 0===h.isAsync&&(0,S.dN)(h,u),!0===h.isAsync},loadScriptDependencies:On,scriptTouchesGeometry:_n,featureSetUtils:bt});var zr=q(58817),kn=q(86971);const Un=/^\$(feature|aggregatedFeatures)\./i,Gr={vars:{$feature:"any",$view:"any"},spatialReference:null};function jr(h){return h.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function yt(h){if(!h)return null;try{return zt(h)}catch(u){}return null}function Yr(h,u){const f="string"==typeof h?yt(h):h;if(!f)return null;try{return bn(f,u=u||(0,zr.d9)(Gr))}catch(d){}return null}function Vr(h,u){return{vars:{$feature:null==h?new v.Z:v.Z.createFromGraphic(h),$view:u&&u.view},spatialReference:u&&u.sr}}function Wr(h,u,f){return v.Z.createFromGraphicLikeObject(u,h,f)}function Kr(h,u){h.vars.$feature=u}function Jr(h,u){let f;try{f=Gt(h,u)}catch(d){f=null}return f}function Xr(h,u){let f;try{f=h?h(u):null}catch(d){f=null}return f}function $r(h,u){try{return h?h(u):Promise.resolve(null)}catch(f){return Promise.resolve(null)}}function Qr(h,u){if(!h)return[];const f="string"==typeof h?yt(h):h;if(!f)return[];const d=Nn(f);let m=new Array;d.forEach(ne=>{Un.test(ne)&&(ne=ne.replace(Un,""),m.push(ne))});const O=m.filter(ne=>ne.includes("*"));return m=m.filter(ne=>!O.includes(ne)),u&&O.forEach(ne=>{const ae=new RegExp(`^${ne.split(/\*+/).map(jr).join(".*")}$`,"i");u.forEach(De=>ae.test(De)?m.push(De):null)}),[...new Set(m.sort())]}function qr(h){return wt(h,"$view")}function ei(h,u){return!!h&&wt(h,u)}function ti(h){if(h&&(null!=h.spatialReference||null!=h.scale&&null!=h.viewingMode))return{view:h.viewingMode&&null!=h.scale?new b.Z({viewingMode:h.viewingMode,scale:h.scale}):null,sr:h.spatialReference}}function ni({url:h,spatialReference:u,lrucache:f,interceptor:d}){const m=bt();return m?m.createFeatureSetCollectionFromService(h,u,f,d):null}function ri({layer:h,spatialReference:u,outFields:f,returnGeometry:d,lrucache:m,interceptor:O}){if(null===h)return null;const ne=bt();return ne?ne.constructFeatureSet(h,u,f,null==d||d,m,O):null}function ii(h){if(null===(null==h?void 0:h.map))return null;const u=bt();return u?u.createFeatureSetCollectionFromMap(h.map,h.spatialReference,h.lrucache,h.interceptor):null}function si(h,u,f=[]){return On(h,u,f)}function ai(){return Yt()}function oi(){return Jt()}function Ln(h,u){if(!h)return!1;if("string"==typeof h)return u(h);const f=h;if(function ui(h){return"simple"===h.type||"class-breaks"===h.type||"unique-value"===h.type||"dot-density"===h.type||"dictionary"===h.type}(f)){if("dot-density"===f.type){const O=f.attributes.some(ne=>u(ne.valueExpression));if(O)return O}const d=f.visualVariables,m=!!d&&d.some(O=>{let ne=u(O.valueExpression);return"size"===O.type&&((0,kn.iY)(O.minSize)&&(ne=ne||u(O.minSize.valueExpression)),(0,kn.iY)(O.maxSize)&&(ne=ne||u(O.maxSize.valueExpression))),ne});return!(!("valueExpression"in f)||!u(f.valueExpression))||m}if(function li(h){return"esri.layers.support.LabelClass"===h.declaredClass}(f)){const d=f.labelExpressionInfo&&f.labelExpressionInfo.expression;return!(!d||!u(d))||!1}return!!function ci(h){return"esri.PopupTemplate"===h.declaredClass}(f)&&(!!f.expressionInfos&&f.expressionInfos.some(d=>u(d.expression))||Array.isArray(f.content)&&f.content.some(d=>{var m;return"expression"===d.type&&u(null==(m=d.expressionInfo)?void 0:m.expression)}))}function hi(h){const u=yt(h);return!!u&&_n(u)}function fi(h){return Ln(h,hi)}function di(h){const u=yt(h);return!!u&&St(u)}function mi(h){return Ln(h,di)}}}]);