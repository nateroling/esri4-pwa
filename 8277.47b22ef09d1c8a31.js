"use strict";var H=Object.defineProperty,Q=Object.defineProperties,X=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,$=(h,c,t)=>c in h?H(h,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[c]=t,B=(h,c)=>{for(var t in c||(c={}))Y.call(c,t)&&$(h,t,c[t]);if(V)for(var t of V(c))b.call(c,t)&&$(h,t,c[t]);return h},z=(h,c)=>Q(h,X(c));(self.webpackChunkesri4_pwa=self.webpackChunkesri4_pwa||[]).push([[8277,3705],{30164:(h,c,t)=>{t.d(c,{T:()=>p});var o=t(15861);const p={BingMapsLayer:(e=(0,o.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(9319)]).then(t.bind(t,19319))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5227)]).then(t.bind(t,25227))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,15382))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(6926),t.e(581),t.e(1693),t.e(3714)]).then(t.bind(t,43714))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(6926),t.e(8594),t.e(581),t.e(1693),t.e(8592),t.e(3490)]).then(t.bind(t,23490))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(3586)]).then(t.bind(t,13586))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8411)]).then(t.bind(t,38411))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(9530)]).then(t.bind(t,48887))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9114)]).then(t.bind(t,49114))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(308),t.e(8592),t.e(1237)]).then(t.bind(t,61237))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(5941)]).then(t.bind(t,55941))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(8731)]).then(t.bind(t,59735))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(148)]).then(t.bind(t,10193))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(508)]).then(t.bind(t,20508))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,o.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,o.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return e.apply(this,arguments)}}()};var e},88755:(h,c,t)=>{t.d(c,{m:()=>e});var o=t(21726),p=t(84687);function e(s){return{origin:"portal-item",url:(0,o.mN)(s.itemUrl),portal:s.portal||p.Z.getDefault(),portalItem:s,readResourcePaths:[]}}},83705:(h,c,t)=>{t.r(c),t.d(c,{getFirstLayerOrTableId:()=>E,getNumLayersAndTables:()=>Z,load:()=>G,preprocessFSItemData:()=>M});var o=t(15861),p=t(26584),e=t(30164),s=t(84687),g=t(88755),C=t(39683),T=t(45205);function G(r,i){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)(function*(r,i){const a=r.instance.portalItem;return a&&a.id?(yield a.load(i),j(r),x(r,i)):Promise.resolve()})).apply(this,arguments)}function j(r){const i=r.instance.portalItem;if(-1===r.supportedTypes.indexOf(i.type))throw new p.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:i.type,expectedType:r.supportedTypes.join(", ")})}function x(r,i){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(function*(r,i){const a=r.instance,y=a.portalItem,{url:l,title:d}=y,u=(0,g.m)(y);if("group"===a.type)return a.read({title:d},u),F(a,r);l&&a.read({url:l},u);const n=yield K(r,i);return n&&a.read(n,u),a.resourceReferences={portalItem:y,paths:u.readResourcePaths},a.read({title:d},u),(0,C.y)(a,u)})).apply(this,arguments)}function F(r,i){let a;const y=r.portalItem.type;switch(y){case"Feature Service":case"Feature Collection":a=e.T.FeatureLayer;break;case"Stream Service":a=e.T.StreamLayer;break;case"Scene Service":a=e.T.SceneLayer;break;default:throw new p.Z("portal:unsupported-item-type-as-group",`The item type '${y}' is not supported as a 'IGroupLayer'`)}let l;return a().then(d=>(l=d,K(i))).then(function(){var d=(0,o.Z)(function*(u){return"Feature Service"===y?(u=yield M(u,r.portalItem.url),O(r,l,u)):Z(u)>0?O(r,l,u):function U(r,i){return r.portalItem.url?(0,T.b)(r.portalItem.url).then(a=>{var y,l;function d(u){return{id:u.id,name:u.name}}a&&O(r,i,{layers:null==(y=a.layers)?void 0:y.map(d),tables:null==(l=a.tables)?void 0:l.map(d)})}):Promise.resolve()}(r,l)});return function(u){return d.apply(this,arguments)}}())}function O(r,i,a){let y=a.layers||[];const l=a.tables||[];"Feature Collection"===r.portalItem.type&&(y.forEach(d=>{var u;"Table"===(null==d||null==(u=d.layerDefinition)?void 0:u.type)&&l.push(d)}),y=y.filter(d=>{var u;return"Table"!==(null==d||null==(u=d.layerDefinition)?void 0:u.type)})),y.reverse().forEach(d=>{const u=W(r,i,a,d);r.add(u)}),l.reverse().forEach(d=>{const u=W(r,i,a,d);r.tables.add(u)})}function W(r,i,a,y){const l=new i({portalItem:r.portalItem.clone(),layerId:y.id,sublayerTitleMode:"service-name"});if("Feature Collection"===r.portalItem.type){const d={origin:"portal-item",portal:r.portalItem.portal||s.Z.getDefault()};l.read(y,d);const u=a.showLegend;null!=u&&l.read({showLegend:u},d)}return l}function K(r,i){if(!1===r.supportsData)return Promise.resolve(void 0);const a=r.instance;return a.portalItem.fetchData("json",i).catch(()=>null).then(function(){var y=(0,o.Z)(function*(l){if(function A(r){return"stream"!==r.type&&"layerId"in r}(a)){let d,u=!0;return l&&Z(l)>0&&(null==a.layerId&&(a.layerId=E(l)),d=function R(r,i){const a=r.layers;if(a)for(let l=0;l<a.length;l++)if(a[l].id===i)return a[l];const y=r.tables;if(y)for(let l=0;l<y.length;l++)if(y[l].id===i)return y[l];return null}(l,a.layerId),d&&(1===Z(l)&&(u=!1),null!=l.showLegend&&(d.showLegend=l.showLegend))),u&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),d}return l});return function(l){return y.apply(this,arguments)}}())}function M(r,i){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)(function*(r,i){var a,y;if(null==(null==(a=r)?void 0:a.layers)||null==(null==(y=r)?void 0:y.tables)){const l=yield(0,T.b)(i);(r=r||{}).layers=r.layers||(null==l?void 0:l.layers),r.tables=r.tables||(null==l?void 0:l.tables)}return r})).apply(this,arguments)}function E(r){const i=r.layers;if(i&&i.length)return i[0].id;const a=r.tables;return a&&a.length?a[0].id:null}function Z(r){var i,a,y,l;return(null!=(i=null==r||null==(a=r.layers)?void 0:a.length)?i:0)+(null!=(y=null==r||null==(l=r.tables)?void 0:l.length)?y:0)}},18277:(h,c,t)=>{t.r(c),t.d(c,{fromItem:()=>j,selectLayerClassPath:()=>S});var o=t(15861),p=t(26584),e=t(30164),s=t(55463),g=t(83705);function T(n,f){return!!n.typeKeywords&&n.typeKeywords.indexOf(f)>-1}var I=t(45205);function j(n){return!n.portalItem||n.portalItem instanceof s.default||(n=z(B({},n),{portalItem:new s.default(n.portalItem)})),function x(n){return n.load().then(S).then(F)}(n.portalItem).then(f=>{const m=B({portalItem:n.portalItem},f.properties);return Promise.resolve(new(0,f.constructor)(m))})}function S(n){switch(n.type){case"Map Service":return function U(n){return function l(n){return(0,I.b)(n.url).then(f=>f.tileInfo)}(n).then(f=>f?{className:"TileLayer"}:{className:"MapImageLayer"})}(n);case"Feature Service":return function O(n){return d(n).then(f=>{if("object"==typeof f){const m={};return null!=f.id&&(m.layerId=f.id),{className:"FeatureLayer",properties:m}}return{className:"GroupLayer"}})}(n);case"Feature Collection":return function K(n){return M.apply(this,arguments)}(n);case"Scene Service":return function W(n){return d(n).then(f=>{if("object"==typeof f){const m={};let L;if(null!=f.id?(m.layerId=f.id,L=`${n.url}/layers/${f.id}`):L=n.url,Array.isArray(n.typeKeywords)&&n.typeKeywords.length>0){const v={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const P of Object.keys(v))if(-1!==n.typeKeywords.indexOf(P))return{className:v[P]}}return(0,I.b)(L).then(v=>{let P="SceneLayer";const D={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return v&&v.layerType&&D[v.layerType]&&(P=D[v.layerType]),{className:P,properties:m}})}return!1===f?(0,I.b)(n.url).then(m=>"Voxel"===(null==m?void 0:m.layerType)?{className:"VoxelLayer"}:{className:"GroupLayer"}):{className:"GroupLayer"}})}(n);case"Image Service":return function N(n){return E.apply(this,arguments)}(n);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new p.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type}))}}function F(n){return(0,e.T[n.className])().then(f=>({constructor:f,properties:n.properties}))}function M(){return(M=(0,o.Z)(function*(n){if(yield n.load(),T(n,"Map Notes"))return{className:"MapNotesLayer"};if(T(n,"Route Layer"))return{className:"RouteLayer"};const f=yield n.fetchData();return 1===(0,g.getNumLayersAndTables)(f)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function E(){return(E=(0,o.Z)(function*(n){var f,m,L;yield n.load();const v=null!=(f=null==(m=n.typeKeywords)?void 0:m.map(J=>J.toLowerCase()))?f:[];if(v.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(v.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const P=yield n.fetchData(),D=null==P?void 0:P.layerType;return"ArcGISTiledImageServiceLayer"===D?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===D?{className:"ImageryLayer"}:"map"===(null==(L=(yield(0,I.b)(n.url)).cacheType)?void 0:L.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function d(n){return!n.url||n.url.match(/\/\d+$/)?Promise.resolve({}):n.load().then(()=>n.fetchData()).then(function(){var f=(0,o.Z)(function*(m){return"Feature Service"===n.type?u(m=yield(0,g.preprocessFSItemData)(m,n.url)):(0,g.getNumLayersAndTables)(m)>0?u(m):(0,I.b)(n.url).then(u)});return function(m){return f.apply(this,arguments)}}())}function u(n){return 1===(0,g.getNumLayersAndTables)(n)&&{id:(0,g.getFirstLayerOrTableId)(n)}}},45205:(h,c,t)=>{t.d(c,{b:()=>e});var o=t(15861),p=t(84792);function e(g){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)(function*(g){const{data:C}=yield(0,p.default)(g,{responseType:"json",query:{f:"json"}});return C})).apply(this,arguments)}}}]);